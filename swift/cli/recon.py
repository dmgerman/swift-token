begin_unit
comment|'# Licensed under the Apache License, Version 2.0 (the "License");'
nl|'\n'
comment|'# you may not use this file except in compliance with the License.'
nl|'\n'
comment|'# You may obtain a copy of the License at'
nl|'\n'
comment|'#'
nl|'\n'
comment|'#    http://www.apache.org/licenses/LICENSE-2.0'
nl|'\n'
comment|'#'
nl|'\n'
comment|'# Unless required by applicable law or agreed to in writing, software'
nl|'\n'
comment|'# distributed under the License is distributed on an "AS IS" BASIS,'
nl|'\n'
comment|'# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or'
nl|'\n'
comment|'# implied.'
nl|'\n'
comment|'# See the License for the specific language governing permissions and'
nl|'\n'
comment|'# limitations under the License.'
nl|'\n'
nl|'\n'
string|'"""\n    cmdline utility to perform cluster reconnaissance\n"""'
newline|'\n'
nl|'\n'
name|'from'
name|'__future__'
name|'import'
name|'print_function'
newline|'\n'
nl|'\n'
name|'from'
name|'eventlet'
op|'.'
name|'green'
name|'import'
name|'urllib2'
op|','
name|'socket'
newline|'\n'
name|'from'
name|'six'
op|'.'
name|'moves'
op|'.'
name|'urllib'
op|'.'
name|'parse'
name|'import'
name|'urlparse'
newline|'\n'
name|'from'
name|'swift'
op|'.'
name|'common'
op|'.'
name|'utils'
name|'import'
name|'SWIFT_CONF_FILE'
newline|'\n'
name|'from'
name|'swift'
op|'.'
name|'common'
op|'.'
name|'ring'
name|'import'
name|'Ring'
newline|'\n'
name|'from'
name|'swift'
op|'.'
name|'common'
op|'.'
name|'storage_policy'
name|'import'
name|'POLICIES'
newline|'\n'
name|'from'
name|'hashlib'
name|'import'
name|'md5'
newline|'\n'
name|'import'
name|'eventlet'
newline|'\n'
name|'import'
name|'json'
newline|'\n'
name|'import'
name|'optparse'
newline|'\n'
name|'import'
name|'time'
newline|'\n'
name|'import'
name|'sys'
newline|'\n'
name|'import'
name|'os'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|seconds2timeunit
name|'def'
name|'seconds2timeunit'
op|'('
name|'seconds'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'elapsed'
op|'='
name|'seconds'
newline|'\n'
name|'unit'
op|'='
string|"'seconds'"
newline|'\n'
name|'if'
name|'elapsed'
op|'>='
number|'60'
op|':'
newline|'\n'
indent|'        '
name|'elapsed'
op|'='
name|'elapsed'
op|'/'
number|'60.0'
newline|'\n'
name|'unit'
op|'='
string|"'minutes'"
newline|'\n'
name|'if'
name|'elapsed'
op|'>='
number|'60'
op|':'
newline|'\n'
indent|'            '
name|'elapsed'
op|'='
name|'elapsed'
op|'/'
number|'60.0'
newline|'\n'
name|'unit'
op|'='
string|"'hours'"
newline|'\n'
name|'if'
name|'elapsed'
op|'>='
number|'24'
op|':'
newline|'\n'
indent|'                '
name|'elapsed'
op|'='
name|'elapsed'
op|'/'
number|'24.0'
newline|'\n'
name|'unit'
op|'='
string|"'days'"
newline|'\n'
dedent|''
dedent|''
dedent|''
name|'return'
name|'elapsed'
op|','
name|'unit'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|size_suffix
dedent|''
name|'def'
name|'size_suffix'
op|'('
name|'size'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'suffixes'
op|'='
op|'['
string|"'bytes'"
op|','
string|"'kB'"
op|','
string|"'MB'"
op|','
string|"'GB'"
op|','
string|"'TB'"
op|','
string|"'PB'"
op|','
string|"'EB'"
op|','
string|"'ZB'"
op|','
string|"'YB'"
op|']'
newline|'\n'
name|'for'
name|'suffix'
name|'in'
name|'suffixes'
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'size'
op|'<'
number|'1000'
op|':'
newline|'\n'
indent|'            '
name|'return'
string|'"%s %s"'
op|'%'
op|'('
name|'size'
op|','
name|'suffix'
op|')'
newline|'\n'
dedent|''
name|'size'
op|'='
name|'size'
op|'//'
number|'1000'
newline|'\n'
dedent|''
name|'return'
string|'"%s %s"'
op|'%'
op|'('
name|'size'
op|','
name|'suffix'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|Scout
dedent|''
name|'class'
name|'Scout'
op|'('
name|'object'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""\n    Obtain swift recon information\n    """'
newline|'\n'
nl|'\n'
DECL|member|__init__
name|'def'
name|'__init__'
op|'('
name|'self'
op|','
name|'recon_type'
op|','
name|'verbose'
op|'='
name|'False'
op|','
name|'suppress_errors'
op|'='
name|'False'
op|','
nl|'\n'
name|'timeout'
op|'='
number|'5'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'recon_type'
op|'='
name|'recon_type'
newline|'\n'
name|'self'
op|'.'
name|'verbose'
op|'='
name|'verbose'
newline|'\n'
name|'self'
op|'.'
name|'suppress_errors'
op|'='
name|'suppress_errors'
newline|'\n'
name|'self'
op|'.'
name|'timeout'
op|'='
name|'timeout'
newline|'\n'
nl|'\n'
DECL|member|scout_host
dedent|''
name|'def'
name|'scout_host'
op|'('
name|'self'
op|','
name|'base_url'
op|','
name|'recon_type'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""\n        Perform the actual HTTP request to obtain swift recon telemtry.\n\n        :param base_url: the base url of the host you wish to check. str of the\n                        format \'http://127.0.0.1:6000/recon/\'\n        :param recon_type: the swift recon check to request.\n        :returns: tuple of (recon url used, response body, and status)\n        """'
newline|'\n'
name|'url'
op|'='
name|'base_url'
op|'+'
name|'recon_type'
newline|'\n'
name|'try'
op|':'
newline|'\n'
indent|'            '
name|'body'
op|'='
name|'urllib2'
op|'.'
name|'urlopen'
op|'('
name|'url'
op|','
name|'timeout'
op|'='
name|'self'
op|'.'
name|'timeout'
op|')'
op|'.'
name|'read'
op|'('
op|')'
newline|'\n'
name|'content'
op|'='
name|'json'
op|'.'
name|'loads'
op|'('
name|'body'
op|')'
newline|'\n'
name|'if'
name|'self'
op|'.'
name|'verbose'
op|':'
newline|'\n'
indent|'                '
name|'print'
op|'('
string|'"-> %s: %s"'
op|'%'
op|'('
name|'url'
op|','
name|'content'
op|')'
op|')'
newline|'\n'
dedent|''
name|'status'
op|'='
number|'200'
newline|'\n'
dedent|''
name|'except'
name|'urllib2'
op|'.'
name|'HTTPError'
name|'as'
name|'err'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'not'
name|'self'
op|'.'
name|'suppress_errors'
name|'or'
name|'self'
op|'.'
name|'verbose'
op|':'
newline|'\n'
indent|'                '
name|'print'
op|'('
string|'"-> %s: %s"'
op|'%'
op|'('
name|'url'
op|','
name|'err'
op|')'
op|')'
newline|'\n'
dedent|''
name|'content'
op|'='
name|'err'
newline|'\n'
name|'status'
op|'='
name|'err'
op|'.'
name|'code'
newline|'\n'
dedent|''
name|'except'
op|'('
name|'urllib2'
op|'.'
name|'URLError'
op|','
name|'socket'
op|'.'
name|'timeout'
op|')'
name|'as'
name|'err'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'not'
name|'self'
op|'.'
name|'suppress_errors'
name|'or'
name|'self'
op|'.'
name|'verbose'
op|':'
newline|'\n'
indent|'                '
name|'print'
op|'('
string|'"-> %s: %s"'
op|'%'
op|'('
name|'url'
op|','
name|'err'
op|')'
op|')'
newline|'\n'
dedent|''
name|'content'
op|'='
name|'err'
newline|'\n'
name|'status'
op|'='
op|'-'
number|'1'
newline|'\n'
dedent|''
name|'return'
name|'url'
op|','
name|'content'
op|','
name|'status'
newline|'\n'
nl|'\n'
DECL|member|scout
dedent|''
name|'def'
name|'scout'
op|'('
name|'self'
op|','
name|'host'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""\n        Obtain telemetry from a host running the swift recon middleware.\n\n        :param host: host to check\n        :returns: tuple of (recon url used, response body, status, time start\n                  and time end)\n        """'
newline|'\n'
name|'base_url'
op|'='
string|'"http://%s:%s/recon/"'
op|'%'
op|'('
name|'host'
op|'['
number|'0'
op|']'
op|','
name|'host'
op|'['
number|'1'
op|']'
op|')'
newline|'\n'
name|'ts_start'
op|'='
name|'time'
op|'.'
name|'time'
op|'('
op|')'
newline|'\n'
name|'url'
op|','
name|'content'
op|','
name|'status'
op|'='
name|'self'
op|'.'
name|'scout_host'
op|'('
name|'base_url'
op|','
name|'self'
op|'.'
name|'recon_type'
op|')'
newline|'\n'
name|'ts_end'
op|'='
name|'time'
op|'.'
name|'time'
op|'('
op|')'
newline|'\n'
name|'return'
name|'url'
op|','
name|'content'
op|','
name|'status'
op|','
name|'ts_start'
op|','
name|'ts_end'
newline|'\n'
nl|'\n'
DECL|member|scout_server_type
dedent|''
name|'def'
name|'scout_server_type'
op|'('
name|'self'
op|','
name|'host'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""\n        Obtain Server header by calling OPTIONS.\n\n        :param host: host to check\n        :returns: Server type, status\n        """'
newline|'\n'
name|'try'
op|':'
newline|'\n'
indent|'            '
name|'url'
op|'='
string|'"http://%s:%s/"'
op|'%'
op|'('
name|'host'
op|'['
number|'0'
op|']'
op|','
name|'host'
op|'['
number|'1'
op|']'
op|')'
newline|'\n'
name|'req'
op|'='
name|'urllib2'
op|'.'
name|'Request'
op|'('
name|'url'
op|')'
newline|'\n'
name|'req'
op|'.'
name|'get_method'
op|'='
name|'lambda'
op|':'
string|"'OPTIONS'"
newline|'\n'
name|'conn'
op|'='
name|'urllib2'
op|'.'
name|'urlopen'
op|'('
name|'req'
op|')'
newline|'\n'
name|'header'
op|'='
name|'conn'
op|'.'
name|'info'
op|'('
op|')'
op|'.'
name|'getheader'
op|'('
string|"'Server'"
op|')'
newline|'\n'
name|'server_header'
op|'='
name|'header'
op|'.'
name|'split'
op|'('
string|"'/'"
op|')'
newline|'\n'
name|'content'
op|'='
name|'server_header'
op|'['
number|'0'
op|']'
newline|'\n'
name|'status'
op|'='
number|'200'
newline|'\n'
dedent|''
name|'except'
name|'urllib2'
op|'.'
name|'HTTPError'
name|'as'
name|'err'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'not'
name|'self'
op|'.'
name|'suppress_errors'
name|'or'
name|'self'
op|'.'
name|'verbose'
op|':'
newline|'\n'
indent|'                '
name|'print'
op|'('
string|'"-> %s: %s"'
op|'%'
op|'('
name|'url'
op|','
name|'err'
op|')'
op|')'
newline|'\n'
dedent|''
name|'content'
op|'='
name|'err'
newline|'\n'
name|'status'
op|'='
name|'err'
op|'.'
name|'code'
newline|'\n'
dedent|''
name|'except'
op|'('
name|'urllib2'
op|'.'
name|'URLError'
op|','
name|'socket'
op|'.'
name|'timeout'
op|')'
name|'as'
name|'err'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'not'
name|'self'
op|'.'
name|'suppress_errors'
name|'or'
name|'self'
op|'.'
name|'verbose'
op|':'
newline|'\n'
indent|'                '
name|'print'
op|'('
string|'"-> %s: %s"'
op|'%'
op|'('
name|'url'
op|','
name|'err'
op|')'
op|')'
newline|'\n'
dedent|''
name|'content'
op|'='
name|'err'
newline|'\n'
name|'status'
op|'='
op|'-'
number|'1'
newline|'\n'
dedent|''
name|'return'
name|'url'
op|','
name|'content'
op|','
name|'status'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|SwiftRecon
dedent|''
dedent|''
name|'class'
name|'SwiftRecon'
op|'('
name|'object'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""\n    Retrieve and report cluster info from hosts running recon middleware.\n    """'
newline|'\n'
nl|'\n'
DECL|member|__init__
name|'def'
name|'__init__'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'verbose'
op|'='
name|'False'
newline|'\n'
name|'self'
op|'.'
name|'suppress_errors'
op|'='
name|'False'
newline|'\n'
name|'self'
op|'.'
name|'timeout'
op|'='
number|'5'
newline|'\n'
name|'self'
op|'.'
name|'pool_size'
op|'='
number|'30'
newline|'\n'
name|'self'
op|'.'
name|'pool'
op|'='
name|'eventlet'
op|'.'
name|'GreenPool'
op|'('
name|'self'
op|'.'
name|'pool_size'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'check_types'
op|'='
op|'['
string|"'account'"
op|','
string|"'container'"
op|','
string|"'object'"
op|']'
newline|'\n'
name|'self'
op|'.'
name|'server_type'
op|'='
string|"'object'"
newline|'\n'
nl|'\n'
DECL|member|_gen_stats
dedent|''
name|'def'
name|'_gen_stats'
op|'('
name|'self'
op|','
name|'stats'
op|','
name|'name'
op|'='
name|'None'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Compute various stats from a list of values."""'
newline|'\n'
name|'cstats'
op|'='
op|'['
name|'x'
name|'for'
name|'x'
name|'in'
name|'stats'
name|'if'
name|'x'
name|'is'
name|'not'
name|'None'
op|']'
newline|'\n'
name|'if'
name|'len'
op|'('
name|'cstats'
op|')'
op|'>'
number|'0'
op|':'
newline|'\n'
indent|'            '
name|'ret_dict'
op|'='
op|'{'
string|"'low'"
op|':'
name|'min'
op|'('
name|'cstats'
op|')'
op|','
string|"'high'"
op|':'
name|'max'
op|'('
name|'cstats'
op|')'
op|','
nl|'\n'
string|"'total'"
op|':'
name|'sum'
op|'('
name|'cstats'
op|')'
op|','
string|"'reported'"
op|':'
name|'len'
op|'('
name|'cstats'
op|')'
op|','
nl|'\n'
string|"'number_none'"
op|':'
name|'len'
op|'('
name|'stats'
op|')'
op|'-'
name|'len'
op|'('
name|'cstats'
op|')'
op|','
string|"'name'"
op|':'
name|'name'
op|'}'
newline|'\n'
name|'ret_dict'
op|'['
string|"'average'"
op|']'
op|'='
name|'ret_dict'
op|'['
string|"'total'"
op|']'
op|'/'
name|'float'
op|'('
name|'len'
op|'('
name|'cstats'
op|')'
op|')'
newline|'\n'
name|'ret_dict'
op|'['
string|"'perc_none'"
op|']'
op|'='
name|'ret_dict'
op|'['
string|"'number_none'"
op|']'
op|'*'
number|'100.0'
op|'/'
name|'len'
op|'('
name|'stats'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'ret_dict'
op|'='
op|'{'
string|"'reported'"
op|':'
number|'0'
op|'}'
newline|'\n'
dedent|''
name|'return'
name|'ret_dict'
newline|'\n'
nl|'\n'
DECL|member|_print_stats
dedent|''
name|'def'
name|'_print_stats'
op|'('
name|'self'
op|','
name|'stats'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""\n        print out formatted stats to console\n\n        :param stats: dict of stats generated by _gen_stats\n        """'
newline|'\n'
name|'print'
op|'('
string|"'[%(name)s] low: %(low)d, high: %(high)d, avg: '"
nl|'\n'
string|"'%(average).1f, total: %(total)d, '"
nl|'\n'
string|"'Failed: %(perc_none).1f%%, no_result: %(number_none)d, '"
nl|'\n'
string|"'reported: %(reported)d'"
op|'%'
name|'stats'
op|')'
newline|'\n'
nl|'\n'
DECL|member|_ptime
dedent|''
name|'def'
name|'_ptime'
op|'('
name|'self'
op|','
name|'timev'
op|'='
name|'None'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""\n        :param timev: a unix timestamp or None\n        :returns: a pretty string of the current time or provided time in UTC\n        """'
newline|'\n'
name|'if'
name|'timev'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'time'
op|'.'
name|'strftime'
op|'('
string|'"%Y-%m-%d %H:%M:%S"'
op|','
name|'time'
op|'.'
name|'gmtime'
op|'('
name|'timev'
op|')'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'time'
op|'.'
name|'strftime'
op|'('
string|'"%Y-%m-%d %H:%M:%S"'
op|','
name|'time'
op|'.'
name|'gmtime'
op|'('
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|_md5_file
dedent|''
dedent|''
name|'def'
name|'_md5_file'
op|'('
name|'self'
op|','
name|'path'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""\n        Get the MD5 checksum of a file.\n\n        :param path: path to file\n        :returns: MD5 checksum, hex encoded\n        """'
newline|'\n'
name|'md5sum'
op|'='
name|'md5'
op|'('
op|')'
newline|'\n'
name|'with'
name|'open'
op|'('
name|'path'
op|','
string|"'rb'"
op|')'
name|'as'
name|'f'
op|':'
newline|'\n'
indent|'            '
name|'block'
op|'='
name|'f'
op|'.'
name|'read'
op|'('
number|'4096'
op|')'
newline|'\n'
name|'while'
name|'block'
op|':'
newline|'\n'
indent|'                '
name|'md5sum'
op|'.'
name|'update'
op|'('
name|'block'
op|')'
newline|'\n'
name|'block'
op|'='
name|'f'
op|'.'
name|'read'
op|'('
number|'4096'
op|')'
newline|'\n'
dedent|''
dedent|''
name|'return'
name|'md5sum'
op|'.'
name|'hexdigest'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|get_hosts
dedent|''
name|'def'
name|'get_hosts'
op|'('
name|'self'
op|','
name|'region_filter'
op|','
name|'zone_filter'
op|','
name|'swift_dir'
op|','
name|'ring_names'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""\n        Get a list of hosts in the rings.\n\n        :param region_filter: Only list regions matching given filter\n        :param zone_filter: Only list zones matching given filter\n        :param swift_dir: Directory of swift config, usually /etc/swift\n        :param ring_names: Collection of ring names, such as\n         [\'object\', \'object-2\']\n        :returns: a set of tuples containing the ip and port of hosts\n        """'
newline|'\n'
name|'rings'
op|'='
op|'['
name|'Ring'
op|'('
name|'swift_dir'
op|','
name|'ring_name'
op|'='
name|'n'
op|')'
name|'for'
name|'n'
name|'in'
name|'ring_names'
op|']'
newline|'\n'
name|'devs'
op|'='
op|'['
name|'d'
name|'for'
name|'r'
name|'in'
name|'rings'
name|'for'
name|'d'
name|'in'
name|'r'
op|'.'
name|'devs'
name|'if'
name|'d'
op|']'
newline|'\n'
name|'if'
name|'region_filter'
name|'is'
name|'not'
name|'None'
op|':'
newline|'\n'
indent|'            '
name|'devs'
op|'='
op|'['
name|'d'
name|'for'
name|'d'
name|'in'
name|'devs'
name|'if'
name|'d'
op|'['
string|"'region'"
op|']'
op|'=='
name|'region_filter'
op|']'
newline|'\n'
dedent|''
name|'if'
name|'zone_filter'
name|'is'
name|'not'
name|'None'
op|':'
newline|'\n'
indent|'            '
name|'devs'
op|'='
op|'['
name|'d'
name|'for'
name|'d'
name|'in'
name|'devs'
name|'if'
name|'d'
op|'['
string|"'zone'"
op|']'
op|'=='
name|'zone_filter'
op|']'
newline|'\n'
dedent|''
name|'return'
name|'set'
op|'('
op|'('
name|'d'
op|'['
string|"'ip'"
op|']'
op|','
name|'d'
op|'['
string|"'port'"
op|']'
op|')'
name|'for'
name|'d'
name|'in'
name|'devs'
op|')'
newline|'\n'
nl|'\n'
DECL|member|get_ringmd5
dedent|''
name|'def'
name|'get_ringmd5'
op|'('
name|'self'
op|','
name|'hosts'
op|','
name|'swift_dir'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""\n        Compare ring md5sum\'s with those on remote host\n\n        :param hosts: set of hosts to check. in the format of:\n            set([(\'127.0.0.1\', 6020), (\'127.0.0.2\', 6030)])\n        :param swift_dir: The local directory with the ring files.\n        """'
newline|'\n'
name|'matches'
op|'='
number|'0'
newline|'\n'
name|'errors'
op|'='
number|'0'
newline|'\n'
name|'ring_names'
op|'='
name|'set'
op|'('
op|')'
newline|'\n'
name|'for'
name|'server_type'
name|'in'
op|'('
string|"'account'"
op|','
string|"'container'"
op|')'
op|':'
newline|'\n'
indent|'            '
name|'ring_name'
op|'='
string|"'%s.ring.gz'"
op|'%'
name|'server_type'
newline|'\n'
name|'ring_names'
op|'.'
name|'add'
op|'('
name|'ring_name'
op|')'
newline|'\n'
comment|'# include any other object ring files'
nl|'\n'
dedent|''
name|'for'
name|'ring_name'
name|'in'
name|'os'
op|'.'
name|'listdir'
op|'('
name|'swift_dir'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'ring_name'
op|'.'
name|'startswith'
op|'('
string|"'object'"
op|')'
name|'and'
name|'ring_name'
op|'.'
name|'endswith'
op|'('
string|"'ring.gz'"
op|')'
op|':'
newline|'\n'
indent|'                '
name|'ring_names'
op|'.'
name|'add'
op|'('
name|'ring_name'
op|')'
newline|'\n'
dedent|''
dedent|''
name|'rings'
op|'='
op|'{'
op|'}'
newline|'\n'
name|'for'
name|'ring_name'
name|'in'
name|'ring_names'
op|':'
newline|'\n'
indent|'            '
name|'md5sum'
op|'='
name|'md5'
op|'('
op|')'
newline|'\n'
name|'with'
name|'open'
op|'('
name|'os'
op|'.'
name|'path'
op|'.'
name|'join'
op|'('
name|'swift_dir'
op|','
name|'ring_name'
op|')'
op|','
string|"'rb'"
op|')'
name|'as'
name|'f'
op|':'
newline|'\n'
indent|'                '
name|'block'
op|'='
name|'f'
op|'.'
name|'read'
op|'('
number|'4096'
op|')'
newline|'\n'
name|'while'
name|'block'
op|':'
newline|'\n'
indent|'                    '
name|'md5sum'
op|'.'
name|'update'
op|'('
name|'block'
op|')'
newline|'\n'
name|'block'
op|'='
name|'f'
op|'.'
name|'read'
op|'('
number|'4096'
op|')'
newline|'\n'
dedent|''
dedent|''
name|'ring_sum'
op|'='
name|'md5sum'
op|'.'
name|'hexdigest'
op|'('
op|')'
newline|'\n'
name|'rings'
op|'['
name|'ring_name'
op|']'
op|'='
name|'ring_sum'
newline|'\n'
dedent|''
name|'recon'
op|'='
name|'Scout'
op|'('
string|'"ringmd5"'
op|','
name|'self'
op|'.'
name|'verbose'
op|','
name|'self'
op|'.'
name|'suppress_errors'
op|','
nl|'\n'
name|'self'
op|'.'
name|'timeout'
op|')'
newline|'\n'
name|'print'
op|'('
string|'"[%s] Checking ring md5sums"'
op|'%'
name|'self'
op|'.'
name|'_ptime'
op|'('
op|')'
op|')'
newline|'\n'
name|'if'
name|'self'
op|'.'
name|'verbose'
op|':'
newline|'\n'
indent|'            '
name|'for'
name|'ring_file'
op|','
name|'ring_sum'
name|'in'
name|'rings'
op|'.'
name|'items'
op|'('
op|')'
op|':'
newline|'\n'
indent|'                '
name|'print'
op|'('
string|'"-> On disk %s md5sum: %s"'
op|'%'
op|'('
name|'ring_file'
op|','
name|'ring_sum'
op|')'
op|')'
newline|'\n'
dedent|''
dedent|''
name|'for'
name|'url'
op|','
name|'response'
op|','
name|'status'
op|','
name|'ts_start'
op|','
name|'ts_end'
name|'in'
name|'self'
op|'.'
name|'pool'
op|'.'
name|'imap'
op|'('
nl|'\n'
name|'recon'
op|'.'
name|'scout'
op|','
name|'hosts'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'status'
op|'!='
number|'200'
op|':'
newline|'\n'
indent|'                '
name|'errors'
op|'='
name|'errors'
op|'+'
number|'1'
newline|'\n'
name|'continue'
newline|'\n'
dedent|''
name|'success'
op|'='
name|'True'
newline|'\n'
name|'for'
name|'remote_ring_file'
op|','
name|'remote_ring_sum'
name|'in'
name|'response'
op|'.'
name|'items'
op|'('
op|')'
op|':'
newline|'\n'
indent|'                '
name|'remote_ring_name'
op|'='
name|'os'
op|'.'
name|'path'
op|'.'
name|'basename'
op|'('
name|'remote_ring_file'
op|')'
newline|'\n'
name|'ring_sum'
op|'='
name|'rings'
op|'.'
name|'get'
op|'('
name|'remote_ring_name'
op|','
name|'None'
op|')'
newline|'\n'
name|'if'
name|'remote_ring_sum'
op|'!='
name|'ring_sum'
op|':'
newline|'\n'
indent|'                    '
name|'success'
op|'='
name|'False'
newline|'\n'
name|'print'
op|'('
string|'"!! %s (%s => %s) doesn\'t match on disk md5sum"'
op|'%'
op|'('
nl|'\n'
name|'url'
op|','
name|'remote_ring_name'
op|','
name|'remote_ring_sum'
op|')'
op|')'
newline|'\n'
dedent|''
dedent|''
name|'if'
name|'not'
name|'success'
op|':'
newline|'\n'
indent|'                '
name|'errors'
op|'+='
number|'1'
newline|'\n'
name|'continue'
newline|'\n'
dedent|''
name|'matches'
op|'+='
number|'1'
newline|'\n'
name|'if'
name|'self'
op|'.'
name|'verbose'
op|':'
newline|'\n'
indent|'                '
name|'print'
op|'('
string|'"-> %s matches."'
op|'%'
name|'url'
op|')'
newline|'\n'
dedent|''
dedent|''
name|'print'
op|'('
string|'"%s/%s hosts matched, %s error[s] while checking hosts."'
op|'%'
op|'('
nl|'\n'
name|'matches'
op|','
name|'len'
op|'('
name|'hosts'
op|')'
op|','
name|'errors'
op|')'
op|')'
newline|'\n'
name|'print'
op|'('
string|'"="'
op|'*'
number|'79'
op|')'
newline|'\n'
nl|'\n'
DECL|member|get_swiftconfmd5
dedent|''
name|'def'
name|'get_swiftconfmd5'
op|'('
name|'self'
op|','
name|'hosts'
op|','
name|'printfn'
op|'='
name|'print'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""\n        Compare swift.conf md5sum with that on remote hosts\n\n        :param hosts: set of hosts to check. in the format of:\n            set([(\'127.0.0.1\', 6020), (\'127.0.0.2\', 6030)])\n        :param printfn: function to print text; defaults to print()\n        """'
newline|'\n'
name|'matches'
op|'='
number|'0'
newline|'\n'
name|'errors'
op|'='
number|'0'
newline|'\n'
name|'conf_sum'
op|'='
name|'self'
op|'.'
name|'_md5_file'
op|'('
name|'SWIFT_CONF_FILE'
op|')'
newline|'\n'
name|'recon'
op|'='
name|'Scout'
op|'('
string|'"swiftconfmd5"'
op|','
name|'self'
op|'.'
name|'verbose'
op|','
name|'self'
op|'.'
name|'suppress_errors'
op|','
nl|'\n'
name|'self'
op|'.'
name|'timeout'
op|')'
newline|'\n'
name|'printfn'
op|'('
string|'"[%s] Checking swift.conf md5sum"'
op|'%'
name|'self'
op|'.'
name|'_ptime'
op|'('
op|')'
op|')'
newline|'\n'
name|'if'
name|'self'
op|'.'
name|'verbose'
op|':'
newline|'\n'
indent|'            '
name|'printfn'
op|'('
string|'"-> On disk swift.conf md5sum: %s"'
op|'%'
op|'('
name|'conf_sum'
op|','
op|')'
op|')'
newline|'\n'
dedent|''
name|'for'
name|'url'
op|','
name|'response'
op|','
name|'status'
op|','
name|'ts_start'
op|','
name|'ts_end'
name|'in'
name|'self'
op|'.'
name|'pool'
op|'.'
name|'imap'
op|'('
nl|'\n'
name|'recon'
op|'.'
name|'scout'
op|','
name|'hosts'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'status'
op|'=='
number|'200'
op|':'
newline|'\n'
indent|'                '
name|'if'
name|'response'
op|'['
name|'SWIFT_CONF_FILE'
op|']'
op|'!='
name|'conf_sum'
op|':'
newline|'\n'
indent|'                    '
name|'printfn'
op|'('
string|'"!! %s (%s) doesn\'t match on disk md5sum"'
op|'%'
nl|'\n'
op|'('
name|'url'
op|','
name|'response'
op|'['
name|'SWIFT_CONF_FILE'
op|']'
op|')'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'                    '
name|'matches'
op|'='
name|'matches'
op|'+'
number|'1'
newline|'\n'
name|'if'
name|'self'
op|'.'
name|'verbose'
op|':'
newline|'\n'
indent|'                        '
name|'printfn'
op|'('
string|'"-> %s matches."'
op|'%'
name|'url'
op|')'
newline|'\n'
dedent|''
dedent|''
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'                '
name|'errors'
op|'='
name|'errors'
op|'+'
number|'1'
newline|'\n'
dedent|''
dedent|''
name|'printfn'
op|'('
string|'"%s/%s hosts matched, %s error[s] while checking hosts."'
nl|'\n'
op|'%'
op|'('
name|'matches'
op|','
name|'len'
op|'('
name|'hosts'
op|')'
op|','
name|'errors'
op|')'
op|')'
newline|'\n'
name|'printfn'
op|'('
string|'"="'
op|'*'
number|'79'
op|')'
newline|'\n'
nl|'\n'
DECL|member|async_check
dedent|''
name|'def'
name|'async_check'
op|'('
name|'self'
op|','
name|'hosts'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""\n        Obtain and print async pending statistics\n\n        :param hosts: set of hosts to check. in the format of:\n            set([(\'127.0.0.1\', 6020), (\'127.0.0.2\', 6030)])\n        """'
newline|'\n'
name|'scan'
op|'='
op|'{'
op|'}'
newline|'\n'
name|'recon'
op|'='
name|'Scout'
op|'('
string|'"async"'
op|','
name|'self'
op|'.'
name|'verbose'
op|','
name|'self'
op|'.'
name|'suppress_errors'
op|','
nl|'\n'
name|'self'
op|'.'
name|'timeout'
op|')'
newline|'\n'
name|'print'
op|'('
string|'"[%s] Checking async pendings"'
op|'%'
name|'self'
op|'.'
name|'_ptime'
op|'('
op|')'
op|')'
newline|'\n'
name|'for'
name|'url'
op|','
name|'response'
op|','
name|'status'
op|','
name|'ts_start'
op|','
name|'ts_end'
name|'in'
name|'self'
op|'.'
name|'pool'
op|'.'
name|'imap'
op|'('
nl|'\n'
name|'recon'
op|'.'
name|'scout'
op|','
name|'hosts'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'status'
op|'=='
number|'200'
op|':'
newline|'\n'
indent|'                '
name|'scan'
op|'['
name|'url'
op|']'
op|'='
name|'response'
op|'['
string|"'async_pending'"
op|']'
newline|'\n'
dedent|''
dedent|''
name|'stats'
op|'='
name|'self'
op|'.'
name|'_gen_stats'
op|'('
name|'scan'
op|'.'
name|'values'
op|'('
op|')'
op|','
string|"'async_pending'"
op|')'
newline|'\n'
name|'if'
name|'stats'
op|'['
string|"'reported'"
op|']'
op|'>'
number|'0'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'_print_stats'
op|'('
name|'stats'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'print'
op|'('
string|'"[async_pending] - No hosts returned valid data."'
op|')'
newline|'\n'
dedent|''
name|'print'
op|'('
string|'"="'
op|'*'
number|'79'
op|')'
newline|'\n'
nl|'\n'
DECL|member|driveaudit_check
dedent|''
name|'def'
name|'driveaudit_check'
op|'('
name|'self'
op|','
name|'hosts'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""\n        Obtain and print drive audit error statistics\n\n        :param hosts: set of hosts to check. in the format of:\n            set([(\'127.0.0.1\', 6020), (\'127.0.0.2\', 6030)]\n        """'
newline|'\n'
name|'scan'
op|'='
op|'{'
op|'}'
newline|'\n'
name|'recon'
op|'='
name|'Scout'
op|'('
string|'"driveaudit"'
op|','
name|'self'
op|'.'
name|'verbose'
op|','
name|'self'
op|'.'
name|'suppress_errors'
op|','
nl|'\n'
name|'self'
op|'.'
name|'timeout'
op|')'
newline|'\n'
name|'print'
op|'('
string|'"[%s] Checking drive-audit errors"'
op|'%'
name|'self'
op|'.'
name|'_ptime'
op|'('
op|')'
op|')'
newline|'\n'
name|'for'
name|'url'
op|','
name|'response'
op|','
name|'status'
op|','
name|'ts_start'
op|','
name|'ts_end'
name|'in'
name|'self'
op|'.'
name|'pool'
op|'.'
name|'imap'
op|'('
nl|'\n'
name|'recon'
op|'.'
name|'scout'
op|','
name|'hosts'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'status'
op|'=='
number|'200'
op|':'
newline|'\n'
indent|'                '
name|'scan'
op|'['
name|'url'
op|']'
op|'='
name|'response'
op|'['
string|"'drive_audit_errors'"
op|']'
newline|'\n'
dedent|''
dedent|''
name|'stats'
op|'='
name|'self'
op|'.'
name|'_gen_stats'
op|'('
name|'scan'
op|'.'
name|'values'
op|'('
op|')'
op|','
string|"'drive_audit_errors'"
op|')'
newline|'\n'
name|'if'
name|'stats'
op|'['
string|"'reported'"
op|']'
op|'>'
number|'0'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'_print_stats'
op|'('
name|'stats'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'print'
op|'('
string|'"[drive_audit_errors] - No hosts returned valid data."'
op|')'
newline|'\n'
dedent|''
name|'print'
op|'('
string|'"="'
op|'*'
number|'79'
op|')'
newline|'\n'
nl|'\n'
DECL|member|umount_check
dedent|''
name|'def'
name|'umount_check'
op|'('
name|'self'
op|','
name|'hosts'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""\n        Check for and print unmounted drives\n\n        :param hosts: set of hosts to check. in the format of:\n            set([(\'127.0.0.1\', 6020), (\'127.0.0.2\', 6030)])\n        """'
newline|'\n'
name|'unmounted'
op|'='
op|'{'
op|'}'
newline|'\n'
name|'errors'
op|'='
op|'{'
op|'}'
newline|'\n'
name|'recon'
op|'='
name|'Scout'
op|'('
string|'"unmounted"'
op|','
name|'self'
op|'.'
name|'verbose'
op|','
name|'self'
op|'.'
name|'suppress_errors'
op|','
nl|'\n'
name|'self'
op|'.'
name|'timeout'
op|')'
newline|'\n'
name|'print'
op|'('
string|'"[%s] Getting unmounted drives from %s hosts..."'
op|'%'
nl|'\n'
op|'('
name|'self'
op|'.'
name|'_ptime'
op|'('
op|')'
op|','
name|'len'
op|'('
name|'hosts'
op|')'
op|')'
op|')'
newline|'\n'
name|'for'
name|'url'
op|','
name|'response'
op|','
name|'status'
op|','
name|'ts_start'
op|','
name|'ts_end'
name|'in'
name|'self'
op|'.'
name|'pool'
op|'.'
name|'imap'
op|'('
nl|'\n'
name|'recon'
op|'.'
name|'scout'
op|','
name|'hosts'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'status'
op|'=='
number|'200'
op|':'
newline|'\n'
indent|'                '
name|'unmounted'
op|'['
name|'url'
op|']'
op|'='
op|'['
op|']'
newline|'\n'
name|'errors'
op|'['
name|'url'
op|']'
op|'='
op|'['
op|']'
newline|'\n'
name|'for'
name|'i'
name|'in'
name|'response'
op|':'
newline|'\n'
indent|'                    '
name|'if'
name|'not'
name|'isinstance'
op|'('
name|'i'
op|'['
string|"'mounted'"
op|']'
op|','
name|'bool'
op|')'
op|':'
newline|'\n'
indent|'                        '
name|'errors'
op|'['
name|'url'
op|']'
op|'.'
name|'append'
op|'('
name|'i'
op|'['
string|"'device'"
op|']'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'                        '
name|'unmounted'
op|'['
name|'url'
op|']'
op|'.'
name|'append'
op|'('
name|'i'
op|'['
string|"'device'"
op|']'
op|')'
newline|'\n'
dedent|''
dedent|''
dedent|''
dedent|''
name|'for'
name|'host'
name|'in'
name|'unmounted'
op|':'
newline|'\n'
indent|'            '
name|'node'
op|'='
name|'urlparse'
op|'('
name|'host'
op|')'
op|'.'
name|'netloc'
newline|'\n'
name|'for'
name|'entry'
name|'in'
name|'unmounted'
op|'['
name|'host'
op|']'
op|':'
newline|'\n'
indent|'                '
name|'print'
op|'('
string|'"Not mounted: %s on %s"'
op|'%'
op|'('
name|'entry'
op|','
name|'node'
op|')'
op|')'
newline|'\n'
dedent|''
dedent|''
name|'for'
name|'host'
name|'in'
name|'errors'
op|':'
newline|'\n'
indent|'            '
name|'node'
op|'='
name|'urlparse'
op|'('
name|'host'
op|')'
op|'.'
name|'netloc'
newline|'\n'
name|'for'
name|'entry'
name|'in'
name|'errors'
op|'['
name|'host'
op|']'
op|':'
newline|'\n'
indent|'                '
name|'print'
op|'('
string|'"Device errors: %s on %s"'
op|'%'
op|'('
name|'entry'
op|','
name|'node'
op|')'
op|')'
newline|'\n'
dedent|''
dedent|''
name|'print'
op|'('
string|'"="'
op|'*'
number|'79'
op|')'
newline|'\n'
nl|'\n'
DECL|member|server_type_check
dedent|''
name|'def'
name|'server_type_check'
op|'('
name|'self'
op|','
name|'hosts'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""\n        Check for server types on the ring\n\n        :param hosts: set of hosts to check. in the format of:\n            set([(\'127.0.0.1\', 6020), (\'127.0.0.2\', 6030)])\n        """'
newline|'\n'
name|'errors'
op|'='
op|'{'
op|'}'
newline|'\n'
name|'recon'
op|'='
name|'Scout'
op|'('
string|'"server_type_check"'
op|','
name|'self'
op|'.'
name|'verbose'
op|','
name|'self'
op|'.'
name|'suppress_errors'
op|','
nl|'\n'
name|'self'
op|'.'
name|'timeout'
op|')'
newline|'\n'
name|'print'
op|'('
string|'"[%s] Validating server type \'%s\' on %s hosts..."'
op|'%'
nl|'\n'
op|'('
name|'self'
op|'.'
name|'_ptime'
op|'('
op|')'
op|','
name|'self'
op|'.'
name|'server_type'
op|','
name|'len'
op|'('
name|'hosts'
op|')'
op|')'
op|')'
newline|'\n'
name|'for'
name|'url'
op|','
name|'response'
op|','
name|'status'
name|'in'
name|'self'
op|'.'
name|'pool'
op|'.'
name|'imap'
op|'('
nl|'\n'
name|'recon'
op|'.'
name|'scout_server_type'
op|','
name|'hosts'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'status'
op|'=='
number|'200'
op|':'
newline|'\n'
indent|'                '
name|'if'
name|'response'
op|'!='
name|'self'
op|'.'
name|'server_type'
op|'+'
string|"'-server'"
op|':'
newline|'\n'
indent|'                    '
name|'errors'
op|'['
name|'url'
op|']'
op|'='
name|'response'
newline|'\n'
dedent|''
dedent|''
dedent|''
name|'print'
op|'('
string|'"%s/%s hosts ok, %s error[s] while checking hosts."'
op|'%'
op|'('
nl|'\n'
name|'len'
op|'('
name|'hosts'
op|')'
op|'-'
name|'len'
op|'('
name|'errors'
op|')'
op|','
name|'len'
op|'('
name|'hosts'
op|')'
op|','
name|'len'
op|'('
name|'errors'
op|')'
op|')'
op|')'
newline|'\n'
name|'for'
name|'host'
name|'in'
name|'errors'
op|':'
newline|'\n'
indent|'            '
name|'print'
op|'('
string|'"Invalid: %s is %s"'
op|'%'
op|'('
name|'host'
op|','
name|'errors'
op|'['
name|'host'
op|']'
op|')'
op|')'
newline|'\n'
dedent|''
name|'print'
op|'('
string|'"="'
op|'*'
number|'79'
op|')'
newline|'\n'
nl|'\n'
DECL|member|expirer_check
dedent|''
name|'def'
name|'expirer_check'
op|'('
name|'self'
op|','
name|'hosts'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""\n        Obtain and print expirer statistics\n\n        :param hosts: set of hosts to check. in the format of:\n            set([(\'127.0.0.1\', 6020), (\'127.0.0.2\', 6030)])\n        """'
newline|'\n'
name|'stats'
op|'='
op|'{'
string|"'object_expiration_pass'"
op|':'
op|'['
op|']'
op|','
string|"'expired_last_pass'"
op|':'
op|'['
op|']'
op|'}'
newline|'\n'
name|'recon'
op|'='
name|'Scout'
op|'('
string|'"expirer/%s"'
op|'%'
name|'self'
op|'.'
name|'server_type'
op|','
name|'self'
op|'.'
name|'verbose'
op|','
nl|'\n'
name|'self'
op|'.'
name|'suppress_errors'
op|','
name|'self'
op|'.'
name|'timeout'
op|')'
newline|'\n'
name|'print'
op|'('
string|'"[%s] Checking on expirers"'
op|'%'
name|'self'
op|'.'
name|'_ptime'
op|'('
op|')'
op|')'
newline|'\n'
name|'for'
name|'url'
op|','
name|'response'
op|','
name|'status'
op|','
name|'ts_start'
op|','
name|'ts_end'
name|'in'
name|'self'
op|'.'
name|'pool'
op|'.'
name|'imap'
op|'('
nl|'\n'
name|'recon'
op|'.'
name|'scout'
op|','
name|'hosts'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'status'
op|'=='
number|'200'
op|':'
newline|'\n'
indent|'                '
name|'stats'
op|'['
string|"'object_expiration_pass'"
op|']'
op|'.'
name|'append'
op|'('
nl|'\n'
name|'response'
op|'.'
name|'get'
op|'('
string|"'object_expiration_pass'"
op|')'
op|')'
newline|'\n'
name|'stats'
op|'['
string|"'expired_last_pass'"
op|']'
op|'.'
name|'append'
op|'('
nl|'\n'
name|'response'
op|'.'
name|'get'
op|'('
string|"'expired_last_pass'"
op|')'
op|')'
newline|'\n'
dedent|''
dedent|''
name|'for'
name|'k'
name|'in'
name|'stats'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'stats'
op|'['
name|'k'
op|']'
op|':'
newline|'\n'
indent|'                '
name|'computed'
op|'='
name|'self'
op|'.'
name|'_gen_stats'
op|'('
name|'stats'
op|'['
name|'k'
op|']'
op|','
name|'name'
op|'='
name|'k'
op|')'
newline|'\n'
name|'if'
name|'computed'
op|'['
string|"'reported'"
op|']'
op|'>'
number|'0'
op|':'
newline|'\n'
indent|'                    '
name|'self'
op|'.'
name|'_print_stats'
op|'('
name|'computed'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'                    '
name|'print'
op|'('
string|'"[%s] - No hosts returned valid data."'
op|'%'
name|'k'
op|')'
newline|'\n'
dedent|''
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'                '
name|'print'
op|'('
string|'"[%s] - No hosts returned valid data."'
op|'%'
name|'k'
op|')'
newline|'\n'
dedent|''
dedent|''
name|'print'
op|'('
string|'"="'
op|'*'
number|'79'
op|')'
newline|'\n'
nl|'\n'
DECL|member|replication_check
dedent|''
name|'def'
name|'replication_check'
op|'('
name|'self'
op|','
name|'hosts'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""\n        Obtain and print replication statistics\n\n        :param hosts: set of hosts to check. in the format of:\n            set([(\'127.0.0.1\', 6020), (\'127.0.0.2\', 6030)])\n        """'
newline|'\n'
name|'stats'
op|'='
op|'{'
string|"'replication_time'"
op|':'
op|'['
op|']'
op|','
string|"'failure'"
op|':'
op|'['
op|']'
op|','
string|"'success'"
op|':'
op|'['
op|']'
op|','
nl|'\n'
string|"'attempted'"
op|':'
op|'['
op|']'
op|'}'
newline|'\n'
name|'recon'
op|'='
name|'Scout'
op|'('
string|'"replication/%s"'
op|'%'
name|'self'
op|'.'
name|'server_type'
op|','
name|'self'
op|'.'
name|'verbose'
op|','
nl|'\n'
name|'self'
op|'.'
name|'suppress_errors'
op|','
name|'self'
op|'.'
name|'timeout'
op|')'
newline|'\n'
name|'print'
op|'('
string|'"[%s] Checking on replication"'
op|'%'
name|'self'
op|'.'
name|'_ptime'
op|'('
op|')'
op|')'
newline|'\n'
name|'least_recent_time'
op|'='
number|'9999999999'
newline|'\n'
name|'least_recent_url'
op|'='
name|'None'
newline|'\n'
name|'most_recent_time'
op|'='
number|'0'
newline|'\n'
name|'most_recent_url'
op|'='
name|'None'
newline|'\n'
name|'for'
name|'url'
op|','
name|'response'
op|','
name|'status'
op|','
name|'ts_start'
op|','
name|'ts_end'
name|'in'
name|'self'
op|'.'
name|'pool'
op|'.'
name|'imap'
op|'('
nl|'\n'
name|'recon'
op|'.'
name|'scout'
op|','
name|'hosts'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'status'
op|'=='
number|'200'
op|':'
newline|'\n'
indent|'                '
name|'stats'
op|'['
string|"'replication_time'"
op|']'
op|'.'
name|'append'
op|'('
nl|'\n'
name|'response'
op|'.'
name|'get'
op|'('
string|"'replication_time'"
op|','
nl|'\n'
name|'response'
op|'.'
name|'get'
op|'('
string|"'object_replication_time'"
op|','
number|'0'
op|')'
op|')'
op|')'
newline|'\n'
name|'repl_stats'
op|'='
name|'response'
op|'.'
name|'get'
op|'('
string|"'replication_stats'"
op|')'
newline|'\n'
name|'if'
name|'repl_stats'
op|':'
newline|'\n'
indent|'                    '
name|'for'
name|'stat_key'
name|'in'
op|'['
string|"'attempted'"
op|','
string|"'failure'"
op|','
string|"'success'"
op|']'
op|':'
newline|'\n'
indent|'                        '
name|'stats'
op|'['
name|'stat_key'
op|']'
op|'.'
name|'append'
op|'('
name|'repl_stats'
op|'.'
name|'get'
op|'('
name|'stat_key'
op|')'
op|')'
newline|'\n'
dedent|''
dedent|''
name|'last'
op|'='
name|'response'
op|'.'
name|'get'
op|'('
string|"'replication_last'"
op|','
nl|'\n'
name|'response'
op|'.'
name|'get'
op|'('
string|"'object_replication_last'"
op|','
number|'0'
op|')'
op|')'
newline|'\n'
name|'if'
name|'last'
op|'<'
name|'least_recent_time'
op|':'
newline|'\n'
indent|'                    '
name|'least_recent_time'
op|'='
name|'last'
newline|'\n'
name|'least_recent_url'
op|'='
name|'url'
newline|'\n'
dedent|''
name|'if'
name|'last'
op|'>'
name|'most_recent_time'
op|':'
newline|'\n'
indent|'                    '
name|'most_recent_time'
op|'='
name|'last'
newline|'\n'
name|'most_recent_url'
op|'='
name|'url'
newline|'\n'
dedent|''
dedent|''
dedent|''
name|'for'
name|'k'
name|'in'
name|'stats'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'stats'
op|'['
name|'k'
op|']'
op|':'
newline|'\n'
indent|'                '
name|'if'
name|'k'
op|'!='
string|"'replication_time'"
op|':'
newline|'\n'
indent|'                    '
name|'computed'
op|'='
name|'self'
op|'.'
name|'_gen_stats'
op|'('
name|'stats'
op|'['
name|'k'
op|']'
op|','
nl|'\n'
name|'name'
op|'='
string|"'replication_%s'"
op|'%'
name|'k'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'                    '
name|'computed'
op|'='
name|'self'
op|'.'
name|'_gen_stats'
op|'('
name|'stats'
op|'['
name|'k'
op|']'
op|','
name|'name'
op|'='
name|'k'
op|')'
newline|'\n'
dedent|''
name|'if'
name|'computed'
op|'['
string|"'reported'"
op|']'
op|'>'
number|'0'
op|':'
newline|'\n'
indent|'                    '
name|'self'
op|'.'
name|'_print_stats'
op|'('
name|'computed'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'                    '
name|'print'
op|'('
string|'"[%s] - No hosts returned valid data."'
op|'%'
name|'k'
op|')'
newline|'\n'
dedent|''
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'                '
name|'print'
op|'('
string|'"[%s] - No hosts returned valid data."'
op|'%'
name|'k'
op|')'
newline|'\n'
dedent|''
dedent|''
name|'if'
name|'least_recent_url'
name|'is'
name|'not'
name|'None'
op|':'
newline|'\n'
indent|'            '
name|'host'
op|'='
name|'urlparse'
op|'('
name|'least_recent_url'
op|')'
op|'.'
name|'netloc'
newline|'\n'
name|'if'
name|'not'
name|'least_recent_time'
op|':'
newline|'\n'
indent|'                '
name|'print'
op|'('
string|"'Oldest completion was NEVER by %s.'"
op|'%'
name|'host'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'                '
name|'elapsed'
op|'='
name|'time'
op|'.'
name|'time'
op|'('
op|')'
op|'-'
name|'least_recent_time'
newline|'\n'
name|'elapsed'
op|','
name|'elapsed_unit'
op|'='
name|'seconds2timeunit'
op|'('
name|'elapsed'
op|')'
newline|'\n'
name|'print'
op|'('
string|"'Oldest completion was %s (%d %s ago) by %s.'"
op|'%'
op|'('
nl|'\n'
name|'self'
op|'.'
name|'_ptime'
op|'('
name|'least_recent_time'
op|')'
op|','
nl|'\n'
name|'elapsed'
op|','
name|'elapsed_unit'
op|','
name|'host'
op|')'
op|')'
newline|'\n'
dedent|''
dedent|''
name|'if'
name|'most_recent_url'
name|'is'
name|'not'
name|'None'
op|':'
newline|'\n'
indent|'            '
name|'host'
op|'='
name|'urlparse'
op|'('
name|'most_recent_url'
op|')'
op|'.'
name|'netloc'
newline|'\n'
name|'elapsed'
op|'='
name|'time'
op|'.'
name|'time'
op|'('
op|')'
op|'-'
name|'most_recent_time'
newline|'\n'
name|'elapsed'
op|','
name|'elapsed_unit'
op|'='
name|'seconds2timeunit'
op|'('
name|'elapsed'
op|')'
newline|'\n'
name|'print'
op|'('
string|"'Most recent completion was %s (%d %s ago) by %s.'"
op|'%'
op|'('
nl|'\n'
name|'self'
op|'.'
name|'_ptime'
op|'('
name|'most_recent_time'
op|')'
op|','
nl|'\n'
name|'elapsed'
op|','
name|'elapsed_unit'
op|','
name|'host'
op|')'
op|')'
newline|'\n'
dedent|''
name|'print'
op|'('
string|'"="'
op|'*'
number|'79'
op|')'
newline|'\n'
nl|'\n'
DECL|member|updater_check
dedent|''
name|'def'
name|'updater_check'
op|'('
name|'self'
op|','
name|'hosts'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""\n        Obtain and print updater statistics\n\n        :param hosts: set of hosts to check. in the format of:\n            set([(\'127.0.0.1\', 6020), (\'127.0.0.2\', 6030)])\n        """'
newline|'\n'
name|'stats'
op|'='
op|'['
op|']'
newline|'\n'
name|'recon'
op|'='
name|'Scout'
op|'('
string|'"updater/%s"'
op|'%'
name|'self'
op|'.'
name|'server_type'
op|','
name|'self'
op|'.'
name|'verbose'
op|','
nl|'\n'
name|'self'
op|'.'
name|'suppress_errors'
op|','
name|'self'
op|'.'
name|'timeout'
op|')'
newline|'\n'
name|'print'
op|'('
string|'"[%s] Checking updater times"'
op|'%'
name|'self'
op|'.'
name|'_ptime'
op|'('
op|')'
op|')'
newline|'\n'
name|'for'
name|'url'
op|','
name|'response'
op|','
name|'status'
op|','
name|'ts_start'
op|','
name|'ts_end'
name|'in'
name|'self'
op|'.'
name|'pool'
op|'.'
name|'imap'
op|'('
nl|'\n'
name|'recon'
op|'.'
name|'scout'
op|','
name|'hosts'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'status'
op|'=='
number|'200'
op|':'
newline|'\n'
indent|'                '
name|'if'
name|'response'
op|'['
string|"'%s_updater_sweep'"
op|'%'
name|'self'
op|'.'
name|'server_type'
op|']'
op|':'
newline|'\n'
indent|'                    '
name|'stats'
op|'.'
name|'append'
op|'('
name|'response'
op|'['
string|"'%s_updater_sweep'"
op|'%'
nl|'\n'
name|'self'
op|'.'
name|'server_type'
op|']'
op|')'
newline|'\n'
dedent|''
dedent|''
dedent|''
name|'if'
name|'len'
op|'('
name|'stats'
op|')'
op|'>'
number|'0'
op|':'
newline|'\n'
indent|'            '
name|'computed'
op|'='
name|'self'
op|'.'
name|'_gen_stats'
op|'('
name|'stats'
op|','
name|'name'
op|'='
string|"'updater_last_sweep'"
op|')'
newline|'\n'
name|'if'
name|'computed'
op|'['
string|"'reported'"
op|']'
op|'>'
number|'0'
op|':'
newline|'\n'
indent|'                '
name|'self'
op|'.'
name|'_print_stats'
op|'('
name|'computed'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'                '
name|'print'
op|'('
string|'"[updater_last_sweep] - No hosts returned valid data."'
op|')'
newline|'\n'
dedent|''
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'print'
op|'('
string|'"[updater_last_sweep] - No hosts returned valid data."'
op|')'
newline|'\n'
dedent|''
name|'print'
op|'('
string|'"="'
op|'*'
number|'79'
op|')'
newline|'\n'
nl|'\n'
DECL|member|auditor_check
dedent|''
name|'def'
name|'auditor_check'
op|'('
name|'self'
op|','
name|'hosts'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""\n        Obtain and print obj auditor statistics\n\n        :param hosts: set of hosts to check. in the format of:\n            set([(\'127.0.0.1\', 6020), (\'127.0.0.2\', 6030)])\n        """'
newline|'\n'
name|'scan'
op|'='
op|'{'
op|'}'
newline|'\n'
name|'adone'
op|'='
string|"'%s_auditor_pass_completed'"
op|'%'
name|'self'
op|'.'
name|'server_type'
newline|'\n'
name|'afail'
op|'='
string|"'%s_audits_failed'"
op|'%'
name|'self'
op|'.'
name|'server_type'
newline|'\n'
name|'apass'
op|'='
string|"'%s_audits_passed'"
op|'%'
name|'self'
op|'.'
name|'server_type'
newline|'\n'
name|'asince'
op|'='
string|"'%s_audits_since'"
op|'%'
name|'self'
op|'.'
name|'server_type'
newline|'\n'
name|'recon'
op|'='
name|'Scout'
op|'('
string|'"auditor/%s"'
op|'%'
name|'self'
op|'.'
name|'server_type'
op|','
name|'self'
op|'.'
name|'verbose'
op|','
nl|'\n'
name|'self'
op|'.'
name|'suppress_errors'
op|','
name|'self'
op|'.'
name|'timeout'
op|')'
newline|'\n'
name|'print'
op|'('
string|'"[%s] Checking auditor stats"'
op|'%'
name|'self'
op|'.'
name|'_ptime'
op|'('
op|')'
op|')'
newline|'\n'
name|'for'
name|'url'
op|','
name|'response'
op|','
name|'status'
op|','
name|'ts_start'
op|','
name|'ts_end'
name|'in'
name|'self'
op|'.'
name|'pool'
op|'.'
name|'imap'
op|'('
nl|'\n'
name|'recon'
op|'.'
name|'scout'
op|','
name|'hosts'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'status'
op|'=='
number|'200'
op|':'
newline|'\n'
indent|'                '
name|'scan'
op|'['
name|'url'
op|']'
op|'='
name|'response'
newline|'\n'
dedent|''
dedent|''
name|'if'
name|'len'
op|'('
name|'scan'
op|')'
op|'<'
number|'1'
op|':'
newline|'\n'
indent|'            '
name|'print'
op|'('
string|'"Error: No hosts available"'
op|')'
newline|'\n'
name|'return'
newline|'\n'
dedent|''
name|'stats'
op|'='
op|'{'
op|'}'
newline|'\n'
name|'stats'
op|'['
name|'adone'
op|']'
op|'='
op|'['
name|'scan'
op|'['
name|'i'
op|']'
op|'['
name|'adone'
op|']'
name|'for'
name|'i'
name|'in'
name|'scan'
nl|'\n'
name|'if'
name|'scan'
op|'['
name|'i'
op|']'
op|'['
name|'adone'
op|']'
name|'is'
name|'not'
name|'None'
op|']'
newline|'\n'
name|'stats'
op|'['
name|'afail'
op|']'
op|'='
op|'['
name|'scan'
op|'['
name|'i'
op|']'
op|'['
name|'afail'
op|']'
name|'for'
name|'i'
name|'in'
name|'scan'
nl|'\n'
name|'if'
name|'scan'
op|'['
name|'i'
op|']'
op|'['
name|'afail'
op|']'
name|'is'
name|'not'
name|'None'
op|']'
newline|'\n'
name|'stats'
op|'['
name|'apass'
op|']'
op|'='
op|'['
name|'scan'
op|'['
name|'i'
op|']'
op|'['
name|'apass'
op|']'
name|'for'
name|'i'
name|'in'
name|'scan'
nl|'\n'
name|'if'
name|'scan'
op|'['
name|'i'
op|']'
op|'['
name|'apass'
op|']'
name|'is'
name|'not'
name|'None'
op|']'
newline|'\n'
name|'stats'
op|'['
name|'asince'
op|']'
op|'='
op|'['
name|'scan'
op|'['
name|'i'
op|']'
op|'['
name|'asince'
op|']'
name|'for'
name|'i'
name|'in'
name|'scan'
nl|'\n'
name|'if'
name|'scan'
op|'['
name|'i'
op|']'
op|'['
name|'asince'
op|']'
name|'is'
name|'not'
name|'None'
op|']'
newline|'\n'
name|'for'
name|'k'
name|'in'
name|'stats'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'len'
op|'('
name|'stats'
op|'['
name|'k'
op|']'
op|')'
op|'<'
number|'1'
op|':'
newline|'\n'
indent|'                '
name|'print'
op|'('
string|'"[%s] - No hosts returned valid data."'
op|'%'
name|'k'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'                '
name|'if'
name|'k'
op|'!='
name|'asince'
op|':'
newline|'\n'
indent|'                    '
name|'computed'
op|'='
name|'self'
op|'.'
name|'_gen_stats'
op|'('
name|'stats'
op|'['
name|'k'
op|']'
op|','
name|'k'
op|')'
newline|'\n'
name|'if'
name|'computed'
op|'['
string|"'reported'"
op|']'
op|'>'
number|'0'
op|':'
newline|'\n'
indent|'                        '
name|'self'
op|'.'
name|'_print_stats'
op|'('
name|'computed'
op|')'
newline|'\n'
dedent|''
dedent|''
dedent|''
dedent|''
name|'if'
name|'len'
op|'('
name|'stats'
op|'['
name|'asince'
op|']'
op|')'
op|'>='
number|'1'
op|':'
newline|'\n'
indent|'            '
name|'low'
op|'='
name|'min'
op|'('
name|'stats'
op|'['
name|'asince'
op|']'
op|')'
newline|'\n'
name|'high'
op|'='
name|'max'
op|'('
name|'stats'
op|'['
name|'asince'
op|']'
op|')'
newline|'\n'
name|'total'
op|'='
name|'sum'
op|'('
name|'stats'
op|'['
name|'asince'
op|']'
op|')'
newline|'\n'
name|'average'
op|'='
name|'total'
op|'/'
name|'len'
op|'('
name|'stats'
op|'['
name|'asince'
op|']'
op|')'
newline|'\n'
name|'print'
op|'('
string|"'[last_pass] oldest: %s, newest: %s, avg: %s'"
op|'%'
nl|'\n'
op|'('
name|'self'
op|'.'
name|'_ptime'
op|'('
name|'low'
op|')'
op|','
name|'self'
op|'.'
name|'_ptime'
op|'('
name|'high'
op|')'
op|','
name|'self'
op|'.'
name|'_ptime'
op|'('
name|'average'
op|')'
op|')'
op|')'
newline|'\n'
dedent|''
name|'print'
op|'('
string|'"="'
op|'*'
number|'79'
op|')'
newline|'\n'
nl|'\n'
DECL|member|nested_get_value
dedent|''
name|'def'
name|'nested_get_value'
op|'('
name|'self'
op|','
name|'key'
op|','
name|'recon_entry'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""\n        Generator that yields all values for given key in a recon cache entry.\n        This is for use with object auditor recon cache entries.  If the\n        object auditor has run in parallel, the recon cache will have entries\n        of the form:  {\'object_auditor_stats_ALL\': { \'disk1\': {..},\n                                                     \'disk2\': {..},\n                                                     \'disk3\': {..},\n                                                   ...}}\n        If the object auditor hasn\'t run in parallel, the recon cache will have\n        entries of the form:  {\'object_auditor_stats_ALL\': {...}}.\n        The ZBF auditor doesn\'t run in parallel.  However, if a subset of\n        devices is selected for auditing, the recon cache will have an entry\n        of the form:  {\'object_auditor_stats_ZBF\': { \'disk1disk2..diskN\': {}}\n        We use this generator to find all instances of a particular key in\n        these multi-level dictionaries.\n        """'
newline|'\n'
name|'for'
name|'k'
op|','
name|'v'
name|'in'
name|'recon_entry'
op|'.'
name|'items'
op|'('
op|')'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'isinstance'
op|'('
name|'v'
op|','
name|'dict'
op|')'
op|':'
newline|'\n'
indent|'                '
name|'for'
name|'value'
name|'in'
name|'self'
op|'.'
name|'nested_get_value'
op|'('
name|'key'
op|','
name|'v'
op|')'
op|':'
newline|'\n'
indent|'                    '
name|'yield'
name|'value'
newline|'\n'
dedent|''
dedent|''
name|'if'
name|'k'
op|'=='
name|'key'
op|':'
newline|'\n'
indent|'                '
name|'yield'
name|'v'
newline|'\n'
nl|'\n'
DECL|member|object_auditor_check
dedent|''
dedent|''
dedent|''
name|'def'
name|'object_auditor_check'
op|'('
name|'self'
op|','
name|'hosts'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""\n        Obtain and print obj auditor statistics\n\n        :param hosts: set of hosts to check. in the format of:\n            set([(\'127.0.0.1\', 6020), (\'127.0.0.2\', 6030)])\n        """'
newline|'\n'
name|'all_scan'
op|'='
op|'{'
op|'}'
newline|'\n'
name|'zbf_scan'
op|'='
op|'{'
op|'}'
newline|'\n'
name|'atime'
op|'='
string|"'audit_time'"
newline|'\n'
name|'bprocessed'
op|'='
string|"'bytes_processed'"
newline|'\n'
name|'passes'
op|'='
string|"'passes'"
newline|'\n'
name|'errors'
op|'='
string|"'errors'"
newline|'\n'
name|'quarantined'
op|'='
string|"'quarantined'"
newline|'\n'
name|'recon'
op|'='
name|'Scout'
op|'('
string|'"auditor/object"'
op|','
name|'self'
op|'.'
name|'verbose'
op|','
name|'self'
op|'.'
name|'suppress_errors'
op|','
nl|'\n'
name|'self'
op|'.'
name|'timeout'
op|')'
newline|'\n'
name|'print'
op|'('
string|'"[%s] Checking auditor stats "'
op|'%'
name|'self'
op|'.'
name|'_ptime'
op|'('
op|')'
op|')'
newline|'\n'
name|'for'
name|'url'
op|','
name|'response'
op|','
name|'status'
op|','
name|'ts_start'
op|','
name|'ts_end'
name|'in'
name|'self'
op|'.'
name|'pool'
op|'.'
name|'imap'
op|'('
nl|'\n'
name|'recon'
op|'.'
name|'scout'
op|','
name|'hosts'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'status'
op|'=='
number|'200'
op|':'
newline|'\n'
indent|'                '
name|'if'
name|'response'
op|'['
string|"'object_auditor_stats_ALL'"
op|']'
op|':'
newline|'\n'
indent|'                    '
name|'all_scan'
op|'['
name|'url'
op|']'
op|'='
name|'response'
op|'['
string|"'object_auditor_stats_ALL'"
op|']'
newline|'\n'
dedent|''
name|'if'
name|'response'
op|'['
string|"'object_auditor_stats_ZBF'"
op|']'
op|':'
newline|'\n'
indent|'                    '
name|'zbf_scan'
op|'['
name|'url'
op|']'
op|'='
name|'response'
op|'['
string|"'object_auditor_stats_ZBF'"
op|']'
newline|'\n'
dedent|''
dedent|''
dedent|''
name|'if'
name|'len'
op|'('
name|'all_scan'
op|')'
op|'>'
number|'0'
op|':'
newline|'\n'
indent|'            '
name|'stats'
op|'='
op|'{'
op|'}'
newline|'\n'
name|'stats'
op|'['
name|'atime'
op|']'
op|'='
op|'['
name|'sum'
op|'('
name|'self'
op|'.'
name|'nested_get_value'
op|'('
name|'atime'
op|','
name|'all_scan'
op|'['
name|'i'
op|']'
op|')'
op|')'
nl|'\n'
name|'for'
name|'i'
name|'in'
name|'all_scan'
op|']'
newline|'\n'
name|'stats'
op|'['
name|'bprocessed'
op|']'
op|'='
op|'['
name|'sum'
op|'('
name|'self'
op|'.'
name|'nested_get_value'
op|'('
name|'bprocessed'
op|','
nl|'\n'
name|'all_scan'
op|'['
name|'i'
op|']'
op|')'
op|')'
name|'for'
name|'i'
name|'in'
name|'all_scan'
op|']'
newline|'\n'
name|'stats'
op|'['
name|'passes'
op|']'
op|'='
op|'['
name|'sum'
op|'('
name|'self'
op|'.'
name|'nested_get_value'
op|'('
name|'passes'
op|','
name|'all_scan'
op|'['
name|'i'
op|']'
op|')'
op|')'
nl|'\n'
name|'for'
name|'i'
name|'in'
name|'all_scan'
op|']'
newline|'\n'
name|'stats'
op|'['
name|'errors'
op|']'
op|'='
op|'['
name|'sum'
op|'('
name|'self'
op|'.'
name|'nested_get_value'
op|'('
name|'errors'
op|','
name|'all_scan'
op|'['
name|'i'
op|']'
op|')'
op|')'
nl|'\n'
name|'for'
name|'i'
name|'in'
name|'all_scan'
op|']'
newline|'\n'
name|'stats'
op|'['
name|'quarantined'
op|']'
op|'='
op|'['
name|'sum'
op|'('
name|'self'
op|'.'
name|'nested_get_value'
op|'('
name|'quarantined'
op|','
nl|'\n'
name|'all_scan'
op|'['
name|'i'
op|']'
op|')'
op|')'
name|'for'
name|'i'
name|'in'
name|'all_scan'
op|']'
newline|'\n'
name|'for'
name|'k'
name|'in'
name|'stats'
op|':'
newline|'\n'
indent|'                '
name|'if'
name|'None'
name|'in'
name|'stats'
op|'['
name|'k'
op|']'
op|':'
newline|'\n'
indent|'                    '
name|'stats'
op|'['
name|'k'
op|']'
op|'='
op|'['
name|'x'
name|'for'
name|'x'
name|'in'
name|'stats'
op|'['
name|'k'
op|']'
name|'if'
name|'x'
name|'is'
name|'not'
name|'None'
op|']'
newline|'\n'
dedent|''
name|'if'
name|'len'
op|'('
name|'stats'
op|'['
name|'k'
op|']'
op|')'
op|'<'
number|'1'
op|':'
newline|'\n'
indent|'                    '
name|'print'
op|'('
string|'"[Auditor %s] - No hosts returned valid data."'
op|'%'
name|'k'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'                    '
name|'computed'
op|'='
name|'self'
op|'.'
name|'_gen_stats'
op|'('
name|'stats'
op|'['
name|'k'
op|']'
op|','
nl|'\n'
name|'name'
op|'='
string|"'ALL_%s_last_path'"
op|'%'
name|'k'
op|')'
newline|'\n'
name|'if'
name|'computed'
op|'['
string|"'reported'"
op|']'
op|'>'
number|'0'
op|':'
newline|'\n'
indent|'                        '
name|'self'
op|'.'
name|'_print_stats'
op|'('
name|'computed'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'                        '
name|'print'
op|'('
string|'"[ALL_auditor] - No hosts returned valid data."'
op|')'
newline|'\n'
dedent|''
dedent|''
dedent|''
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'print'
op|'('
string|'"[ALL_auditor] - No hosts returned valid data."'
op|')'
newline|'\n'
dedent|''
name|'if'
name|'len'
op|'('
name|'zbf_scan'
op|')'
op|'>'
number|'0'
op|':'
newline|'\n'
indent|'            '
name|'stats'
op|'='
op|'{'
op|'}'
newline|'\n'
name|'stats'
op|'['
name|'atime'
op|']'
op|'='
op|'['
name|'sum'
op|'('
name|'self'
op|'.'
name|'nested_get_value'
op|'('
name|'atime'
op|','
name|'zbf_scan'
op|'['
name|'i'
op|']'
op|')'
op|')'
nl|'\n'
name|'for'
name|'i'
name|'in'
name|'zbf_scan'
op|']'
newline|'\n'
name|'stats'
op|'['
name|'bprocessed'
op|']'
op|'='
op|'['
name|'sum'
op|'('
name|'self'
op|'.'
name|'nested_get_value'
op|'('
name|'bprocessed'
op|','
nl|'\n'
name|'zbf_scan'
op|'['
name|'i'
op|']'
op|')'
op|')'
name|'for'
name|'i'
name|'in'
name|'zbf_scan'
op|']'
newline|'\n'
name|'stats'
op|'['
name|'errors'
op|']'
op|'='
op|'['
name|'sum'
op|'('
name|'self'
op|'.'
name|'nested_get_value'
op|'('
name|'errors'
op|','
name|'zbf_scan'
op|'['
name|'i'
op|']'
op|')'
op|')'
nl|'\n'
name|'for'
name|'i'
name|'in'
name|'zbf_scan'
op|']'
newline|'\n'
name|'stats'
op|'['
name|'quarantined'
op|']'
op|'='
op|'['
name|'sum'
op|'('
name|'self'
op|'.'
name|'nested_get_value'
op|'('
name|'quarantined'
op|','
nl|'\n'
name|'zbf_scan'
op|'['
name|'i'
op|']'
op|')'
op|')'
name|'for'
name|'i'
name|'in'
name|'zbf_scan'
op|']'
newline|'\n'
name|'for'
name|'k'
name|'in'
name|'stats'
op|':'
newline|'\n'
indent|'                '
name|'if'
name|'None'
name|'in'
name|'stats'
op|'['
name|'k'
op|']'
op|':'
newline|'\n'
indent|'                    '
name|'stats'
op|'['
name|'k'
op|']'
op|'='
op|'['
name|'x'
name|'for'
name|'x'
name|'in'
name|'stats'
op|'['
name|'k'
op|']'
name|'if'
name|'x'
name|'is'
name|'not'
name|'None'
op|']'
newline|'\n'
dedent|''
name|'if'
name|'len'
op|'('
name|'stats'
op|'['
name|'k'
op|']'
op|')'
op|'<'
number|'1'
op|':'
newline|'\n'
indent|'                    '
name|'print'
op|'('
string|'"[Auditor %s] - No hosts returned valid data."'
op|'%'
name|'k'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'                    '
name|'computed'
op|'='
name|'self'
op|'.'
name|'_gen_stats'
op|'('
name|'stats'
op|'['
name|'k'
op|']'
op|','
nl|'\n'
name|'name'
op|'='
string|"'ZBF_%s_last_path'"
op|'%'
name|'k'
op|')'
newline|'\n'
name|'if'
name|'computed'
op|'['
string|"'reported'"
op|']'
op|'>'
number|'0'
op|':'
newline|'\n'
indent|'                        '
name|'self'
op|'.'
name|'_print_stats'
op|'('
name|'computed'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'                        '
name|'print'
op|'('
string|'"[ZBF_auditor] - No hosts returned valid data."'
op|')'
newline|'\n'
dedent|''
dedent|''
dedent|''
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'print'
op|'('
string|'"[ZBF_auditor] - No hosts returned valid data."'
op|')'
newline|'\n'
dedent|''
name|'print'
op|'('
string|'"="'
op|'*'
number|'79'
op|')'
newline|'\n'
nl|'\n'
DECL|member|load_check
dedent|''
name|'def'
name|'load_check'
op|'('
name|'self'
op|','
name|'hosts'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""\n        Obtain and print load average statistics\n\n        :param hosts: set of hosts to check. in the format of:\n            set([(\'127.0.0.1\', 6020), (\'127.0.0.2\', 6030)])\n        """'
newline|'\n'
name|'load1'
op|'='
op|'{'
op|'}'
newline|'\n'
name|'load5'
op|'='
op|'{'
op|'}'
newline|'\n'
name|'load15'
op|'='
op|'{'
op|'}'
newline|'\n'
name|'recon'
op|'='
name|'Scout'
op|'('
string|'"load"'
op|','
name|'self'
op|'.'
name|'verbose'
op|','
name|'self'
op|'.'
name|'suppress_errors'
op|','
nl|'\n'
name|'self'
op|'.'
name|'timeout'
op|')'
newline|'\n'
name|'print'
op|'('
string|'"[%s] Checking load averages"'
op|'%'
name|'self'
op|'.'
name|'_ptime'
op|'('
op|')'
op|')'
newline|'\n'
name|'for'
name|'url'
op|','
name|'response'
op|','
name|'status'
op|','
name|'ts_start'
op|','
name|'ts_end'
name|'in'
name|'self'
op|'.'
name|'pool'
op|'.'
name|'imap'
op|'('
nl|'\n'
name|'recon'
op|'.'
name|'scout'
op|','
name|'hosts'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'status'
op|'=='
number|'200'
op|':'
newline|'\n'
indent|'                '
name|'load1'
op|'['
name|'url'
op|']'
op|'='
name|'response'
op|'['
string|"'1m'"
op|']'
newline|'\n'
name|'load5'
op|'['
name|'url'
op|']'
op|'='
name|'response'
op|'['
string|"'5m'"
op|']'
newline|'\n'
name|'load15'
op|'['
name|'url'
op|']'
op|'='
name|'response'
op|'['
string|"'15m'"
op|']'
newline|'\n'
dedent|''
dedent|''
name|'stats'
op|'='
op|'{'
string|'"1m"'
op|':'
name|'load1'
op|','
string|'"5m"'
op|':'
name|'load5'
op|','
string|'"15m"'
op|':'
name|'load15'
op|'}'
newline|'\n'
name|'for'
name|'item'
name|'in'
name|'stats'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'len'
op|'('
name|'stats'
op|'['
name|'item'
op|']'
op|')'
op|'>'
number|'0'
op|':'
newline|'\n'
indent|'                '
name|'computed'
op|'='
name|'self'
op|'.'
name|'_gen_stats'
op|'('
name|'stats'
op|'['
name|'item'
op|']'
op|'.'
name|'values'
op|'('
op|')'
op|','
nl|'\n'
name|'name'
op|'='
string|"'%s_load_avg'"
op|'%'
name|'item'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_print_stats'
op|'('
name|'computed'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'                '
name|'print'
op|'('
string|'"[%s_load_avg] - No hosts returned valid data."'
op|'%'
name|'item'
op|')'
newline|'\n'
dedent|''
dedent|''
name|'print'
op|'('
string|'"="'
op|'*'
number|'79'
op|')'
newline|'\n'
nl|'\n'
DECL|member|quarantine_check
dedent|''
name|'def'
name|'quarantine_check'
op|'('
name|'self'
op|','
name|'hosts'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""\n        Obtain and print quarantine statistics\n\n        :param hosts: set of hosts to check. in the format of:\n            set([(\'127.0.0.1\', 6020), (\'127.0.0.2\', 6030)])\n        """'
newline|'\n'
name|'objq'
op|'='
op|'{'
op|'}'
newline|'\n'
name|'conq'
op|'='
op|'{'
op|'}'
newline|'\n'
name|'acctq'
op|'='
op|'{'
op|'}'
newline|'\n'
name|'stats'
op|'='
op|'{'
op|'}'
newline|'\n'
name|'recon'
op|'='
name|'Scout'
op|'('
string|'"quarantined"'
op|','
name|'self'
op|'.'
name|'verbose'
op|','
name|'self'
op|'.'
name|'suppress_errors'
op|','
nl|'\n'
name|'self'
op|'.'
name|'timeout'
op|')'
newline|'\n'
name|'print'
op|'('
string|'"[%s] Checking quarantine"'
op|'%'
name|'self'
op|'.'
name|'_ptime'
op|'('
op|')'
op|')'
newline|'\n'
name|'for'
name|'url'
op|','
name|'response'
op|','
name|'status'
op|','
name|'ts_start'
op|','
name|'ts_end'
name|'in'
name|'self'
op|'.'
name|'pool'
op|'.'
name|'imap'
op|'('
nl|'\n'
name|'recon'
op|'.'
name|'scout'
op|','
name|'hosts'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'status'
op|'=='
number|'200'
op|':'
newline|'\n'
indent|'                '
name|'objq'
op|'['
name|'url'
op|']'
op|'='
name|'response'
op|'['
string|"'objects'"
op|']'
newline|'\n'
name|'conq'
op|'['
name|'url'
op|']'
op|'='
name|'response'
op|'['
string|"'containers'"
op|']'
newline|'\n'
name|'acctq'
op|'['
name|'url'
op|']'
op|'='
name|'response'
op|'['
string|"'accounts'"
op|']'
newline|'\n'
name|'for'
name|'key'
name|'in'
name|'response'
op|'.'
name|'get'
op|'('
string|"'policies'"
op|','
op|'{'
op|'}'
op|')'
op|':'
newline|'\n'
indent|'                    '
name|'pkey'
op|'='
string|'"objects_%s"'
op|'%'
name|'key'
newline|'\n'
name|'stats'
op|'.'
name|'setdefault'
op|'('
name|'pkey'
op|','
op|'{'
op|'}'
op|')'
newline|'\n'
name|'stats'
op|'['
name|'pkey'
op|']'
op|'['
name|'url'
op|']'
op|'='
name|'response'
op|'['
string|"'policies'"
op|']'
op|'['
name|'key'
op|']'
op|'['
string|"'objects'"
op|']'
newline|'\n'
dedent|''
dedent|''
dedent|''
name|'stats'
op|'.'
name|'update'
op|'('
op|'{'
string|'"objects"'
op|':'
name|'objq'
op|','
string|'"containers"'
op|':'
name|'conq'
op|','
string|'"accounts"'
op|':'
name|'acctq'
op|'}'
op|')'
newline|'\n'
name|'for'
name|'item'
name|'in'
name|'stats'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'len'
op|'('
name|'stats'
op|'['
name|'item'
op|']'
op|')'
op|'>'
number|'0'
op|':'
newline|'\n'
indent|'                '
name|'computed'
op|'='
name|'self'
op|'.'
name|'_gen_stats'
op|'('
name|'stats'
op|'['
name|'item'
op|']'
op|'.'
name|'values'
op|'('
op|')'
op|','
nl|'\n'
name|'name'
op|'='
string|"'quarantined_%s'"
op|'%'
name|'item'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_print_stats'
op|'('
name|'computed'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'                '
name|'print'
op|'('
string|'"No hosts returned valid data."'
op|')'
newline|'\n'
dedent|''
dedent|''
name|'print'
op|'('
string|'"="'
op|'*'
number|'79'
op|')'
newline|'\n'
nl|'\n'
DECL|member|socket_usage
dedent|''
name|'def'
name|'socket_usage'
op|'('
name|'self'
op|','
name|'hosts'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""\n        Obtain and print /proc/net/sockstat statistics\n\n        :param hosts: set of hosts to check. in the format of:\n            set([(\'127.0.0.1\', 6020), (\'127.0.0.2\', 6030)])\n        """'
newline|'\n'
name|'inuse4'
op|'='
op|'{'
op|'}'
newline|'\n'
name|'mem'
op|'='
op|'{'
op|'}'
newline|'\n'
name|'inuse6'
op|'='
op|'{'
op|'}'
newline|'\n'
name|'timewait'
op|'='
op|'{'
op|'}'
newline|'\n'
name|'orphan'
op|'='
op|'{'
op|'}'
newline|'\n'
name|'recon'
op|'='
name|'Scout'
op|'('
string|'"sockstat"'
op|','
name|'self'
op|'.'
name|'verbose'
op|','
name|'self'
op|'.'
name|'suppress_errors'
op|','
nl|'\n'
name|'self'
op|'.'
name|'timeout'
op|')'
newline|'\n'
name|'print'
op|'('
string|'"[%s] Checking socket usage"'
op|'%'
name|'self'
op|'.'
name|'_ptime'
op|'('
op|')'
op|')'
newline|'\n'
name|'for'
name|'url'
op|','
name|'response'
op|','
name|'status'
op|','
name|'ts_start'
op|','
name|'ts_end'
name|'in'
name|'self'
op|'.'
name|'pool'
op|'.'
name|'imap'
op|'('
nl|'\n'
name|'recon'
op|'.'
name|'scout'
op|','
name|'hosts'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'status'
op|'=='
number|'200'
op|':'
newline|'\n'
indent|'                '
name|'inuse4'
op|'['
name|'url'
op|']'
op|'='
name|'response'
op|'['
string|"'tcp_in_use'"
op|']'
newline|'\n'
name|'mem'
op|'['
name|'url'
op|']'
op|'='
name|'response'
op|'['
string|"'tcp_mem_allocated_bytes'"
op|']'
newline|'\n'
name|'inuse6'
op|'['
name|'url'
op|']'
op|'='
name|'response'
op|'.'
name|'get'
op|'('
string|"'tcp6_in_use'"
op|','
number|'0'
op|')'
newline|'\n'
name|'timewait'
op|'['
name|'url'
op|']'
op|'='
name|'response'
op|'['
string|"'time_wait'"
op|']'
newline|'\n'
name|'orphan'
op|'['
name|'url'
op|']'
op|'='
name|'response'
op|'['
string|"'orphan'"
op|']'
newline|'\n'
dedent|''
dedent|''
name|'stats'
op|'='
op|'{'
string|'"tcp_in_use"'
op|':'
name|'inuse4'
op|','
string|'"tcp_mem_allocated_bytes"'
op|':'
name|'mem'
op|','
nl|'\n'
string|'"tcp6_in_use"'
op|':'
name|'inuse6'
op|','
string|'"time_wait"'
op|':'
name|'timewait'
op|','
nl|'\n'
string|'"orphan"'
op|':'
name|'orphan'
op|'}'
newline|'\n'
name|'for'
name|'item'
name|'in'
name|'stats'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'len'
op|'('
name|'stats'
op|'['
name|'item'
op|']'
op|')'
op|'>'
number|'0'
op|':'
newline|'\n'
indent|'                '
name|'computed'
op|'='
name|'self'
op|'.'
name|'_gen_stats'
op|'('
name|'stats'
op|'['
name|'item'
op|']'
op|'.'
name|'values'
op|'('
op|')'
op|','
name|'item'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_print_stats'
op|'('
name|'computed'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'                '
name|'print'
op|'('
string|'"No hosts returned valid data."'
op|')'
newline|'\n'
dedent|''
dedent|''
name|'print'
op|'('
string|'"="'
op|'*'
number|'79'
op|')'
newline|'\n'
nl|'\n'
DECL|member|disk_usage
dedent|''
name|'def'
name|'disk_usage'
op|'('
name|'self'
op|','
name|'hosts'
op|','
name|'top'
op|'='
number|'0'
op|','
name|'lowest'
op|'='
number|'0'
op|','
name|'human_readable'
op|'='
name|'False'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""\n        Obtain and print disk usage statistics\n\n        :param hosts: set of hosts to check. in the format of:\n            set([(\'127.0.0.1\', 6020), (\'127.0.0.2\', 6030)])\n        """'
newline|'\n'
name|'stats'
op|'='
op|'{'
op|'}'
newline|'\n'
name|'highs'
op|'='
op|'['
op|']'
newline|'\n'
name|'lows'
op|'='
op|'['
op|']'
newline|'\n'
name|'raw_total_used'
op|'='
op|'['
op|']'
newline|'\n'
name|'raw_total_avail'
op|'='
op|'['
op|']'
newline|'\n'
name|'percents'
op|'='
op|'{'
op|'}'
newline|'\n'
name|'top_percents'
op|'='
op|'['
op|'('
name|'None'
op|','
number|'0'
op|')'
op|']'
op|'*'
name|'top'
newline|'\n'
name|'low_percents'
op|'='
op|'['
op|'('
name|'None'
op|','
number|'100'
op|')'
op|']'
op|'*'
name|'lowest'
newline|'\n'
name|'recon'
op|'='
name|'Scout'
op|'('
string|'"diskusage"'
op|','
name|'self'
op|'.'
name|'verbose'
op|','
name|'self'
op|'.'
name|'suppress_errors'
op|','
nl|'\n'
name|'self'
op|'.'
name|'timeout'
op|')'
newline|'\n'
name|'print'
op|'('
string|'"[%s] Checking disk usage now"'
op|'%'
name|'self'
op|'.'
name|'_ptime'
op|'('
op|')'
op|')'
newline|'\n'
name|'for'
name|'url'
op|','
name|'response'
op|','
name|'status'
op|','
name|'ts_start'
op|','
name|'ts_end'
name|'in'
name|'self'
op|'.'
name|'pool'
op|'.'
name|'imap'
op|'('
nl|'\n'
name|'recon'
op|'.'
name|'scout'
op|','
name|'hosts'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'status'
op|'=='
number|'200'
op|':'
newline|'\n'
indent|'                '
name|'hostusage'
op|'='
op|'['
op|']'
newline|'\n'
name|'for'
name|'entry'
name|'in'
name|'response'
op|':'
newline|'\n'
indent|'                    '
name|'if'
name|'not'
name|'isinstance'
op|'('
name|'entry'
op|'['
string|"'mounted'"
op|']'
op|','
name|'bool'
op|')'
op|':'
newline|'\n'
indent|'                        '
name|'print'
op|'('
string|'"-> %s/%s: Error: %s"'
op|'%'
op|'('
name|'url'
op|','
name|'entry'
op|'['
string|"'device'"
op|']'
op|','
nl|'\n'
name|'entry'
op|'['
string|"'mounted'"
op|']'
op|')'
op|')'
newline|'\n'
dedent|''
name|'elif'
name|'entry'
op|'['
string|"'mounted'"
op|']'
op|':'
newline|'\n'
indent|'                        '
name|'used'
op|'='
name|'float'
op|'('
name|'entry'
op|'['
string|"'used'"
op|']'
op|')'
op|'/'
name|'float'
op|'('
name|'entry'
op|'['
string|"'size'"
op|']'
op|')'
op|'*'
number|'100.0'
newline|'\n'
name|'raw_total_used'
op|'.'
name|'append'
op|'('
name|'entry'
op|'['
string|"'used'"
op|']'
op|')'
newline|'\n'
name|'raw_total_avail'
op|'.'
name|'append'
op|'('
name|'entry'
op|'['
string|"'avail'"
op|']'
op|')'
newline|'\n'
name|'hostusage'
op|'.'
name|'append'
op|'('
name|'round'
op|'('
name|'used'
op|','
number|'2'
op|')'
op|')'
newline|'\n'
name|'for'
name|'ident'
op|','
name|'oused'
name|'in'
name|'top_percents'
op|':'
newline|'\n'
indent|'                            '
name|'if'
name|'oused'
op|'<'
name|'used'
op|':'
newline|'\n'
indent|'                                '
name|'top_percents'
op|'.'
name|'append'
op|'('
nl|'\n'
op|'('
name|'url'
op|'+'
string|"' '"
op|'+'
name|'entry'
op|'['
string|"'device'"
op|']'
op|','
name|'used'
op|')'
op|')'
newline|'\n'
name|'top_percents'
op|'.'
name|'sort'
op|'('
name|'key'
op|'='
name|'lambda'
name|'x'
op|':'
op|'-'
name|'x'
op|'['
number|'1'
op|']'
op|')'
newline|'\n'
name|'top_percents'
op|'.'
name|'pop'
op|'('
op|')'
newline|'\n'
name|'break'
newline|'\n'
dedent|''
dedent|''
name|'for'
name|'ident'
op|','
name|'oused'
name|'in'
name|'low_percents'
op|':'
newline|'\n'
indent|'                            '
name|'if'
name|'oused'
op|'>'
name|'used'
op|':'
newline|'\n'
indent|'                                '
name|'low_percents'
op|'.'
name|'append'
op|'('
nl|'\n'
op|'('
name|'url'
op|'+'
string|"' '"
op|'+'
name|'entry'
op|'['
string|"'device'"
op|']'
op|','
name|'used'
op|')'
op|')'
newline|'\n'
name|'low_percents'
op|'.'
name|'sort'
op|'('
name|'key'
op|'='
name|'lambda'
name|'x'
op|':'
name|'x'
op|'['
number|'1'
op|']'
op|')'
newline|'\n'
name|'low_percents'
op|'.'
name|'pop'
op|'('
op|')'
newline|'\n'
name|'break'
newline|'\n'
dedent|''
dedent|''
dedent|''
dedent|''
name|'stats'
op|'['
name|'url'
op|']'
op|'='
name|'hostusage'
newline|'\n'
nl|'\n'
dedent|''
dedent|''
name|'for'
name|'url'
name|'in'
name|'stats'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'len'
op|'('
name|'stats'
op|'['
name|'url'
op|']'
op|')'
op|'>'
number|'0'
op|':'
newline|'\n'
comment|'# get per host hi/los for another day'
nl|'\n'
indent|'                '
name|'low'
op|'='
name|'min'
op|'('
name|'stats'
op|'['
name|'url'
op|']'
op|')'
newline|'\n'
name|'high'
op|'='
name|'max'
op|'('
name|'stats'
op|'['
name|'url'
op|']'
op|')'
newline|'\n'
name|'highs'
op|'.'
name|'append'
op|'('
name|'high'
op|')'
newline|'\n'
name|'lows'
op|'.'
name|'append'
op|'('
name|'low'
op|')'
newline|'\n'
name|'for'
name|'percent'
name|'in'
name|'stats'
op|'['
name|'url'
op|']'
op|':'
newline|'\n'
indent|'                    '
name|'percents'
op|'['
name|'int'
op|'('
name|'percent'
op|')'
op|']'
op|'='
name|'percents'
op|'.'
name|'get'
op|'('
name|'int'
op|'('
name|'percent'
op|')'
op|','
number|'0'
op|')'
op|'+'
number|'1'
newline|'\n'
dedent|''
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'                '
name|'print'
op|'('
string|'"-> %s: Error. No drive info available."'
op|'%'
name|'url'
op|')'
newline|'\n'
nl|'\n'
dedent|''
dedent|''
name|'if'
name|'len'
op|'('
name|'lows'
op|')'
op|'>'
number|'0'
op|':'
newline|'\n'
indent|'            '
name|'low'
op|'='
name|'min'
op|'('
name|'lows'
op|')'
newline|'\n'
name|'high'
op|'='
name|'max'
op|'('
name|'highs'
op|')'
newline|'\n'
comment|'# dist graph shamelessly stolen from https://github.com/gholt/tcod'
nl|'\n'
name|'print'
op|'('
string|'"Distribution Graph:"'
op|')'
newline|'\n'
name|'mul'
op|'='
number|'69.0'
op|'/'
name|'max'
op|'('
name|'percents'
op|'.'
name|'values'
op|'('
op|')'
op|')'
newline|'\n'
name|'for'
name|'percent'
name|'in'
name|'sorted'
op|'('
name|'percents'
op|')'
op|':'
newline|'\n'
indent|'                '
name|'print'
op|'('
string|"'% 3d%%%5d %s'"
op|'%'
op|'('
name|'percent'
op|','
name|'percents'
op|'['
name|'percent'
op|']'
op|','
nl|'\n'
string|"'*'"
op|'*'
name|'int'
op|'('
name|'percents'
op|'['
name|'percent'
op|']'
op|'*'
name|'mul'
op|')'
op|')'
op|')'
newline|'\n'
dedent|''
name|'raw_used'
op|'='
name|'sum'
op|'('
name|'raw_total_used'
op|')'
newline|'\n'
name|'raw_avail'
op|'='
name|'sum'
op|'('
name|'raw_total_avail'
op|')'
newline|'\n'
name|'raw_total'
op|'='
name|'raw_used'
op|'+'
name|'raw_avail'
newline|'\n'
name|'avg_used'
op|'='
number|'100.0'
op|'*'
name|'raw_used'
op|'/'
name|'raw_total'
newline|'\n'
name|'if'
name|'human_readable'
op|':'
newline|'\n'
indent|'                '
name|'raw_used'
op|'='
name|'size_suffix'
op|'('
name|'raw_used'
op|')'
newline|'\n'
name|'raw_avail'
op|'='
name|'size_suffix'
op|'('
name|'raw_avail'
op|')'
newline|'\n'
name|'raw_total'
op|'='
name|'size_suffix'
op|'('
name|'raw_total'
op|')'
newline|'\n'
dedent|''
name|'print'
op|'('
string|'"Disk usage: space used: %s of %s"'
op|'%'
op|'('
name|'raw_used'
op|','
name|'raw_total'
op|')'
op|')'
newline|'\n'
name|'print'
op|'('
string|'"Disk usage: space free: %s of %s"'
op|'%'
op|'('
name|'raw_avail'
op|','
name|'raw_total'
op|')'
op|')'
newline|'\n'
name|'print'
op|'('
string|'"Disk usage: lowest: %s%%, highest: %s%%, avg: %s%%"'
op|'%'
nl|'\n'
op|'('
name|'low'
op|','
name|'high'
op|','
name|'avg_used'
op|')'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'print'
op|'('
string|'"No hosts returned valid data."'
op|')'
newline|'\n'
dedent|''
name|'print'
op|'('
string|'"="'
op|'*'
number|'79'
op|')'
newline|'\n'
name|'if'
name|'top_percents'
op|':'
newline|'\n'
indent|'            '
name|'print'
op|'('
string|"'TOP %s'"
op|'%'
name|'top'
op|')'
newline|'\n'
name|'for'
name|'ident'
op|','
name|'used'
name|'in'
name|'top_percents'
op|':'
newline|'\n'
indent|'                '
name|'if'
name|'ident'
op|':'
newline|'\n'
indent|'                    '
name|'url'
op|','
name|'device'
op|'='
name|'ident'
op|'.'
name|'split'
op|'('
op|')'
newline|'\n'
name|'host'
op|'='
name|'urlparse'
op|'('
name|'url'
op|')'
op|'.'
name|'netloc'
op|'.'
name|'split'
op|'('
string|"':'"
op|')'
op|'['
number|'0'
op|']'
newline|'\n'
name|'print'
op|'('
string|"'%.02f%%  %s'"
op|'%'
op|'('
name|'used'
op|','
string|"'%-15s %s'"
op|'%'
op|'('
name|'host'
op|','
name|'device'
op|')'
op|')'
op|')'
newline|'\n'
dedent|''
dedent|''
dedent|''
name|'if'
name|'low_percents'
op|':'
newline|'\n'
indent|'            '
name|'print'
op|'('
string|"'LOWEST %s'"
op|'%'
name|'lowest'
op|')'
newline|'\n'
name|'for'
name|'ident'
op|','
name|'used'
name|'in'
name|'low_percents'
op|':'
newline|'\n'
indent|'                '
name|'if'
name|'ident'
op|':'
newline|'\n'
indent|'                    '
name|'url'
op|','
name|'device'
op|'='
name|'ident'
op|'.'
name|'split'
op|'('
op|')'
newline|'\n'
name|'host'
op|'='
name|'urlparse'
op|'('
name|'url'
op|')'
op|'.'
name|'netloc'
op|'.'
name|'split'
op|'('
string|"':'"
op|')'
op|'['
number|'0'
op|']'
newline|'\n'
name|'print'
op|'('
string|"'%.02f%%  %s'"
op|'%'
op|'('
name|'used'
op|','
string|"'%-15s %s'"
op|'%'
op|'('
name|'host'
op|','
name|'device'
op|')'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|time_check
dedent|''
dedent|''
dedent|''
dedent|''
name|'def'
name|'time_check'
op|'('
name|'self'
op|','
name|'hosts'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""\n        Check a time synchronization of hosts with current time\n\n        :param hosts: set of hosts to check. in the format of:\n            set([(\'127.0.0.1\', 6020), (\'127.0.0.2\', 6030)])\n        """'
newline|'\n'
nl|'\n'
name|'matches'
op|'='
number|'0'
newline|'\n'
name|'errors'
op|'='
number|'0'
newline|'\n'
name|'recon'
op|'='
name|'Scout'
op|'('
string|'"time"'
op|','
name|'self'
op|'.'
name|'verbose'
op|','
name|'self'
op|'.'
name|'suppress_errors'
op|','
nl|'\n'
name|'self'
op|'.'
name|'timeout'
op|')'
newline|'\n'
name|'print'
op|'('
string|'"[%s] Checking time-sync"'
op|'%'
name|'self'
op|'.'
name|'_ptime'
op|'('
op|')'
op|')'
newline|'\n'
name|'for'
name|'url'
op|','
name|'ts_remote'
op|','
name|'status'
op|','
name|'ts_start'
op|','
name|'ts_end'
name|'in'
name|'self'
op|'.'
name|'pool'
op|'.'
name|'imap'
op|'('
nl|'\n'
name|'recon'
op|'.'
name|'scout'
op|','
name|'hosts'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'status'
op|'!='
number|'200'
op|':'
newline|'\n'
indent|'                '
name|'errors'
op|'='
name|'errors'
op|'+'
number|'1'
newline|'\n'
name|'continue'
newline|'\n'
dedent|''
name|'if'
op|'('
name|'ts_remote'
op|'<'
name|'ts_start'
name|'or'
name|'ts_remote'
op|'>'
name|'ts_end'
op|')'
op|':'
newline|'\n'
indent|'                '
name|'diff'
op|'='
name|'abs'
op|'('
name|'ts_end'
op|'-'
name|'ts_remote'
op|')'
newline|'\n'
name|'ts_end_f'
op|'='
name|'self'
op|'.'
name|'_ptime'
op|'('
name|'ts_end'
op|')'
newline|'\n'
name|'ts_remote_f'
op|'='
name|'self'
op|'.'
name|'_ptime'
op|'('
name|'ts_remote'
op|')'
newline|'\n'
nl|'\n'
name|'print'
op|'('
string|'"!! %s current time is %s, but remote is %s, "'
nl|'\n'
string|'"differs by %.2f sec"'
op|'%'
op|'('
nl|'\n'
name|'url'
op|','
nl|'\n'
name|'ts_end_f'
op|','
nl|'\n'
name|'ts_remote_f'
op|','
nl|'\n'
name|'diff'
op|')'
op|')'
newline|'\n'
name|'continue'
newline|'\n'
dedent|''
name|'matches'
op|'+='
number|'1'
newline|'\n'
name|'if'
name|'self'
op|'.'
name|'verbose'
op|':'
newline|'\n'
indent|'                '
name|'print'
op|'('
string|'"-> %s matches."'
op|'%'
name|'url'
op|')'
newline|'\n'
dedent|''
dedent|''
name|'print'
op|'('
string|'"%s/%s hosts matched, %s error[s] while checking hosts."'
op|'%'
op|'('
nl|'\n'
name|'matches'
op|','
name|'len'
op|'('
name|'hosts'
op|')'
op|','
name|'errors'
op|')'
op|')'
newline|'\n'
name|'print'
op|'('
string|'"="'
op|'*'
number|'79'
op|')'
newline|'\n'
nl|'\n'
DECL|member|_get_ring_names
dedent|''
name|'def'
name|'_get_ring_names'
op|'('
name|'self'
op|','
name|'policy'
op|'='
name|'None'
op|')'
op|':'
newline|'\n'
indent|'        '
string|"'''\n        Retrieve name of ring files.\n\n        If no policy is passed and the server type is object,\n        the ring names of all storage-policies are retrieved.\n\n        :param policy: name or index of storage policy, only applicable\n         with server_type==object.\n         :returns: list of ring names.\n        '''"
newline|'\n'
name|'if'
name|'self'
op|'.'
name|'server_type'
op|'=='
string|"'object'"
op|':'
newline|'\n'
indent|'            '
name|'ring_names'
op|'='
op|'['
name|'p'
op|'.'
name|'ring_name'
name|'for'
name|'p'
name|'in'
name|'POLICIES'
name|'if'
op|'('
nl|'\n'
name|'p'
op|'.'
name|'name'
op|'=='
name|'policy'
name|'or'
name|'not'
name|'policy'
name|'or'
op|'('
nl|'\n'
name|'policy'
op|'.'
name|'isdigit'
op|'('
op|')'
name|'and'
name|'int'
op|'('
name|'policy'
op|')'
op|'=='
name|'int'
op|'('
name|'p'
op|')'
op|')'
op|')'
op|']'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'ring_names'
op|'='
op|'['
name|'self'
op|'.'
name|'server_type'
op|']'
newline|'\n'
nl|'\n'
dedent|''
name|'return'
name|'ring_names'
newline|'\n'
nl|'\n'
DECL|member|main
dedent|''
name|'def'
name|'main'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""\n        Retrieve and report cluster info from hosts running recon middleware.\n        """'
newline|'\n'
name|'print'
op|'('
string|'"="'
op|'*'
number|'79'
op|')'
newline|'\n'
name|'usage'
op|'='
string|"'''\n        usage: %prog <server_type> [-v] [--suppress] [-a] [-r] [-u] [-d]\n        [-l] [-T] [--md5] [--auditor] [--updater] [--expirer] [--sockstat]\n        [--human-readable]\n\n        <server_type>\\taccount|container|object\n        Defaults to object server.\n\n        ex: %prog container -l --auditor\n        '''"
newline|'\n'
name|'args'
op|'='
name|'optparse'
op|'.'
name|'OptionParser'
op|'('
name|'usage'
op|')'
newline|'\n'
name|'args'
op|'.'
name|'add_option'
op|'('
string|"'--verbose'"
op|','
string|"'-v'"
op|','
name|'action'
op|'='
string|'"store_true"'
op|','
nl|'\n'
name|'help'
op|'='
string|'"Print verbose info"'
op|')'
newline|'\n'
name|'args'
op|'.'
name|'add_option'
op|'('
string|"'--suppress'"
op|','
name|'action'
op|'='
string|'"store_true"'
op|','
nl|'\n'
name|'help'
op|'='
string|'"Suppress most connection related errors"'
op|')'
newline|'\n'
name|'args'
op|'.'
name|'add_option'
op|'('
string|"'--async'"
op|','
string|"'-a'"
op|','
name|'action'
op|'='
string|'"store_true"'
op|','
nl|'\n'
name|'help'
op|'='
string|'"Get async stats"'
op|')'
newline|'\n'
name|'args'
op|'.'
name|'add_option'
op|'('
string|"'--replication'"
op|','
string|"'-r'"
op|','
name|'action'
op|'='
string|'"store_true"'
op|','
nl|'\n'
name|'help'
op|'='
string|'"Get replication stats"'
op|')'
newline|'\n'
name|'args'
op|'.'
name|'add_option'
op|'('
string|"'--auditor'"
op|','
name|'action'
op|'='
string|'"store_true"'
op|','
nl|'\n'
name|'help'
op|'='
string|'"Get auditor stats"'
op|')'
newline|'\n'
name|'args'
op|'.'
name|'add_option'
op|'('
string|"'--updater'"
op|','
name|'action'
op|'='
string|'"store_true"'
op|','
nl|'\n'
name|'help'
op|'='
string|'"Get updater stats"'
op|')'
newline|'\n'
name|'args'
op|'.'
name|'add_option'
op|'('
string|"'--expirer'"
op|','
name|'action'
op|'='
string|'"store_true"'
op|','
nl|'\n'
name|'help'
op|'='
string|'"Get expirer stats"'
op|')'
newline|'\n'
name|'args'
op|'.'
name|'add_option'
op|'('
string|"'--unmounted'"
op|','
string|"'-u'"
op|','
name|'action'
op|'='
string|'"store_true"'
op|','
nl|'\n'
name|'help'
op|'='
string|'"Check cluster for unmounted devices"'
op|')'
newline|'\n'
name|'args'
op|'.'
name|'add_option'
op|'('
string|"'--diskusage'"
op|','
string|"'-d'"
op|','
name|'action'
op|'='
string|'"store_true"'
op|','
nl|'\n'
name|'help'
op|'='
string|'"Get disk usage stats"'
op|')'
newline|'\n'
name|'args'
op|'.'
name|'add_option'
op|'('
string|"'--human-readable'"
op|','
name|'action'
op|'='
string|'"store_true"'
op|','
nl|'\n'
name|'help'
op|'='
string|'"Use human readable suffix for disk usage stats"'
op|')'
newline|'\n'
name|'args'
op|'.'
name|'add_option'
op|'('
string|"'--loadstats'"
op|','
string|"'-l'"
op|','
name|'action'
op|'='
string|'"store_true"'
op|','
nl|'\n'
name|'help'
op|'='
string|'"Get cluster load average stats"'
op|')'
newline|'\n'
name|'args'
op|'.'
name|'add_option'
op|'('
string|"'--quarantined'"
op|','
string|"'-q'"
op|','
name|'action'
op|'='
string|'"store_true"'
op|','
nl|'\n'
name|'help'
op|'='
string|'"Get cluster quarantine stats"'
op|')'
newline|'\n'
name|'args'
op|'.'
name|'add_option'
op|'('
string|"'--validate-servers'"
op|','
name|'action'
op|'='
string|'"store_true"'
op|','
nl|'\n'
name|'help'
op|'='
string|'"Validate servers on the ring"'
op|')'
newline|'\n'
name|'args'
op|'.'
name|'add_option'
op|'('
string|"'--md5'"
op|','
name|'action'
op|'='
string|'"store_true"'
op|','
nl|'\n'
name|'help'
op|'='
string|'"Get md5sum of servers ring and compare to "'
nl|'\n'
string|'"local copy"'
op|')'
newline|'\n'
name|'args'
op|'.'
name|'add_option'
op|'('
string|"'--sockstat'"
op|','
name|'action'
op|'='
string|'"store_true"'
op|','
nl|'\n'
name|'help'
op|'='
string|'"Get cluster socket usage stats"'
op|')'
newline|'\n'
name|'args'
op|'.'
name|'add_option'
op|'('
string|"'--driveaudit'"
op|','
name|'action'
op|'='
string|'"store_true"'
op|','
nl|'\n'
name|'help'
op|'='
string|'"Get drive audit error stats"'
op|')'
newline|'\n'
name|'args'
op|'.'
name|'add_option'
op|'('
string|"'--time'"
op|','
string|"'-T'"
op|','
name|'action'
op|'='
string|'"store_true"'
op|','
nl|'\n'
name|'help'
op|'='
string|'"Check time synchronization"'
op|')'
newline|'\n'
name|'args'
op|'.'
name|'add_option'
op|'('
string|"'--top'"
op|','
name|'type'
op|'='
string|"'int'"
op|','
name|'metavar'
op|'='
string|"'COUNT'"
op|','
name|'default'
op|'='
number|'0'
op|','
nl|'\n'
name|'help'
op|'='
string|"'Also show the top COUNT entries in rank order.'"
op|')'
newline|'\n'
name|'args'
op|'.'
name|'add_option'
op|'('
string|"'--lowest'"
op|','
name|'type'
op|'='
string|"'int'"
op|','
name|'metavar'
op|'='
string|"'COUNT'"
op|','
name|'default'
op|'='
number|'0'
op|','
nl|'\n'
name|'help'
op|'='
string|"'Also show the lowest COUNT entries in rank \\\n                        order.'"
op|')'
newline|'\n'
name|'args'
op|'.'
name|'add_option'
op|'('
string|"'--all'"
op|','
name|'action'
op|'='
string|'"store_true"'
op|','
nl|'\n'
name|'help'
op|'='
string|'"Perform all checks. Equal to \\t\\t\\t-arudlqT "'
nl|'\n'
string|'"--md5 --sockstat --auditor --updater --expirer "'
nl|'\n'
string|'"--driveaudit --validate-servers"'
op|')'
newline|'\n'
name|'args'
op|'.'
name|'add_option'
op|'('
string|"'--region'"
op|','
name|'type'
op|'='
string|'"int"'
op|','
nl|'\n'
name|'help'
op|'='
string|'"Only query servers in specified region"'
op|')'
newline|'\n'
name|'args'
op|'.'
name|'add_option'
op|'('
string|"'--zone'"
op|','
string|"'-z'"
op|','
name|'type'
op|'='
string|'"int"'
op|','
nl|'\n'
name|'help'
op|'='
string|'"Only query servers in specified zone"'
op|')'
newline|'\n'
name|'args'
op|'.'
name|'add_option'
op|'('
string|"'--timeout'"
op|','
string|"'-t'"
op|','
name|'type'
op|'='
string|'"int"'
op|','
name|'metavar'
op|'='
string|'"SECONDS"'
op|','
nl|'\n'
name|'help'
op|'='
string|'"Time to wait for a response from a server"'
op|','
nl|'\n'
name|'default'
op|'='
number|'5'
op|')'
newline|'\n'
name|'args'
op|'.'
name|'add_option'
op|'('
string|"'--swiftdir'"
op|','
name|'default'
op|'='
string|'"/etc/swift"'
op|','
nl|'\n'
name|'help'
op|'='
string|'"Default = /etc/swift"'
op|')'
newline|'\n'
name|'args'
op|'.'
name|'add_option'
op|'('
string|"'--policy'"
op|','
string|"'-p'"
op|','
nl|'\n'
name|'help'
op|'='
string|"'Only query object servers in specified '"
nl|'\n'
string|"'storage policy (specified as name or index).'"
op|')'
newline|'\n'
name|'options'
op|','
name|'arguments'
op|'='
name|'args'
op|'.'
name|'parse_args'
op|'('
op|')'
newline|'\n'
nl|'\n'
name|'if'
name|'len'
op|'('
name|'sys'
op|'.'
name|'argv'
op|')'
op|'<='
number|'1'
name|'or'
name|'len'
op|'('
name|'arguments'
op|')'
op|'>'
number|'1'
op|':'
newline|'\n'
indent|'            '
name|'args'
op|'.'
name|'print_help'
op|'('
op|')'
newline|'\n'
name|'sys'
op|'.'
name|'exit'
op|'('
number|'0'
op|')'
newline|'\n'
nl|'\n'
dedent|''
name|'if'
name|'arguments'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'arguments'
op|'['
number|'0'
op|']'
name|'in'
name|'self'
op|'.'
name|'check_types'
op|':'
newline|'\n'
indent|'                '
name|'self'
op|'.'
name|'server_type'
op|'='
name|'arguments'
op|'['
number|'0'
op|']'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'                '
name|'print'
op|'('
string|'"Invalid Server Type"'
op|')'
newline|'\n'
name|'args'
op|'.'
name|'print_help'
op|'('
op|')'
newline|'\n'
name|'sys'
op|'.'
name|'exit'
op|'('
number|'1'
op|')'
newline|'\n'
dedent|''
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'server_type'
op|'='
string|"'object'"
newline|'\n'
nl|'\n'
dedent|''
name|'swift_dir'
op|'='
name|'options'
op|'.'
name|'swiftdir'
newline|'\n'
name|'self'
op|'.'
name|'verbose'
op|'='
name|'options'
op|'.'
name|'verbose'
newline|'\n'
name|'self'
op|'.'
name|'suppress_errors'
op|'='
name|'options'
op|'.'
name|'suppress'
newline|'\n'
name|'self'
op|'.'
name|'timeout'
op|'='
name|'options'
op|'.'
name|'timeout'
newline|'\n'
nl|'\n'
name|'ring_names'
op|'='
name|'self'
op|'.'
name|'_get_ring_names'
op|'('
name|'options'
op|'.'
name|'policy'
op|')'
newline|'\n'
name|'if'
name|'not'
name|'ring_names'
op|':'
newline|'\n'
indent|'            '
name|'print'
op|'('
string|"'Invalid Storage Policy'"
op|')'
newline|'\n'
name|'args'
op|'.'
name|'print_help'
op|'('
op|')'
newline|'\n'
name|'sys'
op|'.'
name|'exit'
op|'('
number|'0'
op|')'
newline|'\n'
nl|'\n'
dedent|''
name|'hosts'
op|'='
name|'self'
op|'.'
name|'get_hosts'
op|'('
name|'options'
op|'.'
name|'region'
op|','
name|'options'
op|'.'
name|'zone'
op|','
nl|'\n'
name|'swift_dir'
op|','
name|'ring_names'
op|')'
newline|'\n'
nl|'\n'
name|'print'
op|'('
string|'"--> Starting reconnaissance on %s hosts"'
op|'%'
name|'len'
op|'('
name|'hosts'
op|')'
op|')'
newline|'\n'
name|'print'
op|'('
string|'"="'
op|'*'
number|'79'
op|')'
newline|'\n'
nl|'\n'
name|'if'
name|'options'
op|'.'
name|'all'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'self'
op|'.'
name|'server_type'
op|'=='
string|"'object'"
op|':'
newline|'\n'
indent|'                '
name|'self'
op|'.'
name|'async_check'
op|'('
name|'hosts'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'object_auditor_check'
op|'('
name|'hosts'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'updater_check'
op|'('
name|'hosts'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'expirer_check'
op|'('
name|'hosts'
op|')'
newline|'\n'
dedent|''
name|'elif'
name|'self'
op|'.'
name|'server_type'
op|'=='
string|"'container'"
op|':'
newline|'\n'
indent|'                '
name|'self'
op|'.'
name|'auditor_check'
op|'('
name|'hosts'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'updater_check'
op|'('
name|'hosts'
op|')'
newline|'\n'
dedent|''
name|'elif'
name|'self'
op|'.'
name|'server_type'
op|'=='
string|"'account'"
op|':'
newline|'\n'
indent|'                '
name|'self'
op|'.'
name|'auditor_check'
op|'('
name|'hosts'
op|')'
newline|'\n'
dedent|''
name|'self'
op|'.'
name|'replication_check'
op|'('
name|'hosts'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'umount_check'
op|'('
name|'hosts'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'load_check'
op|'('
name|'hosts'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'disk_usage'
op|'('
name|'hosts'
op|','
name|'options'
op|'.'
name|'top'
op|','
name|'options'
op|'.'
name|'lowest'
op|','
nl|'\n'
name|'options'
op|'.'
name|'human_readable'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'get_ringmd5'
op|'('
name|'hosts'
op|','
name|'swift_dir'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'get_swiftconfmd5'
op|'('
name|'hosts'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'quarantine_check'
op|'('
name|'hosts'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'socket_usage'
op|'('
name|'hosts'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'server_type_check'
op|'('
name|'hosts'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'driveaudit_check'
op|'('
name|'hosts'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'time_check'
op|'('
name|'hosts'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'options'
op|'.'
name|'async'
op|':'
newline|'\n'
indent|'                '
name|'if'
name|'self'
op|'.'
name|'server_type'
op|'=='
string|"'object'"
op|':'
newline|'\n'
indent|'                    '
name|'self'
op|'.'
name|'async_check'
op|'('
name|'hosts'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'                    '
name|'print'
op|'('
string|'"Error: Can\'t check asyncs on non object servers."'
op|')'
newline|'\n'
dedent|''
dedent|''
name|'if'
name|'options'
op|'.'
name|'unmounted'
op|':'
newline|'\n'
indent|'                '
name|'self'
op|'.'
name|'umount_check'
op|'('
name|'hosts'
op|')'
newline|'\n'
dedent|''
name|'if'
name|'options'
op|'.'
name|'replication'
op|':'
newline|'\n'
indent|'                '
name|'self'
op|'.'
name|'replication_check'
op|'('
name|'hosts'
op|')'
newline|'\n'
dedent|''
name|'if'
name|'options'
op|'.'
name|'auditor'
op|':'
newline|'\n'
indent|'                '
name|'if'
name|'self'
op|'.'
name|'server_type'
op|'=='
string|"'object'"
op|':'
newline|'\n'
indent|'                    '
name|'self'
op|'.'
name|'object_auditor_check'
op|'('
name|'hosts'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'                    '
name|'self'
op|'.'
name|'auditor_check'
op|'('
name|'hosts'
op|')'
newline|'\n'
dedent|''
dedent|''
name|'if'
name|'options'
op|'.'
name|'updater'
op|':'
newline|'\n'
indent|'                '
name|'if'
name|'self'
op|'.'
name|'server_type'
op|'=='
string|"'account'"
op|':'
newline|'\n'
indent|'                    '
name|'print'
op|'('
string|'"Error: Can\'t check updaters on account servers."'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'                    '
name|'self'
op|'.'
name|'updater_check'
op|'('
name|'hosts'
op|')'
newline|'\n'
dedent|''
dedent|''
name|'if'
name|'options'
op|'.'
name|'expirer'
op|':'
newline|'\n'
indent|'                '
name|'if'
name|'self'
op|'.'
name|'server_type'
op|'=='
string|"'object'"
op|':'
newline|'\n'
indent|'                    '
name|'self'
op|'.'
name|'expirer_check'
op|'('
name|'hosts'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'                    '
name|'print'
op|'('
string|'"Error: Can\'t check expired on non object servers."'
op|')'
newline|'\n'
dedent|''
dedent|''
name|'if'
name|'options'
op|'.'
name|'validate_servers'
op|':'
newline|'\n'
indent|'                '
name|'self'
op|'.'
name|'server_type_check'
op|'('
name|'hosts'
op|')'
newline|'\n'
dedent|''
name|'if'
name|'options'
op|'.'
name|'loadstats'
op|':'
newline|'\n'
indent|'                '
name|'self'
op|'.'
name|'load_check'
op|'('
name|'hosts'
op|')'
newline|'\n'
dedent|''
name|'if'
name|'options'
op|'.'
name|'diskusage'
op|':'
newline|'\n'
indent|'                '
name|'self'
op|'.'
name|'disk_usage'
op|'('
name|'hosts'
op|','
name|'options'
op|'.'
name|'top'
op|','
name|'options'
op|'.'
name|'lowest'
op|','
nl|'\n'
name|'options'
op|'.'
name|'human_readable'
op|')'
newline|'\n'
dedent|''
name|'if'
name|'options'
op|'.'
name|'md5'
op|':'
newline|'\n'
indent|'                '
name|'self'
op|'.'
name|'get_ringmd5'
op|'('
name|'hosts'
op|','
name|'swift_dir'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'get_swiftconfmd5'
op|'('
name|'hosts'
op|')'
newline|'\n'
dedent|''
name|'if'
name|'options'
op|'.'
name|'quarantined'
op|':'
newline|'\n'
indent|'                '
name|'self'
op|'.'
name|'quarantine_check'
op|'('
name|'hosts'
op|')'
newline|'\n'
dedent|''
name|'if'
name|'options'
op|'.'
name|'sockstat'
op|':'
newline|'\n'
indent|'                '
name|'self'
op|'.'
name|'socket_usage'
op|'('
name|'hosts'
op|')'
newline|'\n'
dedent|''
name|'if'
name|'options'
op|'.'
name|'driveaudit'
op|':'
newline|'\n'
indent|'                '
name|'self'
op|'.'
name|'driveaudit_check'
op|'('
name|'hosts'
op|')'
newline|'\n'
dedent|''
name|'if'
name|'options'
op|'.'
name|'time'
op|':'
newline|'\n'
indent|'                '
name|'self'
op|'.'
name|'time_check'
op|'('
name|'hosts'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|main
dedent|''
dedent|''
dedent|''
dedent|''
name|'def'
name|'main'
op|'('
op|')'
op|':'
newline|'\n'
indent|'    '
name|'try'
op|':'
newline|'\n'
indent|'        '
name|'reconnoiter'
op|'='
name|'SwiftRecon'
op|'('
op|')'
newline|'\n'
name|'reconnoiter'
op|'.'
name|'main'
op|'('
op|')'
newline|'\n'
dedent|''
name|'except'
name|'KeyboardInterrupt'
op|':'
newline|'\n'
indent|'        '
name|'print'
op|'('
string|"'\\n'"
op|')'
newline|'\n'
dedent|''
dedent|''
endmarker|''
end_unit
