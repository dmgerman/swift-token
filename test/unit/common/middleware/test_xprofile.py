begin_unit
comment|'# Copyright (c) 2010-2012 OpenStack, LLC.'
nl|'\n'
comment|'#'
nl|'\n'
comment|'# Licensed under the Apache License, Version 2.0 (the "License");'
nl|'\n'
comment|'# you may not use this file except in compliance with the License.'
nl|'\n'
comment|'# You may obtain a copy of the License at'
nl|'\n'
comment|'#'
nl|'\n'
comment|'#    http://www.apache.org/licenses/LICENSE-2.0'
nl|'\n'
comment|'#'
nl|'\n'
comment|'# Unless required by applicable law or agreed to in writing, software'
nl|'\n'
comment|'# distributed under the License is distributed on an "AS IS" BASIS,'
nl|'\n'
comment|'# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or'
nl|'\n'
comment|'# implied.'
nl|'\n'
comment|'# See the License for the specific language governing permissions and'
nl|'\n'
comment|'# limitations under the License.'
nl|'\n'
nl|'\n'
name|'import'
name|'os'
newline|'\n'
name|'import'
name|'json'
newline|'\n'
name|'import'
name|'shutil'
newline|'\n'
name|'import'
name|'tempfile'
newline|'\n'
name|'import'
name|'unittest'
newline|'\n'
name|'from'
name|'nose'
name|'import'
name|'SkipTest'
newline|'\n'
nl|'\n'
name|'from'
name|'six'
name|'import'
name|'BytesIO'
newline|'\n'
nl|'\n'
name|'from'
name|'swift'
name|'import'
name|'gettext_'
name|'as'
name|'_'
newline|'\n'
name|'from'
name|'swift'
op|'.'
name|'common'
op|'.'
name|'swob'
name|'import'
name|'Request'
op|','
name|'Response'
newline|'\n'
nl|'\n'
name|'try'
op|':'
newline|'\n'
indent|'    '
name|'from'
name|'swift'
op|'.'
name|'common'
op|'.'
name|'middleware'
name|'import'
name|'xprofile'
newline|'\n'
name|'from'
name|'swift'
op|'.'
name|'common'
op|'.'
name|'middleware'
op|'.'
name|'xprofile'
name|'import'
name|'ProfileMiddleware'
newline|'\n'
name|'from'
name|'swift'
op|'.'
name|'common'
op|'.'
name|'middleware'
op|'.'
name|'x_profile'
op|'.'
name|'exceptions'
name|'import'
op|'('
nl|'\n'
name|'MethodNotAllowed'
op|','
name|'NotFoundException'
op|','
name|'ODFLIBNotInstalled'
op|','
nl|'\n'
name|'PLOTLIBNotInstalled'
op|')'
newline|'\n'
name|'from'
name|'swift'
op|'.'
name|'common'
op|'.'
name|'middleware'
op|'.'
name|'x_profile'
op|'.'
name|'html_viewer'
name|'import'
op|'('
nl|'\n'
name|'HTMLViewer'
op|','
name|'PLOTLIB_INSTALLED'
op|')'
newline|'\n'
name|'from'
name|'swift'
op|'.'
name|'common'
op|'.'
name|'middleware'
op|'.'
name|'x_profile'
op|'.'
name|'profile_model'
name|'import'
op|'('
nl|'\n'
name|'ODFLIB_INSTALLED'
op|','
name|'ProfileLog'
op|','
name|'Stats2'
op|')'
newline|'\n'
dedent|''
name|'except'
name|'ImportError'
op|':'
newline|'\n'
DECL|variable|xprofile
indent|'    '
name|'xprofile'
op|'='
name|'None'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FakeApp
dedent|''
name|'class'
name|'FakeApp'
op|'('
name|'object'
op|')'
op|':'
newline|'\n'
nl|'\n'
DECL|member|__call__
indent|'    '
name|'def'
name|'__call__'
op|'('
name|'self'
op|','
name|'env'
op|','
name|'start_response'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'req'
op|'='
name|'Request'
op|'('
name|'env'
op|')'
newline|'\n'
name|'return'
name|'Response'
op|'('
name|'request'
op|'='
name|'req'
op|','
name|'body'
op|'='
string|"'FAKE APP'"
op|')'
op|'('
nl|'\n'
name|'env'
op|','
name|'start_response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|TestXProfile
dedent|''
dedent|''
name|'class'
name|'TestXProfile'
op|'('
name|'unittest'
op|'.'
name|'TestCase'
op|')'
op|':'
newline|'\n'
nl|'\n'
DECL|member|test_get_profiler
indent|'    '
name|'def'
name|'test_get_profiler'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'xprofile'
name|'is'
name|'None'
op|':'
newline|'\n'
indent|'            '
name|'raise'
name|'SkipTest'
newline|'\n'
dedent|''
name|'self'
op|'.'
name|'assertTrue'
op|'('
name|'xprofile'
op|'.'
name|'get_profiler'
op|'('
string|"'cProfile'"
op|')'
name|'is'
name|'not'
name|'None'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertTrue'
op|'('
name|'xprofile'
op|'.'
name|'get_profiler'
op|'('
string|"'eventlet.green.profile'"
op|')'
nl|'\n'
name|'is'
name|'not'
name|'None'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|TestProfilers
dedent|''
dedent|''
name|'class'
name|'TestProfilers'
op|'('
name|'unittest'
op|'.'
name|'TestCase'
op|')'
op|':'
newline|'\n'
nl|'\n'
DECL|member|setUp
indent|'    '
name|'def'
name|'setUp'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'xprofile'
name|'is'
name|'None'
op|':'
newline|'\n'
indent|'            '
name|'raise'
name|'SkipTest'
newline|'\n'
dedent|''
name|'self'
op|'.'
name|'profilers'
op|'='
op|'['
name|'xprofile'
op|'.'
name|'get_profiler'
op|'('
string|"'cProfile'"
op|')'
op|','
nl|'\n'
name|'xprofile'
op|'.'
name|'get_profiler'
op|'('
string|"'eventlet.green.profile'"
op|')'
op|']'
newline|'\n'
nl|'\n'
DECL|member|fake_func
dedent|''
name|'def'
name|'fake_func'
op|'('
name|'self'
op|','
op|'*'
name|'args'
op|','
op|'**'
name|'kw'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
name|'len'
op|'('
name|'args'
op|')'
op|'+'
name|'len'
op|'('
name|'kw'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_runcall
dedent|''
name|'def'
name|'test_runcall'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'for'
name|'p'
name|'in'
name|'self'
op|'.'
name|'profilers'
op|':'
newline|'\n'
indent|'            '
name|'v'
op|'='
name|'p'
op|'.'
name|'runcall'
op|'('
name|'self'
op|'.'
name|'fake_func'
op|','
string|"'one'"
op|','
string|"'two'"
op|','
op|'{'
string|"'key1'"
op|':'
string|"'value1'"
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'v'
op|','
number|'3'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_runctx
dedent|''
dedent|''
name|'def'
name|'test_runctx'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'for'
name|'p'
name|'in'
name|'self'
op|'.'
name|'profilers'
op|':'
newline|'\n'
indent|'            '
name|'p'
op|'.'
name|'runctx'
op|'('
string|"'import os;os.getcwd();'"
op|','
name|'globals'
op|'('
op|')'
op|','
name|'locals'
op|'('
op|')'
op|')'
newline|'\n'
name|'p'
op|'.'
name|'snapshot_stats'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertTrue'
op|'('
name|'p'
op|'.'
name|'stats'
name|'is'
name|'not'
name|'None'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertTrue'
op|'('
name|'len'
op|'('
name|'p'
op|'.'
name|'stats'
op|'.'
name|'keys'
op|'('
op|')'
op|')'
op|'>'
number|'0'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|TestProfileMiddleware
dedent|''
dedent|''
dedent|''
name|'class'
name|'TestProfileMiddleware'
op|'('
name|'unittest'
op|'.'
name|'TestCase'
op|')'
op|':'
newline|'\n'
nl|'\n'
DECL|member|setUp
indent|'    '
name|'def'
name|'setUp'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'xprofile'
name|'is'
name|'None'
op|':'
newline|'\n'
indent|'            '
name|'raise'
name|'SkipTest'
newline|'\n'
dedent|''
name|'self'
op|'.'
name|'got_statuses'
op|'='
op|'['
op|']'
newline|'\n'
name|'self'
op|'.'
name|'app'
op|'='
name|'ProfileMiddleware'
op|'('
name|'FakeApp'
op|','
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'tempdir'
op|'='
name|'os'
op|'.'
name|'path'
op|'.'
name|'dirname'
op|'('
name|'self'
op|'.'
name|'app'
op|'.'
name|'log_filename_prefix'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'pids'
op|'='
op|'['
string|"'123'"
op|','
string|"'456'"
op|','
name|'str'
op|'('
name|'os'
op|'.'
name|'getpid'
op|'('
op|')'
op|')'
op|']'
newline|'\n'
name|'profiler'
op|'='
name|'xprofile'
op|'.'
name|'get_profiler'
op|'('
string|"'eventlet.green.profile'"
op|')'
newline|'\n'
name|'for'
name|'pid'
name|'in'
name|'self'
op|'.'
name|'pids'
op|':'
newline|'\n'
indent|'            '
name|'path'
op|'='
name|'self'
op|'.'
name|'app'
op|'.'
name|'log_filename_prefix'
op|'+'
name|'pid'
newline|'\n'
name|'profiler'
op|'.'
name|'runctx'
op|'('
string|"'import os;os.getcwd();'"
op|','
name|'globals'
op|'('
op|')'
op|','
name|'locals'
op|'('
op|')'
op|')'
newline|'\n'
name|'profiler'
op|'.'
name|'dump_stats'
op|'('
name|'path'
op|')'
newline|'\n'
name|'profiler'
op|'.'
name|'runctx'
op|'('
string|"'import os;os.getcwd();'"
op|','
name|'globals'
op|'('
op|')'
op|','
name|'locals'
op|'('
op|')'
op|')'
newline|'\n'
name|'profiler'
op|'.'
name|'dump_stats'
op|'('
name|'path'
op|'+'
string|"'.tmp'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|tearDown
dedent|''
dedent|''
name|'def'
name|'tearDown'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'shutil'
op|'.'
name|'rmtree'
op|'('
name|'self'
op|'.'
name|'tempdir'
op|','
name|'ignore_errors'
op|'='
name|'True'
op|')'
newline|'\n'
nl|'\n'
DECL|member|get_app
dedent|''
name|'def'
name|'get_app'
op|'('
name|'self'
op|','
name|'app'
op|','
name|'global_conf'
op|','
op|'**'
name|'local_conf'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'factory'
op|'='
name|'xprofile'
op|'.'
name|'filter_factory'
op|'('
name|'global_conf'
op|','
op|'**'
name|'local_conf'
op|')'
newline|'\n'
name|'return'
name|'factory'
op|'('
name|'app'
op|')'
newline|'\n'
nl|'\n'
DECL|member|start_response
dedent|''
name|'def'
name|'start_response'
op|'('
name|'self'
op|','
name|'status'
op|','
name|'headers'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'got_statuses'
op|'='
op|'['
name|'status'
op|']'
newline|'\n'
name|'self'
op|'.'
name|'headers'
op|'='
name|'headers'
newline|'\n'
nl|'\n'
DECL|member|test_combine_body_qs
dedent|''
name|'def'
name|'test_combine_body_qs'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'body'
op|'='
op|'('
string|'b"profile=all&sort=time&limit=-1&fulldirs=1"'
nl|'\n'
string|'b"&nfl_filter=__call__&query=query&metric=nc&format=default"'
op|')'
newline|'\n'
name|'wsgi_input'
op|'='
name|'BytesIO'
op|'('
name|'body'
op|')'
newline|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'GET'"
op|','
nl|'\n'
string|"'QUERY_STRING'"
op|':'
string|"'profile=all&format=json'"
op|','
nl|'\n'
string|"'wsgi.input'"
op|':'
name|'wsgi_input'
op|'}'
newline|'\n'
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/__profile__/'"
op|','
name|'environ'
op|'='
name|'environ'
op|')'
newline|'\n'
name|'query_dict'
op|'='
name|'self'
op|'.'
name|'app'
op|'.'
name|'_combine_body_qs'
op|'('
name|'req'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'query_dict'
op|'['
string|"'profile'"
op|']'
op|','
op|'['
string|"'all'"
op|']'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'query_dict'
op|'['
string|"'sort'"
op|']'
op|','
op|'['
string|"'time'"
op|']'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'query_dict'
op|'['
string|"'limit'"
op|']'
op|','
op|'['
string|"'-1'"
op|']'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'query_dict'
op|'['
string|"'fulldirs'"
op|']'
op|','
op|'['
string|"'1'"
op|']'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'query_dict'
op|'['
string|"'nfl_filter'"
op|']'
op|','
op|'['
string|"'__call__'"
op|']'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'query_dict'
op|'['
string|"'query'"
op|']'
op|','
op|'['
string|"'query'"
op|']'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'query_dict'
op|'['
string|"'metric'"
op|']'
op|','
op|'['
string|"'nc'"
op|']'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'query_dict'
op|'['
string|"'format'"
op|']'
op|','
op|'['
string|"'default'"
op|']'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_call
dedent|''
name|'def'
name|'test_call'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'body'
op|'='
string|'b"sort=time&limit=-1&fulldirs=1&nfl_filter=&metric=nc"'
newline|'\n'
name|'wsgi_input'
op|'='
name|'BytesIO'
op|'('
name|'body'
op|'+'
string|"b'&query=query'"
op|')'
newline|'\n'
name|'environ'
op|'='
op|'{'
string|"'HTTP_HOST'"
op|':'
string|"'localhost:8080'"
op|','
nl|'\n'
string|"'PATH_INFO'"
op|':'
string|"'/__profile__'"
op|','
nl|'\n'
string|"'REQUEST_METHOD'"
op|':'
string|"'GET'"
op|','
nl|'\n'
string|"'QUERY_STRING'"
op|':'
string|"'profile=all&format=json'"
op|','
nl|'\n'
string|"'wsgi.input'"
op|':'
name|'wsgi_input'
op|'}'
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'app'
op|'('
name|'environ'
op|','
name|'self'
op|'.'
name|'start_response'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertTrue'
op|'('
name|'resp'
op|'['
number|'0'
op|']'
op|'.'
name|'find'
op|'('
string|"'<html>'"
op|')'
op|'>'
number|'0'
op|','
name|'resp'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'self'
op|'.'
name|'got_statuses'
op|','
op|'['
string|"'200 OK'"
op|']'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'self'
op|'.'
name|'headers'
op|','
op|'['
op|'('
string|"'content-type'"
op|','
string|"'text/html'"
op|')'
op|']'
op|')'
newline|'\n'
name|'wsgi_input'
op|'='
name|'BytesIO'
op|'('
name|'body'
op|'+'
string|"b'&plot=plot'"
op|')'
newline|'\n'
name|'environ'
op|'['
string|"'wsgi.input'"
op|']'
op|'='
name|'wsgi_input'
newline|'\n'
name|'if'
name|'PLOTLIB_INSTALLED'
op|':'
newline|'\n'
indent|'            '
name|'resp'
op|'='
name|'self'
op|'.'
name|'app'
op|'('
name|'environ'
op|','
name|'self'
op|'.'
name|'start_response'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'self'
op|'.'
name|'got_statuses'
op|','
op|'['
string|"'200 OK'"
op|']'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'self'
op|'.'
name|'headers'
op|','
op|'['
op|'('
string|"'content-type'"
op|','
string|"'image/jpg'"
op|')'
op|']'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'resp'
op|'='
name|'self'
op|'.'
name|'app'
op|'('
name|'environ'
op|','
name|'self'
op|'.'
name|'start_response'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'self'
op|'.'
name|'got_statuses'
op|','
op|'['
string|"'500 Internal Server Error'"
op|']'
op|')'
newline|'\n'
dedent|''
name|'wsgi_input'
op|'='
name|'BytesIO'
op|'('
name|'body'
op|'+'
string|"'&download=download&format=default'"
op|')'
newline|'\n'
name|'environ'
op|'['
string|"'wsgi.input'"
op|']'
op|'='
name|'wsgi_input'
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'app'
op|'('
name|'environ'
op|','
name|'self'
op|'.'
name|'start_response'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'self'
op|'.'
name|'headers'
op|','
op|'['
op|'('
string|"'content-type'"
op|','
nl|'\n'
name|'HTMLViewer'
op|'.'
name|'format_dict'
op|'['
string|"'default'"
op|']'
op|')'
op|']'
op|')'
newline|'\n'
name|'wsgi_input'
op|'='
name|'BytesIO'
op|'('
name|'body'
op|'+'
string|"'&download=download&format=json'"
op|')'
newline|'\n'
name|'environ'
op|'['
string|"'wsgi.input'"
op|']'
op|'='
name|'wsgi_input'
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'app'
op|'('
name|'environ'
op|','
name|'self'
op|'.'
name|'start_response'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertTrue'
op|'('
name|'self'
op|'.'
name|'headers'
op|'=='
op|'['
op|'('
string|"'content-type'"
op|','
nl|'\n'
name|'HTMLViewer'
op|'.'
name|'format_dict'
op|'['
string|"'json'"
op|']'
op|')'
op|']'
op|')'
newline|'\n'
name|'env2'
op|'='
name|'environ'
op|'.'
name|'copy'
op|'('
op|')'
newline|'\n'
name|'env2'
op|'['
string|"'REQUEST_METHOD'"
op|']'
op|'='
string|"'DELETE'"
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'app'
op|'('
name|'env2'
op|','
name|'self'
op|'.'
name|'start_response'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'self'
op|'.'
name|'got_statuses'
op|','
op|'['
string|"'405 Method Not Allowed'"
op|']'
op|','
name|'resp'
op|')'
newline|'\n'
nl|'\n'
comment|'# use a totally bogus profile identifier'
nl|'\n'
name|'wsgi_input'
op|'='
name|'BytesIO'
op|'('
name|'body'
op|'+'
string|"b'&profile=ABC&download=download'"
op|')'
newline|'\n'
name|'environ'
op|'['
string|"'wsgi.input'"
op|']'
op|'='
name|'wsgi_input'
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'app'
op|'('
name|'environ'
op|','
name|'self'
op|'.'
name|'start_response'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'self'
op|'.'
name|'got_statuses'
op|','
op|'['
string|"'404 Not Found'"
op|']'
op|','
name|'resp'
op|')'
newline|'\n'
nl|'\n'
name|'wsgi_input'
op|'='
name|'BytesIO'
op|'('
name|'body'
op|'+'
string|"b'&download=download&format=ods'"
op|')'
newline|'\n'
name|'environ'
op|'['
string|"'wsgi.input'"
op|']'
op|'='
name|'wsgi_input'
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'app'
op|'('
name|'environ'
op|','
name|'self'
op|'.'
name|'start_response'
op|')'
newline|'\n'
name|'if'
name|'ODFLIB_INSTALLED'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'self'
op|'.'
name|'headers'
op|','
op|'['
op|'('
string|"'content-type'"
op|','
nl|'\n'
name|'HTMLViewer'
op|'.'
name|'format_dict'
op|'['
string|"'ods'"
op|']'
op|')'
op|']'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'self'
op|'.'
name|'got_statuses'
op|','
op|'['
string|"'500 Internal Server Error'"
op|']'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_dump_checkpoint
dedent|''
dedent|''
name|'def'
name|'test_dump_checkpoint'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'app'
op|'.'
name|'dump_checkpoint'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertTrue'
op|'('
name|'self'
op|'.'
name|'app'
op|'.'
name|'last_dump_at'
name|'is'
name|'not'
name|'None'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_renew_profile
dedent|''
name|'def'
name|'test_renew_profile'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'old_profiler'
op|'='
name|'self'
op|'.'
name|'app'
op|'.'
name|'profiler'
newline|'\n'
name|'self'
op|'.'
name|'app'
op|'.'
name|'renew_profile'
op|'('
op|')'
newline|'\n'
name|'new_profiler'
op|'='
name|'self'
op|'.'
name|'app'
op|'.'
name|'profiler'
newline|'\n'
name|'self'
op|'.'
name|'assertTrue'
op|'('
name|'old_profiler'
op|'!='
name|'new_profiler'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|Test_profile_log
dedent|''
dedent|''
name|'class'
name|'Test_profile_log'
op|'('
name|'unittest'
op|'.'
name|'TestCase'
op|')'
op|':'
newline|'\n'
nl|'\n'
DECL|member|setUp
indent|'    '
name|'def'
name|'setUp'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'xprofile'
name|'is'
name|'None'
op|':'
newline|'\n'
indent|'            '
name|'raise'
name|'SkipTest'
newline|'\n'
nl|'\n'
dedent|''
name|'self'
op|'.'
name|'dir1'
op|'='
name|'tempfile'
op|'.'
name|'mkdtemp'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'log_filename_prefix1'
op|'='
name|'self'
op|'.'
name|'dir1'
op|'+'
string|"'/unittest.profile'"
newline|'\n'
name|'self'
op|'.'
name|'profile_log1'
op|'='
name|'ProfileLog'
op|'('
name|'self'
op|'.'
name|'log_filename_prefix1'
op|','
name|'False'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'pids1'
op|'='
op|'['
string|"'123'"
op|','
string|"'456'"
op|','
name|'str'
op|'('
name|'os'
op|'.'
name|'getpid'
op|'('
op|')'
op|')'
op|']'
newline|'\n'
name|'profiler1'
op|'='
name|'xprofile'
op|'.'
name|'get_profiler'
op|'('
string|"'eventlet.green.profile'"
op|')'
newline|'\n'
name|'for'
name|'pid'
name|'in'
name|'self'
op|'.'
name|'pids1'
op|':'
newline|'\n'
indent|'            '
name|'profiler1'
op|'.'
name|'runctx'
op|'('
string|"'import os;os.getcwd();'"
op|','
name|'globals'
op|'('
op|')'
op|','
name|'locals'
op|'('
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'profile_log1'
op|'.'
name|'dump_profile'
op|'('
name|'profiler1'
op|','
name|'pid'
op|')'
newline|'\n'
nl|'\n'
dedent|''
name|'self'
op|'.'
name|'dir2'
op|'='
name|'tempfile'
op|'.'
name|'mkdtemp'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'log_filename_prefix2'
op|'='
name|'self'
op|'.'
name|'dir2'
op|'+'
string|"'/unittest.profile'"
newline|'\n'
name|'self'
op|'.'
name|'profile_log2'
op|'='
name|'ProfileLog'
op|'('
name|'self'
op|'.'
name|'log_filename_prefix2'
op|','
name|'True'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'pids2'
op|'='
op|'['
string|"'321'"
op|','
string|"'654'"
op|','
name|'str'
op|'('
name|'os'
op|'.'
name|'getpid'
op|'('
op|')'
op|')'
op|']'
newline|'\n'
name|'profiler2'
op|'='
name|'xprofile'
op|'.'
name|'get_profiler'
op|'('
string|"'eventlet.green.profile'"
op|')'
newline|'\n'
name|'for'
name|'pid'
name|'in'
name|'self'
op|'.'
name|'pids2'
op|':'
newline|'\n'
indent|'            '
name|'profiler2'
op|'.'
name|'runctx'
op|'('
string|"'import os;os.getcwd();'"
op|','
name|'globals'
op|'('
op|')'
op|','
name|'locals'
op|'('
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'profile_log2'
op|'.'
name|'dump_profile'
op|'('
name|'profiler2'
op|','
name|'pid'
op|')'
newline|'\n'
nl|'\n'
DECL|member|tearDown
dedent|''
dedent|''
name|'def'
name|'tearDown'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'profile_log1'
op|'.'
name|'clear'
op|'('
string|"'all'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'profile_log2'
op|'.'
name|'clear'
op|'('
string|"'all'"
op|')'
newline|'\n'
name|'shutil'
op|'.'
name|'rmtree'
op|'('
name|'self'
op|'.'
name|'dir1'
op|','
name|'ignore_errors'
op|'='
name|'True'
op|')'
newline|'\n'
name|'shutil'
op|'.'
name|'rmtree'
op|'('
name|'self'
op|'.'
name|'dir2'
op|','
name|'ignore_errors'
op|'='
name|'True'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_all_pids
dedent|''
name|'def'
name|'test_get_all_pids'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'self'
op|'.'
name|'profile_log1'
op|'.'
name|'get_all_pids'
op|'('
op|')'
op|','
nl|'\n'
name|'sorted'
op|'('
name|'self'
op|'.'
name|'pids1'
op|','
name|'reverse'
op|'='
name|'True'
op|')'
op|')'
newline|'\n'
name|'for'
name|'pid'
name|'in'
name|'self'
op|'.'
name|'profile_log2'
op|'.'
name|'get_all_pids'
op|'('
op|')'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'assertTrue'
op|'('
name|'pid'
op|'.'
name|'split'
op|'('
string|"'-'"
op|')'
op|'['
number|'0'
op|']'
name|'in'
name|'self'
op|'.'
name|'pids2'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_clear
dedent|''
dedent|''
name|'def'
name|'test_clear'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'profile_log1'
op|'.'
name|'clear'
op|'('
string|"'123'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertFalse'
op|'('
name|'os'
op|'.'
name|'path'
op|'.'
name|'exists'
op|'('
name|'self'
op|'.'
name|'log_filename_prefix1'
op|'+'
string|"'123'"
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'profile_log1'
op|'.'
name|'clear'
op|'('
string|"'current'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertFalse'
op|'('
name|'os'
op|'.'
name|'path'
op|'.'
name|'exists'
op|'('
name|'self'
op|'.'
name|'log_filename_prefix1'
op|'+'
nl|'\n'
name|'str'
op|'('
name|'os'
op|'.'
name|'getpid'
op|'('
op|')'
op|')'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'profile_log1'
op|'.'
name|'clear'
op|'('
string|"'all'"
op|')'
newline|'\n'
name|'for'
name|'pid'
name|'in'
name|'self'
op|'.'
name|'pids1'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'assertFalse'
op|'('
name|'os'
op|'.'
name|'path'
op|'.'
name|'exists'
op|'('
name|'self'
op|'.'
name|'log_filename_prefix1'
op|'+'
name|'pid'
op|')'
op|')'
newline|'\n'
nl|'\n'
dedent|''
name|'self'
op|'.'
name|'profile_log2'
op|'.'
name|'clear'
op|'('
string|"'321'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertFalse'
op|'('
name|'os'
op|'.'
name|'path'
op|'.'
name|'exists'
op|'('
name|'self'
op|'.'
name|'log_filename_prefix2'
op|'+'
string|"'321'"
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'profile_log2'
op|'.'
name|'clear'
op|'('
string|"'current'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertFalse'
op|'('
name|'os'
op|'.'
name|'path'
op|'.'
name|'exists'
op|'('
name|'self'
op|'.'
name|'log_filename_prefix2'
op|'+'
nl|'\n'
name|'str'
op|'('
name|'os'
op|'.'
name|'getpid'
op|'('
op|')'
op|')'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'profile_log2'
op|'.'
name|'clear'
op|'('
string|"'all'"
op|')'
newline|'\n'
name|'for'
name|'pid'
name|'in'
name|'self'
op|'.'
name|'pids2'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'assertFalse'
op|'('
name|'os'
op|'.'
name|'path'
op|'.'
name|'exists'
op|'('
name|'self'
op|'.'
name|'log_filename_prefix2'
op|'+'
name|'pid'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_logfiles
dedent|''
dedent|''
name|'def'
name|'test_get_logfiles'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'log_files'
op|'='
name|'self'
op|'.'
name|'profile_log1'
op|'.'
name|'get_logfiles'
op|'('
string|"'all'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'len'
op|'('
name|'log_files'
op|')'
op|','
number|'3'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'len'
op|'('
name|'log_files'
op|')'
op|','
name|'len'
op|'('
name|'self'
op|'.'
name|'pids1'
op|')'
op|')'
newline|'\n'
name|'log_files'
op|'='
name|'self'
op|'.'
name|'profile_log1'
op|'.'
name|'get_logfiles'
op|'('
string|"'current'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'len'
op|'('
name|'log_files'
op|')'
op|','
number|'1'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'log_files'
op|','
op|'['
name|'self'
op|'.'
name|'log_filename_prefix1'
nl|'\n'
op|'+'
name|'str'
op|'('
name|'os'
op|'.'
name|'getpid'
op|'('
op|')'
op|')'
op|']'
op|')'
newline|'\n'
name|'log_files'
op|'='
name|'self'
op|'.'
name|'profile_log1'
op|'.'
name|'get_logfiles'
op|'('
name|'self'
op|'.'
name|'pids1'
op|'['
number|'0'
op|']'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'len'
op|'('
name|'log_files'
op|')'
op|','
number|'1'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'log_files'
op|','
op|'['
name|'self'
op|'.'
name|'log_filename_prefix1'
nl|'\n'
op|'+'
name|'self'
op|'.'
name|'pids1'
op|'['
number|'0'
op|']'
op|']'
op|')'
newline|'\n'
name|'log_files'
op|'='
name|'self'
op|'.'
name|'profile_log2'
op|'.'
name|'get_logfiles'
op|'('
string|"'all'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'len'
op|'('
name|'log_files'
op|')'
op|','
number|'3'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'len'
op|'('
name|'log_files'
op|')'
op|','
name|'len'
op|'('
name|'self'
op|'.'
name|'pids2'
op|')'
op|')'
newline|'\n'
name|'log_files'
op|'='
name|'self'
op|'.'
name|'profile_log2'
op|'.'
name|'get_logfiles'
op|'('
string|"'current'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'len'
op|'('
name|'log_files'
op|')'
op|','
number|'1'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertTrue'
op|'('
name|'log_files'
op|'['
number|'0'
op|']'
op|'.'
name|'find'
op|'('
name|'self'
op|'.'
name|'log_filename_prefix2'
op|'+'
nl|'\n'
name|'str'
op|'('
name|'os'
op|'.'
name|'getpid'
op|'('
op|')'
op|')'
op|')'
op|'>'
op|'-'
number|'1'
op|')'
newline|'\n'
name|'log_files'
op|'='
name|'self'
op|'.'
name|'profile_log2'
op|'.'
name|'get_logfiles'
op|'('
name|'self'
op|'.'
name|'pids2'
op|'['
number|'0'
op|']'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'len'
op|'('
name|'log_files'
op|')'
op|','
number|'1'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertTrue'
op|'('
name|'log_files'
op|'['
number|'0'
op|']'
op|'.'
name|'find'
op|'('
name|'self'
op|'.'
name|'log_filename_prefix2'
op|'+'
nl|'\n'
name|'self'
op|'.'
name|'pids2'
op|'['
number|'0'
op|']'
op|')'
op|'>'
op|'-'
number|'1'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_dump_profile
dedent|''
name|'def'
name|'test_dump_profile'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'prof'
op|'='
name|'xprofile'
op|'.'
name|'get_profiler'
op|'('
string|"'eventlet.green.profile'"
op|')'
newline|'\n'
name|'prof'
op|'.'
name|'runctx'
op|'('
string|"'import os;os.getcwd();'"
op|','
name|'globals'
op|'('
op|')'
op|','
name|'locals'
op|'('
op|')'
op|')'
newline|'\n'
name|'prof'
op|'.'
name|'create_stats'
op|'('
op|')'
newline|'\n'
name|'pfn'
op|'='
name|'self'
op|'.'
name|'profile_log1'
op|'.'
name|'dump_profile'
op|'('
name|'prof'
op|','
name|'os'
op|'.'
name|'getpid'
op|'('
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertTrue'
op|'('
name|'os'
op|'.'
name|'path'
op|'.'
name|'exists'
op|'('
name|'pfn'
op|')'
op|')'
newline|'\n'
name|'os'
op|'.'
name|'remove'
op|'('
name|'pfn'
op|')'
newline|'\n'
name|'pfn'
op|'='
name|'self'
op|'.'
name|'profile_log2'
op|'.'
name|'dump_profile'
op|'('
name|'prof'
op|','
name|'os'
op|'.'
name|'getpid'
op|'('
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertTrue'
op|'('
name|'os'
op|'.'
name|'path'
op|'.'
name|'exists'
op|'('
name|'pfn'
op|')'
op|')'
newline|'\n'
name|'os'
op|'.'
name|'remove'
op|'('
name|'pfn'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|Test_html_viewer
dedent|''
dedent|''
name|'class'
name|'Test_html_viewer'
op|'('
name|'unittest'
op|'.'
name|'TestCase'
op|')'
op|':'
newline|'\n'
nl|'\n'
DECL|member|setUp
indent|'    '
name|'def'
name|'setUp'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'xprofile'
name|'is'
name|'None'
op|':'
newline|'\n'
indent|'            '
name|'raise'
name|'SkipTest'
newline|'\n'
dedent|''
name|'self'
op|'.'
name|'app'
op|'='
name|'ProfileMiddleware'
op|'('
name|'FakeApp'
op|','
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'log_files'
op|'='
op|'['
op|']'
newline|'\n'
name|'self'
op|'.'
name|'tempdir'
op|'='
name|'tempfile'
op|'.'
name|'mkdtemp'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'log_filename_prefix'
op|'='
name|'self'
op|'.'
name|'tempdir'
op|'+'
string|"'/unittest.profile'"
newline|'\n'
name|'self'
op|'.'
name|'profile_log'
op|'='
name|'ProfileLog'
op|'('
name|'self'
op|'.'
name|'log_filename_prefix'
op|','
name|'False'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'pids'
op|'='
op|'['
string|"'123'"
op|','
string|"'456'"
op|','
name|'str'
op|'('
name|'os'
op|'.'
name|'getpid'
op|'('
op|')'
op|')'
op|']'
newline|'\n'
name|'profiler'
op|'='
name|'xprofile'
op|'.'
name|'get_profiler'
op|'('
string|"'eventlet.green.profile'"
op|')'
newline|'\n'
name|'for'
name|'pid'
name|'in'
name|'self'
op|'.'
name|'pids'
op|':'
newline|'\n'
indent|'            '
name|'profiler'
op|'.'
name|'runctx'
op|'('
string|"'import os;os.getcwd();'"
op|','
name|'globals'
op|'('
op|')'
op|','
name|'locals'
op|'('
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'log_files'
op|'.'
name|'append'
op|'('
name|'self'
op|'.'
name|'profile_log'
op|'.'
name|'dump_profile'
op|'('
name|'profiler'
op|','
name|'pid'
op|')'
op|')'
newline|'\n'
dedent|''
name|'self'
op|'.'
name|'viewer'
op|'='
name|'HTMLViewer'
op|'('
string|"'__profile__'"
op|','
string|"'eventlet.green.profile'"
op|','
nl|'\n'
name|'self'
op|'.'
name|'profile_log'
op|')'
newline|'\n'
name|'body'
op|'='
op|'('
string|'b"profile=123&profile=456&sort=time&sort=nc&limit=10"'
nl|'\n'
string|'b"&fulldirs=1&nfl_filter=getcwd&query=query&metric=nc"'
op|')'
newline|'\n'
name|'wsgi_input'
op|'='
name|'BytesIO'
op|'('
name|'body'
op|')'
newline|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'GET'"
op|','
nl|'\n'
string|"'QUERY_STRING'"
op|':'
string|"'profile=all'"
op|','
nl|'\n'
string|"'wsgi.input'"
op|':'
name|'wsgi_input'
op|'}'
newline|'\n'
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/__profile__/'"
op|','
name|'environ'
op|'='
name|'environ'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'query_dict'
op|'='
name|'self'
op|'.'
name|'app'
op|'.'
name|'_combine_body_qs'
op|'('
name|'req'
op|')'
newline|'\n'
nl|'\n'
DECL|member|tearDown
dedent|''
name|'def'
name|'tearDown'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'shutil'
op|'.'
name|'rmtree'
op|'('
name|'self'
op|'.'
name|'tempdir'
op|','
name|'ignore_errors'
op|'='
name|'True'
op|')'
newline|'\n'
nl|'\n'
DECL|member|fake_call_back
dedent|''
name|'def'
name|'fake_call_back'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'pass'
newline|'\n'
nl|'\n'
DECL|member|test_get_param
dedent|''
name|'def'
name|'test_get_param'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'query_dict'
op|'='
name|'self'
op|'.'
name|'query_dict'
newline|'\n'
name|'get_param'
op|'='
name|'self'
op|'.'
name|'viewer'
op|'.'
name|'_get_param'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'get_param'
op|'('
name|'query_dict'
op|','
string|"'profile'"
op|','
string|"'current'"
op|','
name|'True'
op|')'
op|','
nl|'\n'
op|'['
string|"'123'"
op|','
string|"'456'"
op|']'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'get_param'
op|'('
name|'query_dict'
op|','
string|"'profile'"
op|','
string|"'current'"
op|')'
op|','
string|"'123'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'get_param'
op|'('
name|'query_dict'
op|','
string|"'sort'"
op|','
string|"'time'"
op|')'
op|','
string|"'time'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'get_param'
op|'('
name|'query_dict'
op|','
string|"'sort'"
op|','
string|"'time'"
op|','
name|'True'
op|')'
op|','
nl|'\n'
op|'['
string|"'time'"
op|','
string|"'nc'"
op|']'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'get_param'
op|'('
name|'query_dict'
op|','
string|"'limit'"
op|','
op|'-'
number|'1'
op|')'
op|','
number|'10'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'get_param'
op|'('
name|'query_dict'
op|','
string|"'fulldirs'"
op|','
string|"'0'"
op|')'
op|','
string|"'1'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'get_param'
op|'('
name|'query_dict'
op|','
string|"'nfl_filter'"
op|','
string|"''"
op|')'
op|','
string|"'getcwd'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'get_param'
op|'('
name|'query_dict'
op|','
string|"'query'"
op|','
string|"''"
op|')'
op|','
string|"'query'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'get_param'
op|'('
name|'query_dict'
op|','
string|"'metric'"
op|','
string|"'time'"
op|')'
op|','
string|"'nc'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'get_param'
op|'('
name|'query_dict'
op|','
string|"'format'"
op|','
string|"'default'"
op|')'
op|','
string|"'default'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_render
dedent|''
name|'def'
name|'test_render'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'url'
op|'='
string|"'http://localhost:8080/__profile__'"
newline|'\n'
name|'path_entries'
op|'='
op|'['
string|"'/__profile__'"
op|'.'
name|'split'
op|'('
string|"'/'"
op|')'
op|','
nl|'\n'
string|"'/__profile__/'"
op|'.'
name|'split'
op|'('
string|"'/'"
op|')'
op|','
nl|'\n'
string|"'/__profile__/123'"
op|'.'
name|'split'
op|'('
string|"'/'"
op|')'
op|','
nl|'\n'
string|"'/__profile__/123/'"
op|'.'
name|'split'
op|'('
string|"'/'"
op|')'
op|','
nl|'\n'
string|"'/__profile__/123/:0(getcwd)'"
op|'.'
name|'split'
op|'('
string|"'/'"
op|')'
op|','
nl|'\n'
string|"'/__profile__/all'"
op|'.'
name|'split'
op|'('
string|"'/'"
op|')'
op|','
nl|'\n'
string|"'/__profile__/all/'"
op|'.'
name|'split'
op|'('
string|"'/'"
op|')'
op|','
nl|'\n'
string|"'/__profile__/all/:0(getcwd)'"
op|'.'
name|'split'
op|'('
string|"'/'"
op|')'
op|','
nl|'\n'
string|"'/__profile__/current'"
op|'.'
name|'split'
op|'('
string|"'/'"
op|')'
op|','
nl|'\n'
string|"'/__profile__/current/'"
op|'.'
name|'split'
op|'('
string|"'/'"
op|')'
op|','
nl|'\n'
string|"'/__profile__/current/:0(getcwd)'"
op|'.'
name|'split'
op|'('
string|"'/'"
op|')'
op|']'
newline|'\n'
nl|'\n'
name|'content'
op|','
name|'headers'
op|'='
name|'self'
op|'.'
name|'viewer'
op|'.'
name|'render'
op|'('
name|'url'
op|','
string|"'GET'"
op|','
name|'path_entries'
op|'['
number|'0'
op|']'
op|','
nl|'\n'
name|'self'
op|'.'
name|'query_dict'
op|','
name|'None'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertTrue'
op|'('
name|'content'
name|'is'
name|'not'
name|'None'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'headers'
op|','
op|'['
op|'('
string|"'content-type'"
op|','
string|"'text/html'"
op|')'
op|']'
op|')'
newline|'\n'
nl|'\n'
name|'content'
op|','
name|'headers'
op|'='
name|'self'
op|'.'
name|'viewer'
op|'.'
name|'render'
op|'('
name|'url'
op|','
string|"'POST'"
op|','
name|'path_entries'
op|'['
number|'0'
op|']'
op|','
nl|'\n'
name|'self'
op|'.'
name|'query_dict'
op|','
name|'None'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertTrue'
op|'('
name|'content'
name|'is'
name|'not'
name|'None'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'headers'
op|','
op|'['
op|'('
string|"'content-type'"
op|','
string|"'text/html'"
op|')'
op|']'
op|')'
newline|'\n'
nl|'\n'
name|'plot_dict'
op|'='
name|'self'
op|'.'
name|'query_dict'
op|'.'
name|'copy'
op|'('
op|')'
newline|'\n'
name|'plot_dict'
op|'['
string|"'plot'"
op|']'
op|'='
op|'['
string|"'plot'"
op|']'
newline|'\n'
name|'if'
name|'PLOTLIB_INSTALLED'
op|':'
newline|'\n'
indent|'            '
name|'content'
op|','
name|'headers'
op|'='
name|'self'
op|'.'
name|'viewer'
op|'.'
name|'render'
op|'('
name|'url'
op|','
string|"'POST'"
op|','
name|'path_entries'
op|'['
number|'0'
op|']'
op|','
nl|'\n'
name|'plot_dict'
op|','
name|'None'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'headers'
op|','
op|'['
op|'('
string|"'content-type'"
op|','
string|"'image/jpg'"
op|')'
op|']'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'assertRaises'
op|'('
name|'PLOTLIBNotInstalled'
op|','
name|'self'
op|'.'
name|'viewer'
op|'.'
name|'render'
op|','
nl|'\n'
name|'url'
op|','
string|"'POST'"
op|','
name|'path_entries'
op|'['
number|'0'
op|']'
op|','
name|'plot_dict'
op|','
name|'None'
op|')'
newline|'\n'
nl|'\n'
dedent|''
name|'clear_dict'
op|'='
name|'self'
op|'.'
name|'query_dict'
op|'.'
name|'copy'
op|'('
op|')'
newline|'\n'
name|'clear_dict'
op|'['
string|"'clear'"
op|']'
op|'='
op|'['
string|"'clear'"
op|']'
newline|'\n'
name|'del'
name|'clear_dict'
op|'['
string|"'query'"
op|']'
newline|'\n'
name|'clear_dict'
op|'['
string|"'profile'"
op|']'
op|'='
op|'['
string|"'xxx'"
op|']'
newline|'\n'
name|'content'
op|','
name|'headers'
op|'='
name|'self'
op|'.'
name|'viewer'
op|'.'
name|'render'
op|'('
name|'url'
op|','
string|"'POST'"
op|','
name|'path_entries'
op|'['
number|'0'
op|']'
op|','
nl|'\n'
name|'clear_dict'
op|','
name|'None'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'headers'
op|','
op|'['
op|'('
string|"'content-type'"
op|','
string|"'text/html'"
op|')'
op|']'
op|')'
newline|'\n'
nl|'\n'
name|'download_dict'
op|'='
name|'self'
op|'.'
name|'query_dict'
op|'.'
name|'copy'
op|'('
op|')'
newline|'\n'
name|'download_dict'
op|'['
string|"'download'"
op|']'
op|'='
op|'['
string|"'download'"
op|']'
newline|'\n'
name|'content'
op|','
name|'headers'
op|'='
name|'self'
op|'.'
name|'viewer'
op|'.'
name|'render'
op|'('
name|'url'
op|','
string|"'POST'"
op|','
name|'path_entries'
op|'['
number|'0'
op|']'
op|','
nl|'\n'
name|'download_dict'
op|','
name|'None'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertTrue'
op|'('
name|'headers'
op|'=='
op|'['
op|'('
string|"'content-type'"
op|','
nl|'\n'
name|'self'
op|'.'
name|'viewer'
op|'.'
name|'format_dict'
op|'['
string|"'default'"
op|']'
op|')'
op|']'
op|')'
newline|'\n'
nl|'\n'
name|'content'
op|','
name|'headers'
op|'='
name|'self'
op|'.'
name|'viewer'
op|'.'
name|'render'
op|'('
name|'url'
op|','
string|"'GET'"
op|','
name|'path_entries'
op|'['
number|'1'
op|']'
op|','
nl|'\n'
name|'self'
op|'.'
name|'query_dict'
op|','
name|'None'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertTrue'
op|'('
name|'isinstance'
op|'('
name|'json'
op|'.'
name|'loads'
op|'('
name|'content'
op|')'
op|','
name|'dict'
op|')'
op|')'
newline|'\n'
nl|'\n'
name|'for'
name|'method'
name|'in'
op|'['
string|"'HEAD'"
op|','
string|"'PUT'"
op|','
string|"'DELETE'"
op|','
string|"'XYZMethod'"
op|']'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'assertRaises'
op|'('
name|'MethodNotAllowed'
op|','
name|'self'
op|'.'
name|'viewer'
op|'.'
name|'render'
op|','
name|'url'
op|','
nl|'\n'
name|'method'
op|','
name|'path_entries'
op|'['
number|'10'
op|']'
op|','
name|'self'
op|'.'
name|'query_dict'
op|','
name|'None'
op|')'
newline|'\n'
nl|'\n'
dedent|''
name|'for'
name|'entry'
name|'in'
name|'path_entries'
op|'['
number|'2'
op|':'
op|']'
op|':'
newline|'\n'
indent|'            '
name|'download_dict'
op|'['
string|"'format'"
op|']'
op|'='
string|"'default'"
newline|'\n'
name|'content'
op|','
name|'headers'
op|'='
name|'self'
op|'.'
name|'viewer'
op|'.'
name|'render'
op|'('
name|'url'
op|','
string|"'GET'"
op|','
name|'entry'
op|','
nl|'\n'
name|'download_dict'
op|','
name|'None'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertTrue'
op|'('
nl|'\n'
op|'('
string|"'content-type'"
op|','
name|'self'
op|'.'
name|'viewer'
op|'.'
name|'format_dict'
op|'['
string|"'default'"
op|']'
op|')'
nl|'\n'
name|'in'
name|'headers'
op|','
name|'entry'
op|')'
newline|'\n'
name|'download_dict'
op|'['
string|"'format'"
op|']'
op|'='
string|"'json'"
newline|'\n'
name|'content'
op|','
name|'headers'
op|'='
name|'self'
op|'.'
name|'viewer'
op|'.'
name|'render'
op|'('
name|'url'
op|','
string|"'GET'"
op|','
name|'entry'
op|','
nl|'\n'
name|'download_dict'
op|','
name|'None'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertTrue'
op|'('
name|'isinstance'
op|'('
name|'json'
op|'.'
name|'loads'
op|'('
name|'content'
op|')'
op|','
name|'dict'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_index
dedent|''
dedent|''
name|'def'
name|'test_index'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'content'
op|','
name|'headers'
op|'='
name|'self'
op|'.'
name|'viewer'
op|'.'
name|'index_page'
op|'('
name|'self'
op|'.'
name|'log_files'
op|'['
number|'0'
op|':'
number|'1'
op|']'
op|','
nl|'\n'
name|'profile_id'
op|'='
string|"'current'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertTrue'
op|'('
name|'content'
op|'.'
name|'find'
op|'('
string|"'<html>'"
op|')'
op|'>'
op|'-'
number|'1'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertTrue'
op|'('
name|'headers'
op|'=='
op|'['
op|'('
string|"'content-type'"
op|','
string|"'text/html'"
op|')'
op|']'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_index_all
dedent|''
name|'def'
name|'test_index_all'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'content'
op|','
name|'headers'
op|'='
name|'self'
op|'.'
name|'viewer'
op|'.'
name|'index_page'
op|'('
name|'self'
op|'.'
name|'log_files'
op|','
nl|'\n'
name|'profile_id'
op|'='
string|"'all'"
op|')'
newline|'\n'
name|'for'
name|'f'
name|'in'
name|'self'
op|'.'
name|'log_files'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'assertTrue'
op|'('
name|'content'
op|'.'
name|'find'
op|'('
name|'f'
op|')'
op|'>'
number|'0'
op|','
name|'content'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertTrue'
op|'('
name|'headers'
op|'=='
op|'['
op|'('
string|"'content-type'"
op|','
string|"'text/html'"
op|')'
op|']'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_download
dedent|''
dedent|''
name|'def'
name|'test_download'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'content'
op|','
name|'headers'
op|'='
name|'self'
op|'.'
name|'viewer'
op|'.'
name|'download'
op|'('
name|'self'
op|'.'
name|'log_files'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertTrue'
op|'('
name|'content'
name|'is'
name|'not'
name|'None'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'headers'
op|','
op|'['
op|'('
string|"'content-type'"
op|','
nl|'\n'
name|'self'
op|'.'
name|'viewer'
op|'.'
name|'format_dict'
op|'['
string|"'default'"
op|']'
op|')'
op|']'
op|')'
newline|'\n'
name|'content'
op|','
name|'headers'
op|'='
name|'self'
op|'.'
name|'viewer'
op|'.'
name|'download'
op|'('
name|'self'
op|'.'
name|'log_files'
op|','
name|'sort'
op|'='
string|"'calls'"
op|','
nl|'\n'
name|'limit'
op|'='
number|'10'
op|','
name|'nfl_filter'
op|'='
string|"'os'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertTrue'
op|'('
name|'content'
name|'is'
name|'not'
name|'None'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'headers'
op|','
op|'['
op|'('
string|"'content-type'"
op|','
nl|'\n'
name|'self'
op|'.'
name|'viewer'
op|'.'
name|'format_dict'
op|'['
string|"'default'"
op|']'
op|')'
op|']'
op|')'
newline|'\n'
name|'content'
op|','
name|'headers'
op|'='
name|'self'
op|'.'
name|'viewer'
op|'.'
name|'download'
op|'('
name|'self'
op|'.'
name|'log_files'
op|','
nl|'\n'
name|'output_format'
op|'='
string|"'default'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'headers'
op|','
op|'['
op|'('
string|"'content-type'"
op|','
nl|'\n'
name|'self'
op|'.'
name|'viewer'
op|'.'
name|'format_dict'
op|'['
string|"'default'"
op|']'
op|')'
op|']'
op|')'
newline|'\n'
name|'content'
op|','
name|'headers'
op|'='
name|'self'
op|'.'
name|'viewer'
op|'.'
name|'download'
op|'('
name|'self'
op|'.'
name|'log_files'
op|','
nl|'\n'
name|'output_format'
op|'='
string|"'json'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertTrue'
op|'('
name|'isinstance'
op|'('
name|'json'
op|'.'
name|'loads'
op|'('
name|'content'
op|')'
op|','
name|'dict'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'headers'
op|','
op|'['
op|'('
string|"'content-type'"
op|','
nl|'\n'
name|'self'
op|'.'
name|'viewer'
op|'.'
name|'format_dict'
op|'['
string|"'json'"
op|']'
op|')'
op|']'
op|')'
newline|'\n'
name|'content'
op|','
name|'headers'
op|'='
name|'self'
op|'.'
name|'viewer'
op|'.'
name|'download'
op|'('
name|'self'
op|'.'
name|'log_files'
op|','
nl|'\n'
name|'output_format'
op|'='
string|"'csv'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'headers'
op|','
op|'['
op|'('
string|"'content-type'"
op|','
nl|'\n'
name|'self'
op|'.'
name|'viewer'
op|'.'
name|'format_dict'
op|'['
string|"'csv'"
op|']'
op|')'
op|']'
op|')'
newline|'\n'
name|'if'
name|'ODFLIB_INSTALLED'
op|':'
newline|'\n'
indent|'            '
name|'content'
op|','
name|'headers'
op|'='
name|'self'
op|'.'
name|'viewer'
op|'.'
name|'download'
op|'('
name|'self'
op|'.'
name|'log_files'
op|','
nl|'\n'
name|'output_format'
op|'='
string|"'ods'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'headers'
op|','
op|'['
op|'('
string|"'content-type'"
op|','
nl|'\n'
name|'self'
op|'.'
name|'viewer'
op|'.'
name|'format_dict'
op|'['
string|"'ods'"
op|']'
op|')'
op|']'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'assertRaises'
op|'('
name|'ODFLIBNotInstalled'
op|','
name|'self'
op|'.'
name|'viewer'
op|'.'
name|'download'
op|','
nl|'\n'
name|'self'
op|'.'
name|'log_files'
op|','
name|'output_format'
op|'='
string|"'ods'"
op|')'
newline|'\n'
dedent|''
name|'content'
op|','
name|'headers'
op|'='
name|'self'
op|'.'
name|'viewer'
op|'.'
name|'download'
op|'('
name|'self'
op|'.'
name|'log_files'
op|','
nl|'\n'
name|'nfl_filter'
op|'='
name|'__file__'
op|','
nl|'\n'
name|'output_format'
op|'='
string|"'python'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'headers'
op|','
op|'['
op|'('
string|"'content-type'"
op|','
nl|'\n'
name|'self'
op|'.'
name|'viewer'
op|'.'
name|'format_dict'
op|'['
string|"'python'"
op|']'
op|')'
op|']'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_plot
dedent|''
name|'def'
name|'test_plot'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'PLOTLIB_INSTALLED'
op|':'
newline|'\n'
indent|'            '
name|'content'
op|','
name|'headers'
op|'='
name|'self'
op|'.'
name|'viewer'
op|'.'
name|'plot'
op|'('
name|'self'
op|'.'
name|'log_files'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertTrue'
op|'('
name|'content'
name|'is'
name|'not'
name|'None'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'headers'
op|','
op|'['
op|'('
string|"'content-type'"
op|','
string|"'image/jpg'"
op|')'
op|']'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertRaises'
op|'('
name|'NotFoundException'
op|','
name|'self'
op|'.'
name|'viewer'
op|'.'
name|'plot'
op|','
op|'['
op|']'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'assertRaises'
op|'('
name|'PLOTLIBNotInstalled'
op|','
name|'self'
op|'.'
name|'viewer'
op|'.'
name|'plot'
op|','
nl|'\n'
name|'self'
op|'.'
name|'log_files'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_format_source_code
dedent|''
dedent|''
name|'def'
name|'test_format_source_code'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'osfile'
op|'='
name|'os'
op|'.'
name|'__file__'
op|'.'
name|'rstrip'
op|'('
string|"'c'"
op|')'
newline|'\n'
name|'nfl_os'
op|'='
string|"'%s:%d(%s)'"
op|'%'
op|'('
name|'osfile'
op|','
number|'136'
op|','
string|"'makedirs'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertIn'
op|'('
string|"'makedirs'"
op|','
name|'self'
op|'.'
name|'viewer'
op|'.'
name|'format_source_code'
op|'('
name|'nfl_os'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertNotIn'
op|'('
string|"'makedirsXYZ'"
op|','
name|'self'
op|'.'
name|'viewer'
op|'.'
name|'format_source_code'
op|'('
name|'nfl_os'
op|')'
op|')'
newline|'\n'
name|'nfl_illegal'
op|'='
string|"'%sc:136(makedirs)'"
op|'%'
name|'osfile'
newline|'\n'
name|'self'
op|'.'
name|'assertIn'
op|'('
name|'_'
op|'('
string|"'The file type are forbidden to access!'"
op|')'
op|','
nl|'\n'
name|'self'
op|'.'
name|'viewer'
op|'.'
name|'format_source_code'
op|'('
name|'nfl_illegal'
op|')'
op|')'
newline|'\n'
name|'nfl_not_exist'
op|'='
string|"'%s.py:136(makedirs)'"
op|'%'
name|'osfile'
newline|'\n'
name|'expected_msg'
op|'='
name|'_'
op|'('
string|"'Can not access the file %s.py.'"
op|')'
op|'%'
name|'osfile'
newline|'\n'
name|'self'
op|'.'
name|'assertIn'
op|'('
name|'expected_msg'
op|','
nl|'\n'
name|'self'
op|'.'
name|'viewer'
op|'.'
name|'format_source_code'
op|'('
name|'nfl_not_exist'
op|')'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|TestStats2
dedent|''
dedent|''
name|'class'
name|'TestStats2'
op|'('
name|'unittest'
op|'.'
name|'TestCase'
op|')'
op|':'
newline|'\n'
nl|'\n'
DECL|member|setUp
indent|'    '
name|'def'
name|'setUp'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'xprofile'
name|'is'
name|'None'
op|':'
newline|'\n'
indent|'            '
name|'raise'
name|'SkipTest'
newline|'\n'
dedent|''
name|'self'
op|'.'
name|'profile_file'
op|'='
name|'tempfile'
op|'.'
name|'mktemp'
op|'('
string|"'profile'"
op|','
string|"'unittest'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'profilers'
op|'='
op|'['
name|'xprofile'
op|'.'
name|'get_profiler'
op|'('
string|"'cProfile'"
op|')'
op|','
nl|'\n'
name|'xprofile'
op|'.'
name|'get_profiler'
op|'('
string|"'eventlet.green.profile'"
op|')'
op|']'
newline|'\n'
name|'for'
name|'p'
name|'in'
name|'self'
op|'.'
name|'profilers'
op|':'
newline|'\n'
indent|'            '
name|'p'
op|'.'
name|'runctx'
op|'('
string|"'import os;os.getcwd();'"
op|','
name|'globals'
op|'('
op|')'
op|','
name|'locals'
op|'('
op|')'
op|')'
newline|'\n'
name|'p'
op|'.'
name|'dump_stats'
op|'('
name|'self'
op|'.'
name|'profile_file'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'stats2'
op|'='
name|'Stats2'
op|'('
name|'self'
op|'.'
name|'profile_file'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'selections'
op|'='
op|'['
op|'['
string|"'getcwd'"
op|']'
op|','
op|'['
string|"'getcwd'"
op|','
op|'-'
number|'1'
op|']'
op|','
nl|'\n'
op|'['
string|"'getcwd'"
op|','
op|'-'
number|'10'
op|']'
op|','
op|'['
string|"'getcwd'"
op|','
number|'0.1'
op|']'
op|']'
newline|'\n'
nl|'\n'
DECL|member|tearDown
dedent|''
dedent|''
name|'def'
name|'tearDown'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'os'
op|'.'
name|'remove'
op|'('
name|'self'
op|'.'
name|'profile_file'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_func_to_dict
dedent|''
name|'def'
name|'test_func_to_dict'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'func'
op|'='
op|'['
string|"'profile.py'"
op|','
number|'100'
op|','
string|"'__call__'"
op|']'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
op|'{'
string|"'module'"
op|':'
string|"'profile.py'"
op|','
string|"'line'"
op|':'
number|'100'
op|','
string|"'function'"
op|':'
nl|'\n'
string|"'__call__'"
op|'}'
op|','
name|'self'
op|'.'
name|'stats2'
op|'.'
name|'func_to_dict'
op|'('
name|'func'
op|')'
op|')'
newline|'\n'
name|'func'
op|'='
op|'['
string|"''"
op|','
number|'0'
op|','
string|"'__call__'"
op|']'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
op|'{'
string|"'module'"
op|':'
string|"''"
op|','
string|"'line'"
op|':'
number|'0'
op|','
string|"'function'"
op|':'
nl|'\n'
string|"'__call__'"
op|'}'
op|','
name|'self'
op|'.'
name|'stats2'
op|'.'
name|'func_to_dict'
op|'('
name|'func'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_to_json
dedent|''
name|'def'
name|'test_to_json'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'for'
name|'selection'
name|'in'
name|'self'
op|'.'
name|'selections'
op|':'
newline|'\n'
indent|'            '
name|'js'
op|'='
name|'self'
op|'.'
name|'stats2'
op|'.'
name|'to_json'
op|'('
name|'selection'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertTrue'
op|'('
name|'isinstance'
op|'('
name|'json'
op|'.'
name|'loads'
op|'('
name|'js'
op|')'
op|','
name|'dict'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertTrue'
op|'('
name|'json'
op|'.'
name|'loads'
op|'('
name|'js'
op|')'
op|'['
string|"'stats'"
op|']'
name|'is'
name|'not'
name|'None'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertTrue'
op|'('
name|'json'
op|'.'
name|'loads'
op|'('
name|'js'
op|')'
op|'['
string|"'stats'"
op|']'
op|'['
number|'0'
op|']'
name|'is'
name|'not'
name|'None'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_to_ods
dedent|''
dedent|''
name|'def'
name|'test_to_ods'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'ODFLIB_INSTALLED'
op|':'
newline|'\n'
indent|'            '
name|'for'
name|'selection'
name|'in'
name|'self'
op|'.'
name|'selections'
op|':'
newline|'\n'
indent|'                '
name|'self'
op|'.'
name|'assertTrue'
op|'('
name|'self'
op|'.'
name|'stats2'
op|'.'
name|'to_ods'
op|'('
name|'selection'
op|')'
name|'is'
name|'not'
name|'None'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_to_csv
dedent|''
dedent|''
dedent|''
name|'def'
name|'test_to_csv'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'for'
name|'selection'
name|'in'
name|'self'
op|'.'
name|'selections'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'assertTrue'
op|'('
name|'self'
op|'.'
name|'stats2'
op|'.'
name|'to_csv'
op|'('
name|'selection'
op|')'
name|'is'
name|'not'
name|'None'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertTrue'
op|'('
string|"'function calls'"
name|'in'
name|'self'
op|'.'
name|'stats2'
op|'.'
name|'to_csv'
op|'('
name|'selection'
op|')'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
dedent|''
dedent|''
dedent|''
name|'if'
name|'__name__'
op|'=='
string|"'__main__'"
op|':'
newline|'\n'
indent|'    '
name|'unittest'
op|'.'
name|'main'
op|'('
op|')'
newline|'\n'
dedent|''
endmarker|''
end_unit
