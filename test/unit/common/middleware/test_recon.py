begin_unit
comment|'# Copyright (c) 2010-2012 OpenStack Foundation'
nl|'\n'
comment|'#'
nl|'\n'
comment|'# Licensed under the Apache License, Version 2.0 (the "License");'
nl|'\n'
comment|'# you may not use this file except in compliance with the License.'
nl|'\n'
comment|'# You may obtain a copy of the License at'
nl|'\n'
comment|'#'
nl|'\n'
comment|'#    http://www.apache.org/licenses/LICENSE-2.0'
nl|'\n'
comment|'#'
nl|'\n'
comment|'# Unless required by applicable law or agreed to in writing, software'
nl|'\n'
comment|'# distributed under the License is distributed on an "AS IS" BASIS,'
nl|'\n'
comment|'# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or'
nl|'\n'
comment|'# implied.'
nl|'\n'
comment|'# See the License for the specific language governing permissions and'
nl|'\n'
comment|'# limitations under the License.'
nl|'\n'
nl|'\n'
name|'import'
name|'unittest'
newline|'\n'
name|'from'
name|'unittest'
name|'import'
name|'TestCase'
newline|'\n'
name|'from'
name|'contextlib'
name|'import'
name|'contextmanager'
newline|'\n'
name|'from'
name|'posix'
name|'import'
name|'stat_result'
op|','
name|'statvfs_result'
newline|'\n'
name|'import'
name|'os'
newline|'\n'
name|'import'
name|'mock'
newline|'\n'
nl|'\n'
name|'import'
name|'swift'
op|'.'
name|'common'
op|'.'
name|'constraints'
newline|'\n'
name|'from'
name|'swift'
name|'import'
name|'__version__'
name|'as'
name|'swiftver'
newline|'\n'
name|'from'
name|'swift'
op|'.'
name|'common'
op|'.'
name|'swob'
name|'import'
name|'Request'
newline|'\n'
name|'from'
name|'swift'
op|'.'
name|'common'
op|'.'
name|'middleware'
name|'import'
name|'recon'
newline|'\n'
name|'from'
name|'swift'
op|'.'
name|'common'
op|'.'
name|'utils'
name|'import'
name|'json'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FakeApp
name|'class'
name|'FakeApp'
op|'('
name|'object'
op|')'
op|':'
newline|'\n'
DECL|member|__call__
indent|'    '
name|'def'
name|'__call__'
op|'('
name|'self'
op|','
name|'env'
op|','
name|'start_response'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
string|'"FAKE APP"'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|start_response
dedent|''
dedent|''
name|'def'
name|'start_response'
op|'('
op|'*'
name|'args'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'pass'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FakeFromCache
dedent|''
name|'class'
name|'FakeFromCache'
op|'('
name|'object'
op|')'
op|':'
newline|'\n'
nl|'\n'
DECL|member|__init__
indent|'    '
name|'def'
name|'__init__'
op|'('
name|'self'
op|','
name|'out'
op|'='
name|'None'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'fakeout'
op|'='
name|'out'
newline|'\n'
name|'self'
op|'.'
name|'fakeout_calls'
op|'='
op|'['
op|']'
newline|'\n'
nl|'\n'
DECL|member|fake_from_recon_cache
dedent|''
name|'def'
name|'fake_from_recon_cache'
op|'('
name|'self'
op|','
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'fakeout_calls'
op|'.'
name|'append'
op|'('
op|'('
name|'args'
op|','
name|'kwargs'
op|')'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'fakeout'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|OpenAndReadTester
dedent|''
dedent|''
name|'class'
name|'OpenAndReadTester'
op|'('
name|'object'
op|')'
op|':'
newline|'\n'
nl|'\n'
DECL|member|__init__
indent|'    '
name|'def'
name|'__init__'
op|'('
name|'self'
op|','
name|'output_iter'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'index'
op|'='
number|'0'
newline|'\n'
name|'self'
op|'.'
name|'out_len'
op|'='
name|'len'
op|'('
name|'output_iter'
op|')'
op|'-'
number|'1'
newline|'\n'
name|'self'
op|'.'
name|'data'
op|'='
name|'output_iter'
newline|'\n'
name|'self'
op|'.'
name|'output_iter'
op|'='
name|'iter'
op|'('
name|'output_iter'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'read_calls'
op|'='
op|'['
op|']'
newline|'\n'
name|'self'
op|'.'
name|'open_calls'
op|'='
op|'['
op|']'
newline|'\n'
nl|'\n'
DECL|member|__iter__
dedent|''
name|'def'
name|'__iter__'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
name|'self'
newline|'\n'
nl|'\n'
DECL|member|next
dedent|''
name|'def'
name|'next'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'self'
op|'.'
name|'index'
op|'=='
name|'self'
op|'.'
name|'out_len'
op|':'
newline|'\n'
indent|'            '
name|'raise'
name|'StopIteration'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'line'
op|'='
name|'self'
op|'.'
name|'data'
op|'['
name|'self'
op|'.'
name|'index'
op|']'
newline|'\n'
name|'self'
op|'.'
name|'index'
op|'+='
number|'1'
newline|'\n'
dedent|''
name|'return'
name|'line'
newline|'\n'
nl|'\n'
DECL|member|read
dedent|''
name|'def'
name|'read'
op|'('
name|'self'
op|','
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'read_calls'
op|'.'
name|'append'
op|'('
op|'('
name|'args'
op|','
name|'kwargs'
op|')'
op|')'
newline|'\n'
name|'try'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'self'
op|'.'
name|'output_iter'
op|'.'
name|'next'
op|'('
op|')'
newline|'\n'
dedent|''
name|'except'
name|'StopIteration'
op|':'
newline|'\n'
indent|'            '
name|'return'
string|"''"
newline|'\n'
nl|'\n'
dedent|''
dedent|''
op|'@'
name|'contextmanager'
newline|'\n'
DECL|member|open
name|'def'
name|'open'
op|'('
name|'self'
op|','
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'open_calls'
op|'.'
name|'append'
op|'('
op|'('
name|'args'
op|','
name|'kwargs'
op|')'
op|')'
newline|'\n'
name|'yield'
name|'self'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|MockOS
dedent|''
dedent|''
name|'class'
name|'MockOS'
op|'('
name|'object'
op|')'
op|':'
newline|'\n'
nl|'\n'
DECL|member|__init__
indent|'    '
name|'def'
name|'__init__'
op|'('
name|'self'
op|','
name|'ls_out'
op|'='
name|'None'
op|','
name|'im_out'
op|'='
name|'False'
op|','
name|'statvfs_out'
op|'='
name|'None'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'ls_output'
op|'='
name|'ls_out'
newline|'\n'
name|'self'
op|'.'
name|'ismount_output'
op|'='
name|'im_out'
newline|'\n'
name|'self'
op|'.'
name|'statvfs_output'
op|'='
name|'statvfs_out'
newline|'\n'
name|'self'
op|'.'
name|'listdir_calls'
op|'='
op|'['
op|']'
newline|'\n'
name|'self'
op|'.'
name|'statvfs_calls'
op|'='
op|'['
op|']'
newline|'\n'
name|'self'
op|'.'
name|'ismount_calls'
op|'='
op|'['
op|']'
newline|'\n'
nl|'\n'
DECL|member|fake_listdir
dedent|''
name|'def'
name|'fake_listdir'
op|'('
name|'self'
op|','
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'listdir_calls'
op|'.'
name|'append'
op|'('
op|'('
name|'args'
op|','
name|'kwargs'
op|')'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'ls_output'
newline|'\n'
nl|'\n'
DECL|member|fake_ismount
dedent|''
name|'def'
name|'fake_ismount'
op|'('
name|'self'
op|','
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'ismount_calls'
op|'.'
name|'append'
op|'('
op|'('
name|'args'
op|','
name|'kwargs'
op|')'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'ismount_output'
newline|'\n'
nl|'\n'
DECL|member|fake_statvfs
dedent|''
name|'def'
name|'fake_statvfs'
op|'('
name|'self'
op|','
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'statvfs_calls'
op|'.'
name|'append'
op|'('
op|'('
name|'args'
op|','
name|'kwargs'
op|')'
op|')'
newline|'\n'
name|'return'
name|'statvfs_result'
op|'('
name|'self'
op|'.'
name|'statvfs_output'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FakeRecon
dedent|''
dedent|''
name|'class'
name|'FakeRecon'
op|'('
name|'object'
op|')'
op|':'
newline|'\n'
nl|'\n'
DECL|member|__init__
indent|'    '
name|'def'
name|'__init__'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'fake_replication_rtype'
op|'='
name|'None'
newline|'\n'
name|'self'
op|'.'
name|'fake_updater_rtype'
op|'='
name|'None'
newline|'\n'
name|'self'
op|'.'
name|'fake_auditor_rtype'
op|'='
name|'None'
newline|'\n'
name|'self'
op|'.'
name|'fake_expirer_rtype'
op|'='
name|'None'
newline|'\n'
nl|'\n'
DECL|member|fake_mem
dedent|''
name|'def'
name|'fake_mem'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
op|'{'
string|"'memtest'"
op|':'
string|'"1"'
op|'}'
newline|'\n'
nl|'\n'
DECL|member|fake_load
dedent|''
name|'def'
name|'fake_load'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
op|'{'
string|"'loadtest'"
op|':'
string|'"1"'
op|'}'
newline|'\n'
nl|'\n'
DECL|member|fake_async
dedent|''
name|'def'
name|'fake_async'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
op|'{'
string|"'asynctest'"
op|':'
string|'"1"'
op|'}'
newline|'\n'
nl|'\n'
DECL|member|fake_get_device_info
dedent|''
name|'def'
name|'fake_get_device_info'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
op|'{'
string|'"/srv/1/node"'
op|':'
op|'['
string|'"sdb1"'
op|']'
op|'}'
newline|'\n'
nl|'\n'
DECL|member|fake_replication
dedent|''
name|'def'
name|'fake_replication'
op|'('
name|'self'
op|','
name|'recon_type'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'fake_replication_rtype'
op|'='
name|'recon_type'
newline|'\n'
name|'return'
op|'{'
string|"'replicationtest'"
op|':'
string|'"1"'
op|'}'
newline|'\n'
nl|'\n'
DECL|member|fake_updater
dedent|''
name|'def'
name|'fake_updater'
op|'('
name|'self'
op|','
name|'recon_type'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'fake_updater_rtype'
op|'='
name|'recon_type'
newline|'\n'
name|'return'
op|'{'
string|"'updatertest'"
op|':'
string|'"1"'
op|'}'
newline|'\n'
nl|'\n'
DECL|member|fake_auditor
dedent|''
name|'def'
name|'fake_auditor'
op|'('
name|'self'
op|','
name|'recon_type'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'fake_auditor_rtype'
op|'='
name|'recon_type'
newline|'\n'
name|'return'
op|'{'
string|"'auditortest'"
op|':'
string|'"1"'
op|'}'
newline|'\n'
nl|'\n'
DECL|member|fake_expirer
dedent|''
name|'def'
name|'fake_expirer'
op|'('
name|'self'
op|','
name|'recon_type'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'fake_expirer_rtype'
op|'='
name|'recon_type'
newline|'\n'
name|'return'
op|'{'
string|"'expirertest'"
op|':'
string|'"1"'
op|'}'
newline|'\n'
nl|'\n'
DECL|member|fake_mounted
dedent|''
name|'def'
name|'fake_mounted'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
op|'{'
string|"'mountedtest'"
op|':'
string|'"1"'
op|'}'
newline|'\n'
nl|'\n'
DECL|member|fake_unmounted
dedent|''
name|'def'
name|'fake_unmounted'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
op|'{'
string|"'unmountedtest'"
op|':'
string|'"1"'
op|'}'
newline|'\n'
nl|'\n'
DECL|member|fake_no_unmounted
dedent|''
name|'def'
name|'fake_no_unmounted'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
op|'['
op|']'
newline|'\n'
nl|'\n'
DECL|member|fake_diskusage
dedent|''
name|'def'
name|'fake_diskusage'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
op|'{'
string|"'diskusagetest'"
op|':'
string|'"1"'
op|'}'
newline|'\n'
nl|'\n'
DECL|member|fake_ringmd5
dedent|''
name|'def'
name|'fake_ringmd5'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
op|'{'
string|"'ringmd5test'"
op|':'
string|'"1"'
op|'}'
newline|'\n'
nl|'\n'
DECL|member|fake_quarantined
dedent|''
name|'def'
name|'fake_quarantined'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
op|'{'
string|"'quarantinedtest'"
op|':'
string|'"1"'
op|'}'
newline|'\n'
nl|'\n'
DECL|member|fake_sockstat
dedent|''
name|'def'
name|'fake_sockstat'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
op|'{'
string|"'sockstattest'"
op|':'
string|'"1"'
op|'}'
newline|'\n'
nl|'\n'
DECL|member|nocontent
dedent|''
name|'def'
name|'nocontent'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
name|'None'
newline|'\n'
nl|'\n'
DECL|member|raise_IOError
dedent|''
name|'def'
name|'raise_IOError'
op|'('
name|'self'
op|','
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'raise'
name|'IOError'
newline|'\n'
nl|'\n'
DECL|member|raise_ValueError
dedent|''
name|'def'
name|'raise_ValueError'
op|'('
name|'self'
op|','
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'raise'
name|'ValueError'
newline|'\n'
nl|'\n'
DECL|member|raise_Exception
dedent|''
name|'def'
name|'raise_Exception'
op|'('
name|'self'
op|','
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'raise'
name|'Exception'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|TestReconSuccess
dedent|''
dedent|''
name|'class'
name|'TestReconSuccess'
op|'('
name|'TestCase'
op|')'
op|':'
newline|'\n'
nl|'\n'
DECL|member|setUp
indent|'    '
name|'def'
name|'setUp'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'app'
op|'='
name|'recon'
op|'.'
name|'ReconMiddleware'
op|'('
name|'FakeApp'
op|'('
op|')'
op|','
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'mockos'
op|'='
name|'MockOS'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'fakecache'
op|'='
name|'FakeFromCache'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'real_listdir'
op|'='
name|'os'
op|'.'
name|'listdir'
newline|'\n'
name|'self'
op|'.'
name|'real_ismount'
op|'='
name|'swift'
op|'.'
name|'common'
op|'.'
name|'constraints'
op|'.'
name|'ismount'
newline|'\n'
name|'self'
op|'.'
name|'real_statvfs'
op|'='
name|'os'
op|'.'
name|'statvfs'
newline|'\n'
name|'os'
op|'.'
name|'listdir'
op|'='
name|'self'
op|'.'
name|'mockos'
op|'.'
name|'fake_listdir'
newline|'\n'
name|'swift'
op|'.'
name|'common'
op|'.'
name|'constraints'
op|'.'
name|'ismount'
op|'='
name|'self'
op|'.'
name|'mockos'
op|'.'
name|'fake_ismount'
newline|'\n'
name|'os'
op|'.'
name|'statvfs'
op|'='
name|'self'
op|'.'
name|'mockos'
op|'.'
name|'fake_statvfs'
newline|'\n'
name|'self'
op|'.'
name|'real_from_cache'
op|'='
name|'self'
op|'.'
name|'app'
op|'.'
name|'_from_recon_cache'
newline|'\n'
name|'self'
op|'.'
name|'app'
op|'.'
name|'_from_recon_cache'
op|'='
name|'self'
op|'.'
name|'fakecache'
op|'.'
name|'fake_from_recon_cache'
newline|'\n'
name|'self'
op|'.'
name|'frecon'
op|'='
name|'FakeRecon'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|tearDown
dedent|''
name|'def'
name|'tearDown'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'os'
op|'.'
name|'listdir'
op|'='
name|'self'
op|'.'
name|'real_listdir'
newline|'\n'
name|'swift'
op|'.'
name|'common'
op|'.'
name|'constraints'
op|'.'
name|'ismount'
op|'='
name|'self'
op|'.'
name|'real_ismount'
newline|'\n'
name|'os'
op|'.'
name|'statvfs'
op|'='
name|'self'
op|'.'
name|'real_statvfs'
newline|'\n'
name|'del'
name|'self'
op|'.'
name|'mockos'
newline|'\n'
name|'self'
op|'.'
name|'app'
op|'.'
name|'_from_recon_cache'
op|'='
name|'self'
op|'.'
name|'real_from_cache'
newline|'\n'
name|'del'
name|'self'
op|'.'
name|'fakecache'
newline|'\n'
nl|'\n'
DECL|member|test_from_recon_cache
dedent|''
name|'def'
name|'test_from_recon_cache'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'oart'
op|'='
name|'OpenAndReadTester'
op|'('
op|'['
string|'\'{"notneeded": 5, "testkey1": "canhazio"}\''
op|']'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'app'
op|'.'
name|'_from_recon_cache'
op|'='
name|'self'
op|'.'
name|'real_from_cache'
newline|'\n'
name|'rv'
op|'='
name|'self'
op|'.'
name|'app'
op|'.'
name|'_from_recon_cache'
op|'('
op|'['
string|"'testkey1'"
op|','
string|"'notpresentkey'"
op|']'
op|','
nl|'\n'
string|"'test.cache'"
op|','
name|'openr'
op|'='
name|'oart'
op|'.'
name|'open'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'oart'
op|'.'
name|'read_calls'
op|','
op|'['
op|'('
op|'('
op|')'
op|','
op|'{'
op|'}'
op|')'
op|']'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'oart'
op|'.'
name|'open_calls'
op|','
op|'['
op|'('
op|'('
string|"'test.cache'"
op|','
string|"'r'"
op|')'
op|','
op|'{'
op|'}'
op|')'
op|']'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'rv'
op|','
op|'{'
string|"'notpresentkey'"
op|':'
name|'None'
op|','
string|"'testkey1'"
op|':'
string|"'canhazio'"
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'app'
op|'.'
name|'_from_recon_cache'
op|'='
name|'self'
op|'.'
name|'fakecache'
op|'.'
name|'fake_from_recon_cache'
newline|'\n'
nl|'\n'
DECL|member|test_from_recon_cache_ioerror
dedent|''
name|'def'
name|'test_from_recon_cache_ioerror'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'oart'
op|'='
name|'self'
op|'.'
name|'frecon'
op|'.'
name|'raise_IOError'
newline|'\n'
name|'self'
op|'.'
name|'app'
op|'.'
name|'_from_recon_cache'
op|'='
name|'self'
op|'.'
name|'real_from_cache'
newline|'\n'
name|'rv'
op|'='
name|'self'
op|'.'
name|'app'
op|'.'
name|'_from_recon_cache'
op|'('
op|'['
string|"'testkey1'"
op|','
string|"'notpresentkey'"
op|']'
op|','
nl|'\n'
string|"'test.cache'"
op|','
name|'openr'
op|'='
name|'oart'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'rv'
op|','
op|'{'
string|"'notpresentkey'"
op|':'
name|'None'
op|','
string|"'testkey1'"
op|':'
name|'None'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'app'
op|'.'
name|'_from_recon_cache'
op|'='
name|'self'
op|'.'
name|'fakecache'
op|'.'
name|'fake_from_recon_cache'
newline|'\n'
nl|'\n'
DECL|member|test_from_recon_cache_valueerror
dedent|''
name|'def'
name|'test_from_recon_cache_valueerror'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'oart'
op|'='
name|'self'
op|'.'
name|'frecon'
op|'.'
name|'raise_ValueError'
newline|'\n'
name|'self'
op|'.'
name|'app'
op|'.'
name|'_from_recon_cache'
op|'='
name|'self'
op|'.'
name|'real_from_cache'
newline|'\n'
name|'rv'
op|'='
name|'self'
op|'.'
name|'app'
op|'.'
name|'_from_recon_cache'
op|'('
op|'['
string|"'testkey1'"
op|','
string|"'notpresentkey'"
op|']'
op|','
nl|'\n'
string|"'test.cache'"
op|','
name|'openr'
op|'='
name|'oart'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'rv'
op|','
op|'{'
string|"'notpresentkey'"
op|':'
name|'None'
op|','
string|"'testkey1'"
op|':'
name|'None'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'app'
op|'.'
name|'_from_recon_cache'
op|'='
name|'self'
op|'.'
name|'fakecache'
op|'.'
name|'fake_from_recon_cache'
newline|'\n'
nl|'\n'
DECL|member|test_from_recon_cache_exception
dedent|''
name|'def'
name|'test_from_recon_cache_exception'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'oart'
op|'='
name|'self'
op|'.'
name|'frecon'
op|'.'
name|'raise_Exception'
newline|'\n'
name|'self'
op|'.'
name|'app'
op|'.'
name|'_from_recon_cache'
op|'='
name|'self'
op|'.'
name|'real_from_cache'
newline|'\n'
name|'rv'
op|'='
name|'self'
op|'.'
name|'app'
op|'.'
name|'_from_recon_cache'
op|'('
op|'['
string|"'testkey1'"
op|','
string|"'notpresentkey'"
op|']'
op|','
nl|'\n'
string|"'test.cache'"
op|','
name|'openr'
op|'='
name|'oart'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'rv'
op|','
op|'{'
string|"'notpresentkey'"
op|':'
name|'None'
op|','
string|"'testkey1'"
op|':'
name|'None'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'app'
op|'.'
name|'_from_recon_cache'
op|'='
name|'self'
op|'.'
name|'fakecache'
op|'.'
name|'fake_from_recon_cache'
newline|'\n'
nl|'\n'
DECL|member|test_get_mounted
dedent|''
name|'def'
name|'test_get_mounted'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'mounts_content'
op|'='
op|'['
nl|'\n'
string|"'rootfs / rootfs rw 0 0'"
op|','
nl|'\n'
string|"'none /sys sysfs rw,nosuid,nodev,noexec,relatime 0 0'"
op|','
nl|'\n'
string|"'none /proc proc rw,nosuid,nodev,noexec,relatime 0 0'"
op|','
nl|'\n'
string|"'none /dev devtmpfs rw,relatime,size=248404k,nr_inodes=62101,'"
nl|'\n'
string|"'mode=755 0 0'"
op|','
nl|'\n'
string|"'none /dev/pts devpts rw,nosuid,noexec,relatime,gid=5,mode=620,'"
nl|'\n'
string|"'ptmxmode=000 0 0'"
op|','
nl|'\n'
string|"'/dev/disk/by-uuid/e5b143bd-9f31-49a7-b018-5e037dc59252 / ext4'"
nl|'\n'
string|"' rw,relatime,errors=remount-ro,barrier=1,data=ordered 0 0'"
op|','
nl|'\n'
string|"'none /sys/fs/fuse/connections fusectl rw,relatime 0 0'"
op|','
nl|'\n'
string|"'none /sys/kernel/debug debugfs rw,relatime 0 0'"
op|','
nl|'\n'
string|"'none /sys/kernel/security securityfs rw,relatime 0 0'"
op|','
nl|'\n'
string|"'none /dev/shm tmpfs rw,nosuid,nodev,relatime 0 0'"
op|','
nl|'\n'
string|"'none /var/run tmpfs rw,nosuid,relatime,mode=755 0 0'"
op|','
nl|'\n'
string|"'none /var/lock tmpfs rw,nosuid,nodev,noexec,relatime 0 0'"
op|','
nl|'\n'
string|"'none /lib/init/rw tmpfs rw,nosuid,relatime,mode=755 0 0'"
op|','
nl|'\n'
string|"'/dev/loop0 /mnt/sdb1 xfs rw,noatime,nodiratime,attr2,nobarrier,'"
nl|'\n'
string|"'logbufs=8,noquota 0 0'"
op|','
nl|'\n'
string|"'rpc_pipefs /var/lib/nfs/rpc_pipefs rpc_pipefs rw,relatime 0 0'"
op|','
nl|'\n'
string|"'nfsd /proc/fs/nfsd nfsd rw,relatime 0 0'"
op|','
nl|'\n'
string|"'none /proc/fs/vmblock/mountPoint vmblock rw,relatime 0 0'"
op|','
nl|'\n'
string|"''"
op|']'
newline|'\n'
name|'mounted_resp'
op|'='
op|'['
nl|'\n'
op|'{'
string|"'device'"
op|':'
string|"'rootfs'"
op|','
string|"'path'"
op|':'
string|"'/'"
op|'}'
op|','
nl|'\n'
op|'{'
string|"'device'"
op|':'
string|"'none'"
op|','
string|"'path'"
op|':'
string|"'/sys'"
op|'}'
op|','
nl|'\n'
op|'{'
string|"'device'"
op|':'
string|"'none'"
op|','
string|"'path'"
op|':'
string|"'/proc'"
op|'}'
op|','
nl|'\n'
op|'{'
string|"'device'"
op|':'
string|"'none'"
op|','
string|"'path'"
op|':'
string|"'/dev'"
op|'}'
op|','
nl|'\n'
op|'{'
string|"'device'"
op|':'
string|"'none'"
op|','
string|"'path'"
op|':'
string|"'/dev/pts'"
op|'}'
op|','
nl|'\n'
op|'{'
string|"'device'"
op|':'
string|"'/dev/disk/by-uuid/'"
nl|'\n'
string|"'e5b143bd-9f31-49a7-b018-5e037dc59252'"
op|','
string|"'path'"
op|':'
string|"'/'"
op|'}'
op|','
nl|'\n'
op|'{'
string|"'device'"
op|':'
string|"'none'"
op|','
string|"'path'"
op|':'
string|"'/sys/fs/fuse/connections'"
op|'}'
op|','
nl|'\n'
op|'{'
string|"'device'"
op|':'
string|"'none'"
op|','
string|"'path'"
op|':'
string|"'/sys/kernel/debug'"
op|'}'
op|','
nl|'\n'
op|'{'
string|"'device'"
op|':'
string|"'none'"
op|','
string|"'path'"
op|':'
string|"'/sys/kernel/security'"
op|'}'
op|','
nl|'\n'
op|'{'
string|"'device'"
op|':'
string|"'none'"
op|','
string|"'path'"
op|':'
string|"'/dev/shm'"
op|'}'
op|','
nl|'\n'
op|'{'
string|"'device'"
op|':'
string|"'none'"
op|','
string|"'path'"
op|':'
string|"'/var/run'"
op|'}'
op|','
nl|'\n'
op|'{'
string|"'device'"
op|':'
string|"'none'"
op|','
string|"'path'"
op|':'
string|"'/var/lock'"
op|'}'
op|','
nl|'\n'
op|'{'
string|"'device'"
op|':'
string|"'none'"
op|','
string|"'path'"
op|':'
string|"'/lib/init/rw'"
op|'}'
op|','
nl|'\n'
op|'{'
string|"'device'"
op|':'
string|"'/dev/loop0'"
op|','
string|"'path'"
op|':'
string|"'/mnt/sdb1'"
op|'}'
op|','
nl|'\n'
op|'{'
string|"'device'"
op|':'
string|"'rpc_pipefs'"
op|','
string|"'path'"
op|':'
string|"'/var/lib/nfs/rpc_pipefs'"
op|'}'
op|','
nl|'\n'
op|'{'
string|"'device'"
op|':'
string|"'nfsd'"
op|','
string|"'path'"
op|':'
string|"'/proc/fs/nfsd'"
op|'}'
op|','
nl|'\n'
op|'{'
string|"'device'"
op|':'
string|"'none'"
op|','
string|"'path'"
op|':'
string|"'/proc/fs/vmblock/mountPoint'"
op|'}'
op|']'
newline|'\n'
name|'oart'
op|'='
name|'OpenAndReadTester'
op|'('
name|'mounts_content'
op|')'
newline|'\n'
name|'rv'
op|'='
name|'self'
op|'.'
name|'app'
op|'.'
name|'get_mounted'
op|'('
name|'openr'
op|'='
name|'oart'
op|'.'
name|'open'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'oart'
op|'.'
name|'open_calls'
op|','
op|'['
op|'('
op|'('
string|"'/proc/mounts'"
op|','
string|"'r'"
op|')'
op|','
op|'{'
op|'}'
op|')'
op|']'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'rv'
op|','
name|'mounted_resp'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_load
dedent|''
name|'def'
name|'test_get_load'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'oart'
op|'='
name|'OpenAndReadTester'
op|'('
op|'['
string|"'0.03 0.03 0.00 1/220 16306'"
op|']'
op|')'
newline|'\n'
name|'rv'
op|'='
name|'self'
op|'.'
name|'app'
op|'.'
name|'get_load'
op|'('
name|'openr'
op|'='
name|'oart'
op|'.'
name|'open'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'oart'
op|'.'
name|'read_calls'
op|','
op|'['
op|'('
op|'('
op|')'
op|','
op|'{'
op|'}'
op|')'
op|']'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'oart'
op|'.'
name|'open_calls'
op|','
op|'['
op|'('
op|'('
string|"'/proc/loadavg'"
op|','
string|"'r'"
op|')'
op|','
op|'{'
op|'}'
op|')'
op|']'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'rv'
op|','
op|'{'
string|"'5m'"
op|':'
number|'0.029999999999999999'
op|','
string|"'15m'"
op|':'
number|'0.0'
op|','
nl|'\n'
string|"'processes'"
op|':'
number|'16306'
op|','
string|"'tasks'"
op|':'
string|"'1/220'"
op|','
nl|'\n'
string|"'1m'"
op|':'
number|'0.029999999999999999'
op|'}'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_mem
dedent|''
name|'def'
name|'test_get_mem'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'meminfo_content'
op|'='
op|'['
string|"'MemTotal:         505840 kB'"
op|','
nl|'\n'
string|"'MemFree:           26588 kB'"
op|','
nl|'\n'
string|"'Buffers:           44948 kB'"
op|','
nl|'\n'
string|"'Cached:           146376 kB'"
op|','
nl|'\n'
string|"'SwapCached:        14736 kB'"
op|','
nl|'\n'
string|"'Active:           194900 kB'"
op|','
nl|'\n'
string|"'Inactive:         193412 kB'"
op|','
nl|'\n'
string|"'Active(anon):      94208 kB'"
op|','
nl|'\n'
string|"'Inactive(anon):   102848 kB'"
op|','
nl|'\n'
string|"'Active(file):     100692 kB'"
op|','
nl|'\n'
string|"'Inactive(file):    90564 kB'"
op|','
nl|'\n'
string|"'Unevictable:           0 kB'"
op|','
nl|'\n'
string|"'Mlocked:               0 kB'"
op|','
nl|'\n'
string|"'SwapTotal:        407544 kB'"
op|','
nl|'\n'
string|"'SwapFree:         313436 kB'"
op|','
nl|'\n'
string|"'Dirty:               104 kB'"
op|','
nl|'\n'
string|"'Writeback:             0 kB'"
op|','
nl|'\n'
string|"'AnonPages:        185268 kB'"
op|','
nl|'\n'
string|"'Mapped:             9592 kB'"
op|','
nl|'\n'
string|"'Shmem:                68 kB'"
op|','
nl|'\n'
string|"'Slab:              61716 kB'"
op|','
nl|'\n'
string|"'SReclaimable:      46620 kB'"
op|','
nl|'\n'
string|"'SUnreclaim:        15096 kB'"
op|','
nl|'\n'
string|"'KernelStack:        1760 kB'"
op|','
nl|'\n'
string|"'PageTables:         8832 kB'"
op|','
nl|'\n'
string|"'NFS_Unstable:          0 kB'"
op|','
nl|'\n'
string|"'Bounce:                0 kB'"
op|','
nl|'\n'
string|"'WritebackTmp:          0 kB'"
op|','
nl|'\n'
string|"'CommitLimit:      660464 kB'"
op|','
nl|'\n'
string|"'Committed_AS:     565608 kB'"
op|','
nl|'\n'
string|"'VmallocTotal:   34359738367 kB'"
op|','
nl|'\n'
string|"'VmallocUsed:      266724 kB'"
op|','
nl|'\n'
string|"'VmallocChunk:   34359467156 kB'"
op|','
nl|'\n'
string|"'HardwareCorrupted:     0 kB'"
op|','
nl|'\n'
string|"'HugePages_Total:       0'"
op|','
nl|'\n'
string|"'HugePages_Free:        0'"
op|','
nl|'\n'
string|"'HugePages_Rsvd:        0'"
op|','
nl|'\n'
string|"'HugePages_Surp:        0'"
op|','
nl|'\n'
string|"'Hugepagesize:       2048 kB'"
op|','
nl|'\n'
string|"'DirectMap4k:       10240 kB'"
op|','
nl|'\n'
string|"'DirectMap2M:      514048 kB'"
op|','
nl|'\n'
string|"''"
op|']'
newline|'\n'
name|'meminfo_resp'
op|'='
op|'{'
string|"'WritebackTmp'"
op|':'
string|"'0 kB'"
op|','
nl|'\n'
string|"'SwapTotal'"
op|':'
string|"'407544 kB'"
op|','
nl|'\n'
string|"'Active(anon)'"
op|':'
string|"'94208 kB'"
op|','
nl|'\n'
string|"'SwapFree'"
op|':'
string|"'313436 kB'"
op|','
nl|'\n'
string|"'DirectMap4k'"
op|':'
string|"'10240 kB'"
op|','
nl|'\n'
string|"'KernelStack'"
op|':'
string|"'1760 kB'"
op|','
nl|'\n'
string|"'MemFree'"
op|':'
string|"'26588 kB'"
op|','
nl|'\n'
string|"'HugePages_Rsvd'"
op|':'
string|"'0'"
op|','
nl|'\n'
string|"'Committed_AS'"
op|':'
string|"'565608 kB'"
op|','
nl|'\n'
string|"'Active(file)'"
op|':'
string|"'100692 kB'"
op|','
nl|'\n'
string|"'NFS_Unstable'"
op|':'
string|"'0 kB'"
op|','
nl|'\n'
string|"'VmallocChunk'"
op|':'
string|"'34359467156 kB'"
op|','
nl|'\n'
string|"'Writeback'"
op|':'
string|"'0 kB'"
op|','
nl|'\n'
string|"'Inactive(file)'"
op|':'
string|"'90564 kB'"
op|','
nl|'\n'
string|"'MemTotal'"
op|':'
string|"'505840 kB'"
op|','
nl|'\n'
string|"'VmallocUsed'"
op|':'
string|"'266724 kB'"
op|','
nl|'\n'
string|"'HugePages_Free'"
op|':'
string|"'0'"
op|','
nl|'\n'
string|"'AnonPages'"
op|':'
string|"'185268 kB'"
op|','
nl|'\n'
string|"'Active'"
op|':'
string|"'194900 kB'"
op|','
nl|'\n'
string|"'Inactive(anon)'"
op|':'
string|"'102848 kB'"
op|','
nl|'\n'
string|"'CommitLimit'"
op|':'
string|"'660464 kB'"
op|','
nl|'\n'
string|"'Hugepagesize'"
op|':'
string|"'2048 kB'"
op|','
nl|'\n'
string|"'Cached'"
op|':'
string|"'146376 kB'"
op|','
nl|'\n'
string|"'SwapCached'"
op|':'
string|"'14736 kB'"
op|','
nl|'\n'
string|"'VmallocTotal'"
op|':'
string|"'34359738367 kB'"
op|','
nl|'\n'
string|"'Shmem'"
op|':'
string|"'68 kB'"
op|','
nl|'\n'
string|"'Mapped'"
op|':'
string|"'9592 kB'"
op|','
nl|'\n'
string|"'SUnreclaim'"
op|':'
string|"'15096 kB'"
op|','
nl|'\n'
string|"'Unevictable'"
op|':'
string|"'0 kB'"
op|','
nl|'\n'
string|"'SReclaimable'"
op|':'
string|"'46620 kB'"
op|','
nl|'\n'
string|"'Mlocked'"
op|':'
string|"'0 kB'"
op|','
nl|'\n'
string|"'DirectMap2M'"
op|':'
string|"'514048 kB'"
op|','
nl|'\n'
string|"'HugePages_Surp'"
op|':'
string|"'0'"
op|','
nl|'\n'
string|"'Bounce'"
op|':'
string|"'0 kB'"
op|','
nl|'\n'
string|"'Inactive'"
op|':'
string|"'193412 kB'"
op|','
nl|'\n'
string|"'PageTables'"
op|':'
string|"'8832 kB'"
op|','
nl|'\n'
string|"'HardwareCorrupted'"
op|':'
string|"'0 kB'"
op|','
nl|'\n'
string|"'HugePages_Total'"
op|':'
string|"'0'"
op|','
nl|'\n'
string|"'Slab'"
op|':'
string|"'61716 kB'"
op|','
nl|'\n'
string|"'Buffers'"
op|':'
string|"'44948 kB'"
op|','
nl|'\n'
string|"'Dirty'"
op|':'
string|"'104 kB'"
op|'}'
newline|'\n'
name|'oart'
op|'='
name|'OpenAndReadTester'
op|'('
name|'meminfo_content'
op|')'
newline|'\n'
name|'rv'
op|'='
name|'self'
op|'.'
name|'app'
op|'.'
name|'get_mem'
op|'('
name|'openr'
op|'='
name|'oart'
op|'.'
name|'open'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'oart'
op|'.'
name|'open_calls'
op|','
op|'['
op|'('
op|'('
string|"'/proc/meminfo'"
op|','
string|"'r'"
op|')'
op|','
op|'{'
op|'}'
op|')'
op|']'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'rv'
op|','
name|'meminfo_resp'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_async_info
dedent|''
name|'def'
name|'test_get_async_info'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'from_cache_response'
op|'='
op|'{'
string|"'async_pending'"
op|':'
number|'5'
op|'}'
newline|'\n'
name|'self'
op|'.'
name|'fakecache'
op|'.'
name|'fakeout'
op|'='
name|'from_cache_response'
newline|'\n'
name|'rv'
op|'='
name|'self'
op|'.'
name|'app'
op|'.'
name|'get_async_info'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'rv'
op|','
op|'{'
string|"'async_pending'"
op|':'
number|'5'
op|'}'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_replication_info_account
dedent|''
name|'def'
name|'test_get_replication_info_account'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'from_cache_response'
op|'='
op|'{'
nl|'\n'
string|'"replication_stats"'
op|':'
op|'{'
nl|'\n'
string|'"attempted"'
op|':'
number|'1'
op|','
string|'"diff"'
op|':'
number|'0'
op|','
nl|'\n'
string|'"diff_capped"'
op|':'
number|'0'
op|','
string|'"empty"'
op|':'
number|'0'
op|','
nl|'\n'
string|'"failure"'
op|':'
number|'0'
op|','
string|'"hashmatch"'
op|':'
number|'0'
op|','
nl|'\n'
string|'"no_change"'
op|':'
number|'2'
op|','
string|'"remote_merge"'
op|':'
number|'0'
op|','
nl|'\n'
string|'"remove"'
op|':'
number|'0'
op|','
string|'"rsync"'
op|':'
number|'0'
op|','
nl|'\n'
string|'"start"'
op|':'
number|'1333044050.855202'
op|','
nl|'\n'
string|'"success"'
op|':'
number|'2'
op|','
string|'"ts_repl"'
op|':'
number|'0'
op|'}'
op|','
nl|'\n'
string|'"replication_time"'
op|':'
number|'0.2615511417388916'
op|','
nl|'\n'
string|'"replication_last"'
op|':'
number|'1357969645.25'
op|'}'
newline|'\n'
name|'self'
op|'.'
name|'fakecache'
op|'.'
name|'fakeout'
op|'='
name|'from_cache_response'
newline|'\n'
name|'rv'
op|'='
name|'self'
op|'.'
name|'app'
op|'.'
name|'get_replication_info'
op|'('
string|"'account'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'fakecache'
op|'.'
name|'fakeout_calls'
op|','
nl|'\n'
op|'['
op|'('
op|'('
op|'['
string|"'replication_time'"
op|','
string|"'replication_stats'"
op|','
nl|'\n'
string|"'replication_last'"
op|']'
op|','
nl|'\n'
string|"'/var/cache/swift/account.recon'"
op|')'
op|','
op|'{'
op|'}'
op|')'
op|']'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'rv'
op|','
op|'{'
nl|'\n'
string|'"replication_stats"'
op|':'
op|'{'
nl|'\n'
string|'"attempted"'
op|':'
number|'1'
op|','
string|'"diff"'
op|':'
number|'0'
op|','
nl|'\n'
string|'"diff_capped"'
op|':'
number|'0'
op|','
string|'"empty"'
op|':'
number|'0'
op|','
nl|'\n'
string|'"failure"'
op|':'
number|'0'
op|','
string|'"hashmatch"'
op|':'
number|'0'
op|','
nl|'\n'
string|'"no_change"'
op|':'
number|'2'
op|','
string|'"remote_merge"'
op|':'
number|'0'
op|','
nl|'\n'
string|'"remove"'
op|':'
number|'0'
op|','
string|'"rsync"'
op|':'
number|'0'
op|','
nl|'\n'
string|'"start"'
op|':'
number|'1333044050.855202'
op|','
nl|'\n'
string|'"success"'
op|':'
number|'2'
op|','
string|'"ts_repl"'
op|':'
number|'0'
op|'}'
op|','
nl|'\n'
string|'"replication_time"'
op|':'
number|'0.2615511417388916'
op|','
nl|'\n'
string|'"replication_last"'
op|':'
number|'1357969645.25'
op|'}'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_replication_info_container
dedent|''
name|'def'
name|'test_get_replication_info_container'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'from_cache_response'
op|'='
op|'{'
nl|'\n'
string|'"replication_time"'
op|':'
number|'200.0'
op|','
nl|'\n'
string|'"replication_stats"'
op|':'
op|'{'
nl|'\n'
string|'"attempted"'
op|':'
number|'179'
op|','
string|'"diff"'
op|':'
number|'0'
op|','
nl|'\n'
string|'"diff_capped"'
op|':'
number|'0'
op|','
string|'"empty"'
op|':'
number|'0'
op|','
nl|'\n'
string|'"failure"'
op|':'
number|'0'
op|','
string|'"hashmatch"'
op|':'
number|'0'
op|','
nl|'\n'
string|'"no_change"'
op|':'
number|'358'
op|','
string|'"remote_merge"'
op|':'
number|'0'
op|','
nl|'\n'
string|'"remove"'
op|':'
number|'0'
op|','
string|'"rsync"'
op|':'
number|'0'
op|','
nl|'\n'
string|'"start"'
op|':'
number|'5.5'
op|','
string|'"success"'
op|':'
number|'358'
op|','
nl|'\n'
string|'"ts_repl"'
op|':'
number|'0'
op|'}'
op|','
nl|'\n'
string|'"replication_last"'
op|':'
number|'1357969645.25'
op|'}'
newline|'\n'
name|'self'
op|'.'
name|'fakecache'
op|'.'
name|'fakeout_calls'
op|'='
op|'['
op|']'
newline|'\n'
name|'self'
op|'.'
name|'fakecache'
op|'.'
name|'fakeout'
op|'='
name|'from_cache_response'
newline|'\n'
name|'rv'
op|'='
name|'self'
op|'.'
name|'app'
op|'.'
name|'get_replication_info'
op|'('
string|"'container'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'fakecache'
op|'.'
name|'fakeout_calls'
op|','
nl|'\n'
op|'['
op|'('
op|'('
op|'['
string|"'replication_time'"
op|','
string|"'replication_stats'"
op|','
nl|'\n'
string|"'replication_last'"
op|']'
op|','
nl|'\n'
string|"'/var/cache/swift/container.recon'"
op|')'
op|','
op|'{'
op|'}'
op|')'
op|']'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'rv'
op|','
op|'{'
nl|'\n'
string|'"replication_time"'
op|':'
number|'200.0'
op|','
nl|'\n'
string|'"replication_stats"'
op|':'
op|'{'
nl|'\n'
string|'"attempted"'
op|':'
number|'179'
op|','
string|'"diff"'
op|':'
number|'0'
op|','
nl|'\n'
string|'"diff_capped"'
op|':'
number|'0'
op|','
string|'"empty"'
op|':'
number|'0'
op|','
nl|'\n'
string|'"failure"'
op|':'
number|'0'
op|','
string|'"hashmatch"'
op|':'
number|'0'
op|','
nl|'\n'
string|'"no_change"'
op|':'
number|'358'
op|','
string|'"remote_merge"'
op|':'
number|'0'
op|','
nl|'\n'
string|'"remove"'
op|':'
number|'0'
op|','
string|'"rsync"'
op|':'
number|'0'
op|','
nl|'\n'
string|'"start"'
op|':'
number|'5.5'
op|','
string|'"success"'
op|':'
number|'358'
op|','
nl|'\n'
string|'"ts_repl"'
op|':'
number|'0'
op|'}'
op|','
nl|'\n'
string|'"replication_last"'
op|':'
number|'1357969645.25'
op|'}'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_replication_object
dedent|''
name|'def'
name|'test_get_replication_object'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'from_cache_response'
op|'='
op|'{'
string|'"object_replication_time"'
op|':'
number|'200.0'
op|','
nl|'\n'
string|'"object_replication_last"'
op|':'
number|'1357962809.15'
op|'}'
newline|'\n'
name|'self'
op|'.'
name|'fakecache'
op|'.'
name|'fakeout_calls'
op|'='
op|'['
op|']'
newline|'\n'
name|'self'
op|'.'
name|'fakecache'
op|'.'
name|'fakeout'
op|'='
name|'from_cache_response'
newline|'\n'
name|'rv'
op|'='
name|'self'
op|'.'
name|'app'
op|'.'
name|'get_replication_info'
op|'('
string|"'object'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'fakecache'
op|'.'
name|'fakeout_calls'
op|','
nl|'\n'
op|'['
op|'('
op|'('
op|'['
string|"'object_replication_time'"
op|','
nl|'\n'
string|"'object_replication_last'"
op|']'
op|','
nl|'\n'
string|"'/var/cache/swift/object.recon'"
op|')'
op|','
op|'{'
op|'}'
op|')'
op|']'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'rv'
op|','
op|'{'
string|"'object_replication_time'"
op|':'
number|'200.0'
op|','
nl|'\n'
string|"'object_replication_last'"
op|':'
number|'1357962809.15'
op|'}'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_updater_info_container
dedent|''
name|'def'
name|'test_get_updater_info_container'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'from_cache_response'
op|'='
op|'{'
string|'"container_updater_sweep"'
op|':'
number|'18.476239919662476'
op|'}'
newline|'\n'
name|'self'
op|'.'
name|'fakecache'
op|'.'
name|'fakeout_calls'
op|'='
op|'['
op|']'
newline|'\n'
name|'self'
op|'.'
name|'fakecache'
op|'.'
name|'fakeout'
op|'='
name|'from_cache_response'
newline|'\n'
name|'rv'
op|'='
name|'self'
op|'.'
name|'app'
op|'.'
name|'get_updater_info'
op|'('
string|"'container'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'fakecache'
op|'.'
name|'fakeout_calls'
op|','
nl|'\n'
op|'['
op|'('
op|'('
op|'['
string|"'container_updater_sweep'"
op|']'
op|','
nl|'\n'
string|"'/var/cache/swift/container.recon'"
op|')'
op|','
op|'{'
op|'}'
op|')'
op|']'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'rv'
op|','
op|'{'
string|'"container_updater_sweep"'
op|':'
number|'18.476239919662476'
op|'}'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_updater_info_object
dedent|''
name|'def'
name|'test_get_updater_info_object'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'from_cache_response'
op|'='
op|'{'
string|'"object_updater_sweep"'
op|':'
number|'0.79848217964172363'
op|'}'
newline|'\n'
name|'self'
op|'.'
name|'fakecache'
op|'.'
name|'fakeout_calls'
op|'='
op|'['
op|']'
newline|'\n'
name|'self'
op|'.'
name|'fakecache'
op|'.'
name|'fakeout'
op|'='
name|'from_cache_response'
newline|'\n'
name|'rv'
op|'='
name|'self'
op|'.'
name|'app'
op|'.'
name|'get_updater_info'
op|'('
string|"'object'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'fakecache'
op|'.'
name|'fakeout_calls'
op|','
nl|'\n'
op|'['
op|'('
op|'('
op|'['
string|"'object_updater_sweep'"
op|']'
op|','
nl|'\n'
string|"'/var/cache/swift/object.recon'"
op|')'
op|','
op|'{'
op|'}'
op|')'
op|']'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'rv'
op|','
op|'{'
string|'"object_updater_sweep"'
op|':'
number|'0.79848217964172363'
op|'}'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_auditor_info_account
dedent|''
name|'def'
name|'test_get_auditor_info_account'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'from_cache_response'
op|'='
op|'{'
string|'"account_auditor_pass_completed"'
op|':'
number|'0.24'
op|','
nl|'\n'
string|'"account_audits_failed"'
op|':'
number|'0'
op|','
nl|'\n'
string|'"account_audits_passed"'
op|':'
number|'6'
op|','
nl|'\n'
string|'"account_audits_since"'
op|':'
string|'"1333145374.1373529"'
op|'}'
newline|'\n'
name|'self'
op|'.'
name|'fakecache'
op|'.'
name|'fakeout_calls'
op|'='
op|'['
op|']'
newline|'\n'
name|'self'
op|'.'
name|'fakecache'
op|'.'
name|'fakeout'
op|'='
name|'from_cache_response'
newline|'\n'
name|'rv'
op|'='
name|'self'
op|'.'
name|'app'
op|'.'
name|'get_auditor_info'
op|'('
string|"'account'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'fakecache'
op|'.'
name|'fakeout_calls'
op|','
nl|'\n'
op|'['
op|'('
op|'('
op|'['
string|"'account_audits_passed'"
op|','
nl|'\n'
string|"'account_auditor_pass_completed'"
op|','
nl|'\n'
string|"'account_audits_since'"
op|','
nl|'\n'
string|"'account_audits_failed'"
op|']'
op|','
nl|'\n'
string|"'/var/cache/swift/account.recon'"
op|')'
op|','
op|'{'
op|'}'
op|')'
op|']'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'rv'
op|','
op|'{'
string|'"account_auditor_pass_completed"'
op|':'
number|'0.24'
op|','
nl|'\n'
string|'"account_audits_failed"'
op|':'
number|'0'
op|','
nl|'\n'
string|'"account_audits_passed"'
op|':'
number|'6'
op|','
nl|'\n'
string|'"account_audits_since"'
op|':'
string|'"1333145374.1373529"'
op|'}'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_auditor_info_container
dedent|''
name|'def'
name|'test_get_auditor_info_container'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'from_cache_response'
op|'='
op|'{'
string|'"container_auditor_pass_completed"'
op|':'
number|'0.24'
op|','
nl|'\n'
string|'"container_audits_failed"'
op|':'
number|'0'
op|','
nl|'\n'
string|'"container_audits_passed"'
op|':'
number|'6'
op|','
nl|'\n'
string|'"container_audits_since"'
op|':'
string|'"1333145374.1373529"'
op|'}'
newline|'\n'
name|'self'
op|'.'
name|'fakecache'
op|'.'
name|'fakeout_calls'
op|'='
op|'['
op|']'
newline|'\n'
name|'self'
op|'.'
name|'fakecache'
op|'.'
name|'fakeout'
op|'='
name|'from_cache_response'
newline|'\n'
name|'rv'
op|'='
name|'self'
op|'.'
name|'app'
op|'.'
name|'get_auditor_info'
op|'('
string|"'container'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'fakecache'
op|'.'
name|'fakeout_calls'
op|','
nl|'\n'
op|'['
op|'('
op|'('
op|'['
string|"'container_audits_passed'"
op|','
nl|'\n'
string|"'container_auditor_pass_completed'"
op|','
nl|'\n'
string|"'container_audits_since'"
op|','
nl|'\n'
string|"'container_audits_failed'"
op|']'
op|','
nl|'\n'
string|"'/var/cache/swift/container.recon'"
op|')'
op|','
op|'{'
op|'}'
op|')'
op|']'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'rv'
op|','
op|'{'
string|'"container_auditor_pass_completed"'
op|':'
number|'0.24'
op|','
nl|'\n'
string|'"container_audits_failed"'
op|':'
number|'0'
op|','
nl|'\n'
string|'"container_audits_passed"'
op|':'
number|'6'
op|','
nl|'\n'
string|'"container_audits_since"'
op|':'
string|'"1333145374.1373529"'
op|'}'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_auditor_info_object
dedent|''
name|'def'
name|'test_get_auditor_info_object'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'from_cache_response'
op|'='
op|'{'
nl|'\n'
string|'"object_auditor_stats_ALL"'
op|':'
op|'{'
nl|'\n'
string|'"audit_time"'
op|':'
number|'115.14418768882751'
op|','
nl|'\n'
string|'"bytes_processed"'
op|':'
number|'234660'
op|','
nl|'\n'
string|'"completed"'
op|':'
number|'115.4512460231781'
op|','
nl|'\n'
string|'"errors"'
op|':'
number|'0'
op|','
nl|'\n'
string|'"files_processed"'
op|':'
number|'2310'
op|','
nl|'\n'
string|'"quarantined"'
op|':'
number|'0'
op|'}'
op|','
nl|'\n'
string|'"object_auditor_stats_ZBF"'
op|':'
op|'{'
nl|'\n'
string|'"audit_time"'
op|':'
number|'45.877294063568115'
op|','
nl|'\n'
string|'"bytes_processed"'
op|':'
number|'0'
op|','
nl|'\n'
string|'"completed"'
op|':'
number|'46.181446075439453'
op|','
nl|'\n'
string|'"errors"'
op|':'
number|'0'
op|','
nl|'\n'
string|'"files_processed"'
op|':'
number|'2310'
op|','
nl|'\n'
string|'"quarantined"'
op|':'
number|'0'
op|'}'
op|'}'
newline|'\n'
name|'self'
op|'.'
name|'fakecache'
op|'.'
name|'fakeout_calls'
op|'='
op|'['
op|']'
newline|'\n'
name|'self'
op|'.'
name|'fakecache'
op|'.'
name|'fakeout'
op|'='
name|'from_cache_response'
newline|'\n'
name|'rv'
op|'='
name|'self'
op|'.'
name|'app'
op|'.'
name|'get_auditor_info'
op|'('
string|"'object'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'fakecache'
op|'.'
name|'fakeout_calls'
op|','
nl|'\n'
op|'['
op|'('
op|'('
op|'['
string|"'object_auditor_stats_ALL'"
op|','
nl|'\n'
string|"'object_auditor_stats_ZBF'"
op|']'
op|','
nl|'\n'
string|"'/var/cache/swift/object.recon'"
op|')'
op|','
op|'{'
op|'}'
op|')'
op|']'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'rv'
op|','
op|'{'
nl|'\n'
string|'"object_auditor_stats_ALL"'
op|':'
op|'{'
nl|'\n'
string|'"audit_time"'
op|':'
number|'115.14418768882751'
op|','
nl|'\n'
string|'"bytes_processed"'
op|':'
number|'234660'
op|','
nl|'\n'
string|'"completed"'
op|':'
number|'115.4512460231781'
op|','
nl|'\n'
string|'"errors"'
op|':'
number|'0'
op|','
nl|'\n'
string|'"files_processed"'
op|':'
number|'2310'
op|','
nl|'\n'
string|'"quarantined"'
op|':'
number|'0'
op|'}'
op|','
nl|'\n'
string|'"object_auditor_stats_ZBF"'
op|':'
op|'{'
nl|'\n'
string|'"audit_time"'
op|':'
number|'45.877294063568115'
op|','
nl|'\n'
string|'"bytes_processed"'
op|':'
number|'0'
op|','
nl|'\n'
string|'"completed"'
op|':'
number|'46.181446075439453'
op|','
nl|'\n'
string|'"errors"'
op|':'
number|'0'
op|','
nl|'\n'
string|'"files_processed"'
op|':'
number|'2310'
op|','
nl|'\n'
string|'"quarantined"'
op|':'
number|'0'
op|'}'
op|'}'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_unmounted
dedent|''
name|'def'
name|'test_get_unmounted'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
nl|'\n'
indent|'        '
name|'unmounted_resp'
op|'='
op|'['
op|'{'
string|"'device'"
op|':'
string|"'fakeone'"
op|','
string|"'mounted'"
op|':'
name|'False'
op|'}'
op|','
nl|'\n'
op|'{'
string|"'device'"
op|':'
string|"'faketwo'"
op|','
string|"'mounted'"
op|':'
name|'False'
op|'}'
op|']'
newline|'\n'
name|'self'
op|'.'
name|'mockos'
op|'.'
name|'ls_output'
op|'='
op|'['
string|"'fakeone'"
op|','
string|"'faketwo'"
op|']'
newline|'\n'
name|'self'
op|'.'
name|'mockos'
op|'.'
name|'ismount_output'
op|'='
name|'False'
newline|'\n'
name|'rv'
op|'='
name|'self'
op|'.'
name|'app'
op|'.'
name|'get_unmounted'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'mockos'
op|'.'
name|'listdir_calls'
op|','
op|'['
op|'('
op|'('
string|"'/srv/node/'"
op|','
op|')'
op|','
op|'{'
op|'}'
op|')'
op|']'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'rv'
op|','
name|'unmounted_resp'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_no_get_unmounted
dedent|''
name|'def'
name|'test_no_get_unmounted'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
nl|'\n'
DECL|function|fake_checkmount_true
indent|'        '
name|'def'
name|'fake_checkmount_true'
op|'('
op|'*'
name|'args'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'True'
newline|'\n'
nl|'\n'
dedent|''
name|'unmounted_resp'
op|'='
op|'['
op|']'
newline|'\n'
name|'self'
op|'.'
name|'mockos'
op|'.'
name|'ls_output'
op|'='
op|'['
op|']'
newline|'\n'
name|'self'
op|'.'
name|'mockos'
op|'.'
name|'ismount_output'
op|'='
name|'False'
newline|'\n'
name|'rv'
op|'='
name|'self'
op|'.'
name|'app'
op|'.'
name|'get_unmounted'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'mockos'
op|'.'
name|'listdir_calls'
op|','
op|'['
op|'('
op|'('
string|"'/srv/node/'"
op|','
op|')'
op|','
op|'{'
op|'}'
op|')'
op|']'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'rv'
op|','
name|'unmounted_resp'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_diskusage
dedent|''
name|'def'
name|'test_get_diskusage'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'#posix.statvfs_result(f_bsize=4096, f_frsize=4096, f_blocks=1963185,'
nl|'\n'
comment|'#                     f_bfree=1113075, f_bavail=1013351,'
nl|'\n'
comment|'#                     f_files=498736,'
nl|'\n'
comment|'#                     f_ffree=397839, f_favail=397839, f_flag=0,'
nl|'\n'
comment|'#                     f_namemax=255)'
nl|'\n'
indent|'        '
name|'statvfs_content'
op|'='
op|'('
number|'4096'
op|','
number|'4096'
op|','
number|'1963185'
op|','
number|'1113075'
op|','
number|'1013351'
op|','
number|'498736'
op|','
nl|'\n'
number|'397839'
op|','
number|'397839'
op|','
number|'0'
op|','
number|'255'
op|')'
newline|'\n'
name|'du_resp'
op|'='
op|'['
op|'{'
string|"'device'"
op|':'
string|"'canhazdrive1'"
op|','
string|"'avail'"
op|':'
number|'4150685696'
op|','
nl|'\n'
string|"'mounted'"
op|':'
name|'True'
op|','
string|"'used'"
op|':'
number|'3890520064'
op|','
string|"'size'"
op|':'
number|'8041205760'
op|'}'
op|']'
newline|'\n'
name|'self'
op|'.'
name|'mockos'
op|'.'
name|'ls_output'
op|'='
op|'['
string|"'canhazdrive1'"
op|']'
newline|'\n'
name|'self'
op|'.'
name|'mockos'
op|'.'
name|'statvfs_output'
op|'='
name|'statvfs_content'
newline|'\n'
name|'self'
op|'.'
name|'mockos'
op|'.'
name|'ismount_output'
op|'='
name|'True'
newline|'\n'
name|'rv'
op|'='
name|'self'
op|'.'
name|'app'
op|'.'
name|'get_diskusage'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'mockos'
op|'.'
name|'statvfs_calls'
op|','
nl|'\n'
op|'['
op|'('
op|'('
string|"'/srv/node/canhazdrive1'"
op|','
op|')'
op|','
op|'{'
op|'}'
op|')'
op|']'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'rv'
op|','
name|'du_resp'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_diskusage_checkmount_fail
dedent|''
name|'def'
name|'test_get_diskusage_checkmount_fail'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'du_resp'
op|'='
op|'['
op|'{'
string|"'device'"
op|':'
string|"'canhazdrive1'"
op|','
string|"'avail'"
op|':'
string|"''"
op|','
nl|'\n'
string|"'mounted'"
op|':'
name|'False'
op|','
string|"'used'"
op|':'
string|"''"
op|','
string|"'size'"
op|':'
string|"''"
op|'}'
op|']'
newline|'\n'
name|'self'
op|'.'
name|'mockos'
op|'.'
name|'ls_output'
op|'='
op|'['
string|"'canhazdrive1'"
op|']'
newline|'\n'
name|'self'
op|'.'
name|'mockos'
op|'.'
name|'ismount_output'
op|'='
name|'False'
newline|'\n'
name|'rv'
op|'='
name|'self'
op|'.'
name|'app'
op|'.'
name|'get_diskusage'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'mockos'
op|'.'
name|'listdir_calls'
op|','
op|'['
op|'('
op|'('
string|"'/srv/node/'"
op|','
op|')'
op|','
op|'{'
op|'}'
op|')'
op|']'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'mockos'
op|'.'
name|'ismount_calls'
op|','
nl|'\n'
op|'['
op|'('
op|'('
string|"'/srv/node/canhazdrive1'"
op|','
op|')'
op|','
op|'{'
op|'}'
op|')'
op|']'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'rv'
op|','
name|'du_resp'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_quarantine_count
dedent|''
name|'def'
name|'test_get_quarantine_count'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'mockos'
op|'.'
name|'ls_output'
op|'='
op|'['
string|"'sda'"
op|']'
newline|'\n'
name|'self'
op|'.'
name|'mockos'
op|'.'
name|'ismount_output'
op|'='
name|'True'
newline|'\n'
nl|'\n'
DECL|function|fake_lstat
name|'def'
name|'fake_lstat'
op|'('
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|')'
op|':'
newline|'\n'
comment|'#posix.lstat_result(st_mode=1, st_ino=2, st_dev=3, st_nlink=4,'
nl|'\n'
comment|'#                   st_uid=5, st_gid=6, st_size=7, st_atime=8,'
nl|'\n'
comment|'#                   st_mtime=9, st_ctime=10)'
nl|'\n'
indent|'            '
name|'return'
name|'stat_result'
op|'('
op|'('
number|'1'
op|','
number|'2'
op|','
number|'3'
op|','
number|'4'
op|','
number|'5'
op|','
number|'6'
op|','
number|'7'
op|','
number|'8'
op|','
number|'9'
op|','
number|'10'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|function|fake_exists
dedent|''
name|'def'
name|'fake_exists'
op|'('
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'True'
newline|'\n'
nl|'\n'
dedent|''
name|'with'
name|'mock'
op|'.'
name|'patch'
op|'('
string|'"os.lstat"'
op|','
name|'fake_lstat'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'with'
name|'mock'
op|'.'
name|'patch'
op|'('
string|'"os.path.exists"'
op|','
name|'fake_exists'
op|')'
op|':'
newline|'\n'
indent|'                '
name|'rv'
op|'='
name|'self'
op|'.'
name|'app'
op|'.'
name|'get_quarantine_count'
op|'('
op|')'
newline|'\n'
dedent|''
dedent|''
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'rv'
op|','
op|'{'
string|"'objects'"
op|':'
number|'2'
op|','
string|"'accounts'"
op|':'
number|'2'
op|','
string|"'containers'"
op|':'
number|'2'
op|'}'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_socket_info
dedent|''
name|'def'
name|'test_get_socket_info'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'sockstat_content'
op|'='
op|'['
string|"'sockets: used 271'"
op|','
nl|'\n'
string|"'TCP: inuse 30 orphan 0 tw 0 alloc 31 mem 0'"
op|','
nl|'\n'
string|"'UDP: inuse 16 mem 4'"
op|','
string|"'UDPLITE: inuse 0'"
op|','
nl|'\n'
string|"'RAW: inuse 0'"
op|','
string|"'FRAG: inuse 0 memory 0'"
op|','
nl|'\n'
string|"''"
op|']'
newline|'\n'
name|'oart'
op|'='
name|'OpenAndReadTester'
op|'('
name|'sockstat_content'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'app'
op|'.'
name|'get_socket_info'
op|'('
name|'openr'
op|'='
name|'oart'
op|'.'
name|'open'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'oart'
op|'.'
name|'open_calls'
op|','
op|'['
nl|'\n'
op|'('
op|'('
string|"'/proc/net/sockstat'"
op|','
string|"'r'"
op|')'
op|','
op|'{'
op|'}'
op|')'
op|','
nl|'\n'
op|'('
op|'('
string|"'/proc/net/sockstat6'"
op|','
string|"'r'"
op|')'
op|','
op|'{'
op|'}'
op|')'
op|']'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|TestReconMiddleware
dedent|''
dedent|''
name|'class'
name|'TestReconMiddleware'
op|'('
name|'unittest'
op|'.'
name|'TestCase'
op|')'
op|':'
newline|'\n'
nl|'\n'
DECL|member|setUp
indent|'    '
name|'def'
name|'setUp'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'frecon'
op|'='
name|'FakeRecon'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'app'
op|'='
name|'recon'
op|'.'
name|'ReconMiddleware'
op|'('
name|'FakeApp'
op|'('
op|')'
op|','
op|'{'
string|"'object_recon'"
op|':'
string|'"true"'
op|'}'
op|')'
newline|'\n'
comment|'#self.app.object_recon = True'
nl|'\n'
name|'self'
op|'.'
name|'app'
op|'.'
name|'get_mem'
op|'='
name|'self'
op|'.'
name|'frecon'
op|'.'
name|'fake_mem'
newline|'\n'
name|'self'
op|'.'
name|'app'
op|'.'
name|'get_load'
op|'='
name|'self'
op|'.'
name|'frecon'
op|'.'
name|'fake_load'
newline|'\n'
name|'self'
op|'.'
name|'app'
op|'.'
name|'get_async_info'
op|'='
name|'self'
op|'.'
name|'frecon'
op|'.'
name|'fake_async'
newline|'\n'
name|'self'
op|'.'
name|'app'
op|'.'
name|'get_device_info'
op|'='
name|'self'
op|'.'
name|'frecon'
op|'.'
name|'fake_get_device_info'
newline|'\n'
name|'self'
op|'.'
name|'app'
op|'.'
name|'get_replication_info'
op|'='
name|'self'
op|'.'
name|'frecon'
op|'.'
name|'fake_replication'
newline|'\n'
name|'self'
op|'.'
name|'app'
op|'.'
name|'get_auditor_info'
op|'='
name|'self'
op|'.'
name|'frecon'
op|'.'
name|'fake_auditor'
newline|'\n'
name|'self'
op|'.'
name|'app'
op|'.'
name|'get_updater_info'
op|'='
name|'self'
op|'.'
name|'frecon'
op|'.'
name|'fake_updater'
newline|'\n'
name|'self'
op|'.'
name|'app'
op|'.'
name|'get_expirer_info'
op|'='
name|'self'
op|'.'
name|'frecon'
op|'.'
name|'fake_expirer'
newline|'\n'
name|'self'
op|'.'
name|'app'
op|'.'
name|'get_mounted'
op|'='
name|'self'
op|'.'
name|'frecon'
op|'.'
name|'fake_mounted'
newline|'\n'
name|'self'
op|'.'
name|'app'
op|'.'
name|'get_unmounted'
op|'='
name|'self'
op|'.'
name|'frecon'
op|'.'
name|'fake_unmounted'
newline|'\n'
name|'self'
op|'.'
name|'app'
op|'.'
name|'get_diskusage'
op|'='
name|'self'
op|'.'
name|'frecon'
op|'.'
name|'fake_diskusage'
newline|'\n'
name|'self'
op|'.'
name|'app'
op|'.'
name|'get_ring_md5'
op|'='
name|'self'
op|'.'
name|'frecon'
op|'.'
name|'fake_ringmd5'
newline|'\n'
name|'self'
op|'.'
name|'app'
op|'.'
name|'get_quarantine_count'
op|'='
name|'self'
op|'.'
name|'frecon'
op|'.'
name|'fake_quarantined'
newline|'\n'
name|'self'
op|'.'
name|'app'
op|'.'
name|'get_socket_info'
op|'='
name|'self'
op|'.'
name|'frecon'
op|'.'
name|'fake_sockstat'
newline|'\n'
nl|'\n'
DECL|member|test_recon_get_mem
dedent|''
name|'def'
name|'test_recon_get_mem'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'get_mem_resp'
op|'='
op|'['
string|'\'{"memtest": "1"}\''
op|']'
newline|'\n'
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/recon/mem'"
op|','
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'GET'"
op|'}'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'app'
op|'('
name|'req'
op|'.'
name|'environ'
op|','
name|'start_response'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|','
name|'get_mem_resp'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_recon_get_version
dedent|''
name|'def'
name|'test_recon_get_version'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/recon/version'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'GET'"
op|'}'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'app'
op|'('
name|'req'
op|'.'
name|'environ'
op|','
name|'start_response'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|','
op|'['
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|"'version'"
op|':'
name|'swiftver'
op|'}'
op|')'
op|']'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_recon_get_load
dedent|''
name|'def'
name|'test_recon_get_load'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'get_load_resp'
op|'='
op|'['
string|'\'{"loadtest": "1"}\''
op|']'
newline|'\n'
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/recon/load'"
op|','
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'GET'"
op|'}'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'app'
op|'('
name|'req'
op|'.'
name|'environ'
op|','
name|'start_response'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|','
name|'get_load_resp'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_recon_get_async
dedent|''
name|'def'
name|'test_recon_get_async'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'get_async_resp'
op|'='
op|'['
string|'\'{"asynctest": "1"}\''
op|']'
newline|'\n'
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/recon/async'"
op|','
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'GET'"
op|'}'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'app'
op|'('
name|'req'
op|'.'
name|'environ'
op|','
name|'start_response'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|','
name|'get_async_resp'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_device_info
dedent|''
name|'def'
name|'test_get_device_info'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'get_device_resp'
op|'='
op|'['
string|'\'{"/srv/1/node": ["sdb1"]}\''
op|']'
newline|'\n'
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/recon/devices'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'GET'"
op|'}'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'app'
op|'('
name|'req'
op|'.'
name|'environ'
op|','
name|'start_response'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|','
name|'get_device_resp'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_recon_get_replication_notype
dedent|''
name|'def'
name|'test_recon_get_replication_notype'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'get_replication_resp'
op|'='
op|'['
string|'\'{"replicationtest": "1"}\''
op|']'
newline|'\n'
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/recon/replication'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'GET'"
op|'}'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'app'
op|'('
name|'req'
op|'.'
name|'environ'
op|','
name|'start_response'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|','
name|'get_replication_resp'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'frecon'
op|'.'
name|'fake_replication_rtype'
op|','
string|"'object'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'frecon'
op|'.'
name|'fake_replication_rtype'
op|'='
name|'None'
newline|'\n'
nl|'\n'
DECL|member|test_recon_get_replication_all
dedent|''
name|'def'
name|'test_recon_get_replication_all'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'get_replication_resp'
op|'='
op|'['
string|'\'{"replicationtest": "1"}\''
op|']'
newline|'\n'
comment|'#test account'
nl|'\n'
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/recon/replication/account'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'GET'"
op|'}'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'app'
op|'('
name|'req'
op|'.'
name|'environ'
op|','
name|'start_response'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|','
name|'get_replication_resp'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'frecon'
op|'.'
name|'fake_replication_rtype'
op|','
string|"'account'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'frecon'
op|'.'
name|'fake_replication_rtype'
op|'='
name|'None'
newline|'\n'
comment|'#test container'
nl|'\n'
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/recon/replication/container'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'GET'"
op|'}'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'app'
op|'('
name|'req'
op|'.'
name|'environ'
op|','
name|'start_response'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|','
name|'get_replication_resp'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'frecon'
op|'.'
name|'fake_replication_rtype'
op|','
string|"'container'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'frecon'
op|'.'
name|'fake_replication_rtype'
op|'='
name|'None'
newline|'\n'
comment|'#test object'
nl|'\n'
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/recon/replication/object'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'GET'"
op|'}'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'app'
op|'('
name|'req'
op|'.'
name|'environ'
op|','
name|'start_response'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|','
name|'get_replication_resp'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'frecon'
op|'.'
name|'fake_replication_rtype'
op|','
string|"'object'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'frecon'
op|'.'
name|'fake_replication_rtype'
op|'='
name|'None'
newline|'\n'
nl|'\n'
DECL|member|test_recon_get_auditor_invalid
dedent|''
name|'def'
name|'test_recon_get_auditor_invalid'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'get_auditor_resp'
op|'='
op|'['
string|"'Invalid path: /recon/auditor/invalid'"
op|']'
newline|'\n'
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/recon/auditor/invalid'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'GET'"
op|'}'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'app'
op|'('
name|'req'
op|'.'
name|'environ'
op|','
name|'start_response'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|','
name|'get_auditor_resp'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_recon_get_auditor_notype
dedent|''
name|'def'
name|'test_recon_get_auditor_notype'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'get_auditor_resp'
op|'='
op|'['
string|"'Invalid path: /recon/auditor'"
op|']'
newline|'\n'
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/recon/auditor'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'GET'"
op|'}'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'app'
op|'('
name|'req'
op|'.'
name|'environ'
op|','
name|'start_response'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|','
name|'get_auditor_resp'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_recon_get_auditor_all
dedent|''
name|'def'
name|'test_recon_get_auditor_all'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'get_auditor_resp'
op|'='
op|'['
string|'\'{"auditortest": "1"}\''
op|']'
newline|'\n'
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/recon/auditor/account'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'GET'"
op|'}'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'app'
op|'('
name|'req'
op|'.'
name|'environ'
op|','
name|'start_response'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|','
name|'get_auditor_resp'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'frecon'
op|'.'
name|'fake_auditor_rtype'
op|','
string|"'account'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'frecon'
op|'.'
name|'fake_auditor_rtype'
op|'='
name|'None'
newline|'\n'
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/recon/auditor/container'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'GET'"
op|'}'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'app'
op|'('
name|'req'
op|'.'
name|'environ'
op|','
name|'start_response'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|','
name|'get_auditor_resp'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'frecon'
op|'.'
name|'fake_auditor_rtype'
op|','
string|"'container'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'frecon'
op|'.'
name|'fake_auditor_rtype'
op|'='
name|'None'
newline|'\n'
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/recon/auditor/object'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'GET'"
op|'}'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'app'
op|'('
name|'req'
op|'.'
name|'environ'
op|','
name|'start_response'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|','
name|'get_auditor_resp'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'frecon'
op|'.'
name|'fake_auditor_rtype'
op|','
string|"'object'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'frecon'
op|'.'
name|'fake_auditor_rtype'
op|'='
name|'None'
newline|'\n'
nl|'\n'
DECL|member|test_recon_get_updater_invalid
dedent|''
name|'def'
name|'test_recon_get_updater_invalid'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'get_updater_resp'
op|'='
op|'['
string|"'Invalid path: /recon/updater/invalid'"
op|']'
newline|'\n'
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/recon/updater/invalid'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'GET'"
op|'}'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'app'
op|'('
name|'req'
op|'.'
name|'environ'
op|','
name|'start_response'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|','
name|'get_updater_resp'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_recon_get_updater_notype
dedent|''
name|'def'
name|'test_recon_get_updater_notype'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'get_updater_resp'
op|'='
op|'['
string|"'Invalid path: /recon/updater'"
op|']'
newline|'\n'
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/recon/updater'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'GET'"
op|'}'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'app'
op|'('
name|'req'
op|'.'
name|'environ'
op|','
name|'start_response'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|','
name|'get_updater_resp'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_recon_get_updater
dedent|''
name|'def'
name|'test_recon_get_updater'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'get_updater_resp'
op|'='
op|'['
string|'\'{"updatertest": "1"}\''
op|']'
newline|'\n'
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/recon/updater/container'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'GET'"
op|'}'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'app'
op|'('
name|'req'
op|'.'
name|'environ'
op|','
name|'start_response'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'frecon'
op|'.'
name|'fake_updater_rtype'
op|','
string|"'container'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'frecon'
op|'.'
name|'fake_updater_rtype'
op|'='
name|'None'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|','
name|'get_updater_resp'
op|')'
newline|'\n'
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/recon/updater/object'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'GET'"
op|'}'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'app'
op|'('
name|'req'
op|'.'
name|'environ'
op|','
name|'start_response'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|','
name|'get_updater_resp'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'frecon'
op|'.'
name|'fake_updater_rtype'
op|','
string|"'object'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'frecon'
op|'.'
name|'fake_updater_rtype'
op|'='
name|'None'
newline|'\n'
nl|'\n'
DECL|member|test_recon_get_expirer_invalid
dedent|''
name|'def'
name|'test_recon_get_expirer_invalid'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'get_updater_resp'
op|'='
op|'['
string|"'Invalid path: /recon/expirer/invalid'"
op|']'
newline|'\n'
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/recon/expirer/invalid'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'GET'"
op|'}'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'app'
op|'('
name|'req'
op|'.'
name|'environ'
op|','
name|'start_response'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|','
name|'get_updater_resp'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_recon_get_expirer_notype
dedent|''
name|'def'
name|'test_recon_get_expirer_notype'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'get_updater_resp'
op|'='
op|'['
string|"'Invalid path: /recon/expirer'"
op|']'
newline|'\n'
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/recon/expirer'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'GET'"
op|'}'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'app'
op|'('
name|'req'
op|'.'
name|'environ'
op|','
name|'start_response'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|','
name|'get_updater_resp'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_recon_get_expirer_object
dedent|''
name|'def'
name|'test_recon_get_expirer_object'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'get_expirer_resp'
op|'='
op|'['
string|'\'{"expirertest": "1"}\''
op|']'
newline|'\n'
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/recon/expirer/object'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'GET'"
op|'}'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'app'
op|'('
name|'req'
op|'.'
name|'environ'
op|','
name|'start_response'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|','
name|'get_expirer_resp'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'frecon'
op|'.'
name|'fake_expirer_rtype'
op|','
string|"'object'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'frecon'
op|'.'
name|'fake_updater_rtype'
op|'='
name|'None'
newline|'\n'
nl|'\n'
DECL|member|test_recon_get_mounted
dedent|''
name|'def'
name|'test_recon_get_mounted'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'get_mounted_resp'
op|'='
op|'['
string|'\'{"mountedtest": "1"}\''
op|']'
newline|'\n'
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/recon/mounted'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'GET'"
op|'}'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'app'
op|'('
name|'req'
op|'.'
name|'environ'
op|','
name|'start_response'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|','
name|'get_mounted_resp'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_recon_get_unmounted
dedent|''
name|'def'
name|'test_recon_get_unmounted'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'get_unmounted_resp'
op|'='
op|'['
string|'\'{"unmountedtest": "1"}\''
op|']'
newline|'\n'
name|'self'
op|'.'
name|'app'
op|'.'
name|'get_unmounted'
op|'='
name|'self'
op|'.'
name|'frecon'
op|'.'
name|'fake_unmounted'
newline|'\n'
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/recon/unmounted'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'GET'"
op|'}'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'app'
op|'('
name|'req'
op|'.'
name|'environ'
op|','
name|'start_response'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|','
name|'get_unmounted_resp'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_recon_no_get_unmounted
dedent|''
name|'def'
name|'test_recon_no_get_unmounted'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'get_unmounted_resp'
op|'='
string|"'[]'"
newline|'\n'
name|'self'
op|'.'
name|'app'
op|'.'
name|'get_unmounted'
op|'='
name|'self'
op|'.'
name|'frecon'
op|'.'
name|'fake_no_unmounted'
newline|'\n'
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/recon/unmounted'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'GET'"
op|'}'
op|')'
newline|'\n'
name|'resp'
op|'='
string|"''"
op|'.'
name|'join'
op|'('
name|'self'
op|'.'
name|'app'
op|'('
name|'req'
op|'.'
name|'environ'
op|','
name|'start_response'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|','
name|'get_unmounted_resp'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_recon_get_diskusage
dedent|''
name|'def'
name|'test_recon_get_diskusage'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'get_diskusage_resp'
op|'='
op|'['
string|'\'{"diskusagetest": "1"}\''
op|']'
newline|'\n'
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/recon/diskusage'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'GET'"
op|'}'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'app'
op|'('
name|'req'
op|'.'
name|'environ'
op|','
name|'start_response'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|','
name|'get_diskusage_resp'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_recon_get_ringmd5
dedent|''
name|'def'
name|'test_recon_get_ringmd5'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'get_ringmd5_resp'
op|'='
op|'['
string|'\'{"ringmd5test": "1"}\''
op|']'
newline|'\n'
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/recon/ringmd5'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'GET'"
op|'}'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'app'
op|'('
name|'req'
op|'.'
name|'environ'
op|','
name|'start_response'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|','
name|'get_ringmd5_resp'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_recon_get_quarantined
dedent|''
name|'def'
name|'test_recon_get_quarantined'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'get_quarantined_resp'
op|'='
op|'['
string|'\'{"quarantinedtest": "1"}\''
op|']'
newline|'\n'
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/recon/quarantined'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'GET'"
op|'}'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'app'
op|'('
name|'req'
op|'.'
name|'environ'
op|','
name|'start_response'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|','
name|'get_quarantined_resp'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_recon_get_sockstat
dedent|''
name|'def'
name|'test_recon_get_sockstat'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'get_sockstat_resp'
op|'='
op|'['
string|'\'{"sockstattest": "1"}\''
op|']'
newline|'\n'
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/recon/sockstat'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'GET'"
op|'}'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'app'
op|'('
name|'req'
op|'.'
name|'environ'
op|','
name|'start_response'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|','
name|'get_sockstat_resp'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_recon_invalid_path
dedent|''
name|'def'
name|'test_recon_invalid_path'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/recon/invalid'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'GET'"
op|'}'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'app'
op|'('
name|'req'
op|'.'
name|'environ'
op|','
name|'start_response'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|','
op|'['
string|"'Invalid path: /recon/invalid'"
op|']'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_no_content
dedent|''
name|'def'
name|'test_no_content'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'app'
op|'.'
name|'get_load'
op|'='
name|'self'
op|'.'
name|'frecon'
op|'.'
name|'nocontent'
newline|'\n'
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/recon/load'"
op|','
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'GET'"
op|'}'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'app'
op|'('
name|'req'
op|'.'
name|'environ'
op|','
name|'start_response'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|','
op|'['
string|"'Internal server error.'"
op|']'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_recon_pass
dedent|''
name|'def'
name|'test_recon_pass'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/'"
op|','
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'GET'"
op|'}'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'app'
op|'('
name|'req'
op|'.'
name|'environ'
op|','
name|'start_response'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|','
string|"'FAKE APP'"
op|')'
newline|'\n'
nl|'\n'
dedent|''
dedent|''
name|'if'
name|'__name__'
op|'=='
string|"'__main__'"
op|':'
newline|'\n'
indent|'    '
name|'unittest'
op|'.'
name|'main'
op|'('
op|')'
newline|'\n'
dedent|''
endmarker|''
end_unit
