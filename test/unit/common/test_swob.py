begin_unit
comment|'# Copyright (c) 2012 OpenStack, LLC.'
nl|'\n'
comment|'#'
nl|'\n'
comment|'# Licensed under the Apache License, Version 2.0 (the "License");'
nl|'\n'
comment|'# you may not use this file except in compliance with the License.'
nl|'\n'
comment|'# You may obtain a copy of the License at'
nl|'\n'
comment|'#'
nl|'\n'
comment|'#    http://www.apache.org/licenses/LICENSE-2.0'
nl|'\n'
comment|'#'
nl|'\n'
comment|'# Unless required by applicable law or agreed to in writing, software'
nl|'\n'
comment|'# distributed under the License is distributed on an "AS IS" BASIS,'
nl|'\n'
comment|'# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or'
nl|'\n'
comment|'# implied.'
nl|'\n'
comment|'# See the License for the specific language governing permissions and'
nl|'\n'
comment|'# limitations under the License.'
nl|'\n'
nl|'\n'
string|'"Tests for swift.common.swob"'
newline|'\n'
nl|'\n'
name|'import'
name|'unittest'
newline|'\n'
name|'import'
name|'datetime'
newline|'\n'
name|'from'
name|'StringIO'
name|'import'
name|'StringIO'
newline|'\n'
nl|'\n'
name|'import'
name|'swift'
op|'.'
name|'common'
op|'.'
name|'swob'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|TestHeaderEnvironProxy
name|'class'
name|'TestHeaderEnvironProxy'
op|'('
name|'unittest'
op|'.'
name|'TestCase'
op|')'
op|':'
newline|'\n'
DECL|member|test_proxy
indent|'    '
name|'def'
name|'test_proxy'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'environ'
op|'='
op|'{'
op|'}'
newline|'\n'
name|'proxy'
op|'='
name|'swift'
op|'.'
name|'common'
op|'.'
name|'swob'
op|'.'
name|'HeaderEnvironProxy'
op|'('
name|'environ'
op|')'
newline|'\n'
name|'proxy'
op|'['
string|"'Content-Length'"
op|']'
op|'='
number|'20'
newline|'\n'
name|'proxy'
op|'['
string|"'Content-Type'"
op|']'
op|'='
string|"'text/plain'"
newline|'\n'
name|'proxy'
op|'['
string|"'Something-Else'"
op|']'
op|'='
string|"'somevalue'"
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
nl|'\n'
name|'proxy'
op|'.'
name|'environ'
op|','
op|'{'
string|"'CONTENT_LENGTH'"
op|':'
string|"'20'"
op|','
nl|'\n'
string|"'CONTENT_TYPE'"
op|':'
string|"'text/plain'"
op|','
nl|'\n'
string|"'HTTP_SOMETHING_ELSE'"
op|':'
string|"'somevalue'"
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'proxy'
op|'['
string|"'content-length'"
op|']'
op|','
string|"'20'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'proxy'
op|'['
string|"'content-type'"
op|']'
op|','
string|"'text/plain'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'proxy'
op|'['
string|"'something-else'"
op|']'
op|','
string|"'somevalue'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_del
dedent|''
name|'def'
name|'test_del'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'environ'
op|'='
op|'{'
op|'}'
newline|'\n'
name|'proxy'
op|'='
name|'swift'
op|'.'
name|'common'
op|'.'
name|'swob'
op|'.'
name|'HeaderEnvironProxy'
op|'('
name|'environ'
op|')'
newline|'\n'
name|'proxy'
op|'['
string|"'Content-Length'"
op|']'
op|'='
number|'20'
newline|'\n'
name|'proxy'
op|'['
string|"'Content-Type'"
op|']'
op|'='
string|"'text/plain'"
newline|'\n'
name|'proxy'
op|'['
string|"'Something-Else'"
op|']'
op|'='
string|"'somevalue'"
newline|'\n'
name|'del'
name|'proxy'
op|'['
string|"'Content-Length'"
op|']'
newline|'\n'
name|'del'
name|'proxy'
op|'['
string|"'Content-Type'"
op|']'
newline|'\n'
name|'del'
name|'proxy'
op|'['
string|"'Something-Else'"
op|']'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'proxy'
op|'.'
name|'environ'
op|','
op|'{'
op|'}'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_contains
dedent|''
name|'def'
name|'test_contains'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'environ'
op|'='
op|'{'
op|'}'
newline|'\n'
name|'proxy'
op|'='
name|'swift'
op|'.'
name|'common'
op|'.'
name|'swob'
op|'.'
name|'HeaderEnvironProxy'
op|'('
name|'environ'
op|')'
newline|'\n'
name|'proxy'
op|'['
string|"'Content-Length'"
op|']'
op|'='
number|'20'
newline|'\n'
name|'proxy'
op|'['
string|"'Content-Type'"
op|']'
op|'='
string|"'text/plain'"
newline|'\n'
name|'proxy'
op|'['
string|"'Something-Else'"
op|']'
op|'='
string|"'somevalue'"
newline|'\n'
name|'self'
op|'.'
name|'assert_'
op|'('
string|"'content-length'"
name|'in'
name|'proxy'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assert_'
op|'('
string|"'content-type'"
name|'in'
name|'proxy'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assert_'
op|'('
string|"'something-else'"
name|'in'
name|'proxy'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_keys
dedent|''
name|'def'
name|'test_keys'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'environ'
op|'='
op|'{'
op|'}'
newline|'\n'
name|'proxy'
op|'='
name|'swift'
op|'.'
name|'common'
op|'.'
name|'swob'
op|'.'
name|'HeaderEnvironProxy'
op|'('
name|'environ'
op|')'
newline|'\n'
name|'proxy'
op|'['
string|"'Content-Length'"
op|']'
op|'='
number|'20'
newline|'\n'
name|'proxy'
op|'['
string|"'Content-Type'"
op|']'
op|'='
string|"'text/plain'"
newline|'\n'
name|'proxy'
op|'['
string|"'Something-Else'"
op|']'
op|'='
string|"'somevalue'"
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
nl|'\n'
name|'set'
op|'('
name|'proxy'
op|'.'
name|'keys'
op|'('
op|')'
op|')'
op|','
nl|'\n'
name|'set'
op|'('
op|'('
string|"'Content-Length'"
op|','
string|"'Content-Type'"
op|','
string|"'Something-Else'"
op|')'
op|')'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|TestHeaderKeyDict
dedent|''
dedent|''
name|'class'
name|'TestHeaderKeyDict'
op|'('
name|'unittest'
op|'.'
name|'TestCase'
op|')'
op|':'
newline|'\n'
DECL|member|test_case_insensitive
indent|'    '
name|'def'
name|'test_case_insensitive'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'headers'
op|'='
name|'swift'
op|'.'
name|'common'
op|'.'
name|'swob'
op|'.'
name|'HeaderKeyDict'
op|'('
op|')'
newline|'\n'
name|'headers'
op|'['
string|"'Content-Length'"
op|']'
op|'='
number|'0'
newline|'\n'
name|'headers'
op|'['
string|"'CONTENT-LENGTH'"
op|']'
op|'='
number|'10'
newline|'\n'
name|'headers'
op|'['
string|"'content-length'"
op|']'
op|'='
number|'20'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'headers'
op|'['
string|"'Content-Length'"
op|']'
op|','
string|"'20'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'headers'
op|'['
string|"'content-length'"
op|']'
op|','
string|"'20'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'headers'
op|'['
string|"'CONTENT-LENGTH'"
op|']'
op|','
string|"'20'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_del_contains
dedent|''
name|'def'
name|'test_del_contains'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'headers'
op|'='
name|'swift'
op|'.'
name|'common'
op|'.'
name|'swob'
op|'.'
name|'HeaderKeyDict'
op|'('
op|')'
newline|'\n'
name|'headers'
op|'['
string|"'Content-Length'"
op|']'
op|'='
number|'0'
newline|'\n'
name|'self'
op|'.'
name|'assert_'
op|'('
string|"'Content-Length'"
name|'in'
name|'headers'
op|')'
newline|'\n'
name|'del'
name|'headers'
op|'['
string|"'Content-Length'"
op|']'
newline|'\n'
name|'self'
op|'.'
name|'assert_'
op|'('
string|"'Content-Length'"
name|'not'
name|'in'
name|'headers'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_update
dedent|''
name|'def'
name|'test_update'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'headers'
op|'='
name|'swift'
op|'.'
name|'common'
op|'.'
name|'swob'
op|'.'
name|'HeaderKeyDict'
op|'('
op|')'
newline|'\n'
name|'headers'
op|'.'
name|'update'
op|'('
op|'{'
string|"'Content-Length'"
op|':'
string|"'0'"
op|'}'
op|')'
newline|'\n'
name|'headers'
op|'.'
name|'update'
op|'('
op|'['
op|'('
string|"'Content-Type'"
op|','
string|"'text/plain'"
op|')'
op|']'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'headers'
op|'['
string|"'Content-Length'"
op|']'
op|','
string|"'0'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'headers'
op|'['
string|"'Content-Type'"
op|']'
op|','
string|"'text/plain'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get
dedent|''
name|'def'
name|'test_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'headers'
op|'='
name|'swift'
op|'.'
name|'common'
op|'.'
name|'swob'
op|'.'
name|'HeaderKeyDict'
op|'('
op|')'
newline|'\n'
name|'headers'
op|'['
string|"'content-length'"
op|']'
op|'='
number|'20'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'headers'
op|'.'
name|'get'
op|'('
string|"'CONTENT-LENGTH'"
op|')'
op|','
string|"'20'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'headers'
op|'.'
name|'get'
op|'('
string|"'something-else'"
op|')'
op|','
name|'None'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'headers'
op|'.'
name|'get'
op|'('
string|"'something-else'"
op|','
name|'True'
op|')'
op|','
name|'True'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|TestRange
dedent|''
dedent|''
name|'class'
name|'TestRange'
op|'('
name|'unittest'
op|'.'
name|'TestCase'
op|')'
op|':'
newline|'\n'
DECL|member|test_range
indent|'    '
name|'def'
name|'test_range'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'range'
op|'='
name|'swift'
op|'.'
name|'common'
op|'.'
name|'swob'
op|'.'
name|'Range'
op|'('
string|"'bytes=1-7'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'range'
op|'.'
name|'ranges'
op|'['
number|'0'
op|']'
op|','
op|'('
number|'1'
op|','
number|'7'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_upsidedown_range
dedent|''
name|'def'
name|'test_upsidedown_range'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'range'
op|'='
name|'swift'
op|'.'
name|'common'
op|'.'
name|'swob'
op|'.'
name|'Range'
op|'('
string|"'bytes=5-10'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'range'
op|'.'
name|'range_for_length'
op|'('
number|'2'
op|')'
op|','
name|'None'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_str
dedent|''
name|'def'
name|'test_str'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'for'
name|'range_str'
name|'in'
op|'('
string|"'bytes=1-7'"
op|','
string|"'bytes=1-'"
op|','
string|"'bytes=-1'"
op|','
nl|'\n'
string|"'bytes=1-7,9-12'"
op|','
string|"'bytes=-7,9-'"
op|')'
op|':'
newline|'\n'
indent|'            '
name|'range'
op|'='
name|'swift'
op|'.'
name|'common'
op|'.'
name|'swob'
op|'.'
name|'Range'
op|'('
name|'range_str'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'str'
op|'('
name|'range'
op|')'
op|','
name|'range_str'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_range_for_length
dedent|''
dedent|''
name|'def'
name|'test_range_for_length'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'range'
op|'='
name|'swift'
op|'.'
name|'common'
op|'.'
name|'swob'
op|'.'
name|'Range'
op|'('
string|"'bytes=1-7'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'range'
op|'.'
name|'range_for_length'
op|'('
number|'10'
op|')'
op|','
op|'('
number|'1'
op|','
number|'8'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'range'
op|'.'
name|'range_for_length'
op|'('
number|'5'
op|')'
op|','
op|'('
number|'1'
op|','
number|'5'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'range'
op|'.'
name|'range_for_length'
op|'('
name|'None'
op|')'
op|','
name|'None'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_range_for_length_no_end
dedent|''
name|'def'
name|'test_range_for_length_no_end'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'range'
op|'='
name|'swift'
op|'.'
name|'common'
op|'.'
name|'swob'
op|'.'
name|'Range'
op|'('
string|"'bytes=1-'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'range'
op|'.'
name|'range_for_length'
op|'('
number|'10'
op|')'
op|','
op|'('
number|'1'
op|','
number|'10'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'range'
op|'.'
name|'range_for_length'
op|'('
number|'5'
op|')'
op|','
op|'('
number|'1'
op|','
number|'5'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'range'
op|'.'
name|'range_for_length'
op|'('
name|'None'
op|')'
op|','
name|'None'
op|')'
newline|'\n'
comment|'# This used to freak out:'
nl|'\n'
name|'range'
op|'='
name|'swift'
op|'.'
name|'common'
op|'.'
name|'swob'
op|'.'
name|'Range'
op|'('
string|"'bytes=100-'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'range'
op|'.'
name|'range_for_length'
op|'('
number|'5'
op|')'
op|','
name|'None'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'range'
op|'.'
name|'range_for_length'
op|'('
name|'None'
op|')'
op|','
name|'None'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_range_for_length_no_start
dedent|''
name|'def'
name|'test_range_for_length_no_start'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'range'
op|'='
name|'swift'
op|'.'
name|'common'
op|'.'
name|'swob'
op|'.'
name|'Range'
op|'('
string|"'bytes=-7'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'range'
op|'.'
name|'range_for_length'
op|'('
number|'10'
op|')'
op|','
op|'('
number|'3'
op|','
number|'10'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'range'
op|'.'
name|'range_for_length'
op|'('
number|'5'
op|')'
op|','
op|'('
number|'0'
op|','
number|'5'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'range'
op|'.'
name|'range_for_length'
op|'('
name|'None'
op|')'
op|','
name|'None'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_range_invalid_syntax
dedent|''
name|'def'
name|'test_range_invalid_syntax'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'range'
op|'='
name|'swift'
op|'.'
name|'common'
op|'.'
name|'swob'
op|'.'
name|'Range'
op|'('
string|"'bytes=10-2'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'range'
op|'.'
name|'ranges'
op|','
op|'['
op|']'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|TestMatch
dedent|''
dedent|''
name|'class'
name|'TestMatch'
op|'('
name|'unittest'
op|'.'
name|'TestCase'
op|')'
op|':'
newline|'\n'
DECL|member|test_match
indent|'    '
name|'def'
name|'test_match'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'match'
op|'='
name|'swift'
op|'.'
name|'common'
op|'.'
name|'swob'
op|'.'
name|'Match'
op|'('
string|'\'"a", "b"\''
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'match'
op|'.'
name|'tags'
op|','
name|'set'
op|'('
op|'('
string|"'a'"
op|','
string|"'b'"
op|')'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assert_'
op|'('
string|"'a'"
name|'in'
name|'match'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assert_'
op|'('
string|"'b'"
name|'in'
name|'match'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assert_'
op|'('
string|"'c'"
name|'not'
name|'in'
name|'match'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_match_star
dedent|''
name|'def'
name|'test_match_star'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'match'
op|'='
name|'swift'
op|'.'
name|'common'
op|'.'
name|'swob'
op|'.'
name|'Match'
op|'('
string|'\'"a", "*"\''
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assert_'
op|'('
string|"'a'"
name|'in'
name|'match'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assert_'
op|'('
string|"'b'"
name|'in'
name|'match'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assert_'
op|'('
string|"'c'"
name|'in'
name|'match'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_match_noquote
dedent|''
name|'def'
name|'test_match_noquote'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'match'
op|'='
name|'swift'
op|'.'
name|'common'
op|'.'
name|'swob'
op|'.'
name|'Match'
op|'('
string|"'a, b'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'match'
op|'.'
name|'tags'
op|','
name|'set'
op|'('
op|'('
string|"'a'"
op|','
string|"'b'"
op|')'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assert_'
op|'('
string|"'a'"
name|'in'
name|'match'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assert_'
op|'('
string|"'b'"
name|'in'
name|'match'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assert_'
op|'('
string|"'c'"
name|'not'
name|'in'
name|'match'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|TestAccept
dedent|''
dedent|''
name|'class'
name|'TestAccept'
op|'('
name|'unittest'
op|'.'
name|'TestCase'
op|')'
op|':'
newline|'\n'
DECL|member|test_accept_json
indent|'    '
name|'def'
name|'test_accept_json'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'for'
name|'accept'
name|'in'
op|'('
string|"'application/json'"
op|','
string|"'application/json;q=1.0,*/*;q=0.9'"
op|','
nl|'\n'
string|"'*/*;q=0.9,application/json;q=1.0'"
op|','
string|"'application/*'"
op|')'
op|':'
newline|'\n'
indent|'            '
name|'acc'
op|'='
name|'swift'
op|'.'
name|'common'
op|'.'
name|'swob'
op|'.'
name|'Accept'
op|'('
name|'accept'
op|')'
newline|'\n'
name|'match'
op|'='
name|'acc'
op|'.'
name|'best_match'
op|'('
op|'['
string|"'text/plain'"
op|','
string|"'application/json'"
op|','
nl|'\n'
string|"'application/xml'"
op|','
string|"'text/xml'"
op|']'
op|','
nl|'\n'
name|'default_match'
op|'='
string|"'text/plain'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'match'
op|','
string|"'application/json'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_accept_plain
dedent|''
dedent|''
name|'def'
name|'test_accept_plain'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'for'
name|'accept'
name|'in'
op|'('
string|"''"
op|','
string|"'text/plain'"
op|','
string|"'application/xml;q=0.8,*/*;q=0.9'"
op|','
nl|'\n'
string|"'*/*;q=0.9,application/xml;q=0.8'"
op|','
string|"'*/*'"
op|','
nl|'\n'
string|"'text/plain,application/xml'"
op|')'
op|':'
newline|'\n'
indent|'            '
name|'acc'
op|'='
name|'swift'
op|'.'
name|'common'
op|'.'
name|'swob'
op|'.'
name|'Accept'
op|'('
name|'accept'
op|')'
newline|'\n'
name|'match'
op|'='
name|'acc'
op|'.'
name|'best_match'
op|'('
op|'['
string|"'text/plain'"
op|','
string|"'application/json'"
op|','
nl|'\n'
string|"'application/xml'"
op|','
string|"'text/xml'"
op|']'
op|','
nl|'\n'
name|'default_match'
op|'='
string|"'text/plain'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'match'
op|','
string|"'text/plain'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_accept_xml
dedent|''
dedent|''
name|'def'
name|'test_accept_xml'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'for'
name|'accept'
name|'in'
op|'('
string|"'application/xml'"
op|','
string|"'application/xml;q=1.0,*/*;q=0.9'"
op|','
nl|'\n'
string|"'*/*;q=0.9,application/xml;q=1.0'"
op|')'
op|':'
newline|'\n'
indent|'            '
name|'acc'
op|'='
name|'swift'
op|'.'
name|'common'
op|'.'
name|'swob'
op|'.'
name|'Accept'
op|'('
name|'accept'
op|')'
newline|'\n'
name|'match'
op|'='
name|'acc'
op|'.'
name|'best_match'
op|'('
op|'['
string|"'text/plain'"
op|','
string|"'application/xml'"
op|','
nl|'\n'
string|"'text/xml'"
op|']'
op|','
name|'default_match'
op|'='
string|"'text/plain'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'match'
op|','
string|"'application/xml'"
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|TestRequest
dedent|''
dedent|''
dedent|''
name|'class'
name|'TestRequest'
op|'('
name|'unittest'
op|'.'
name|'TestCase'
op|')'
op|':'
newline|'\n'
DECL|member|test_blank
indent|'    '
name|'def'
name|'test_blank'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'req'
op|'='
name|'swift'
op|'.'
name|'common'
op|'.'
name|'swob'
op|'.'
name|'Request'
op|'.'
name|'blank'
op|'('
nl|'\n'
string|"'/'"
op|','
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'POST'"
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'Content-Type'"
op|':'
string|"'text/plain'"
op|'}'
op|','
name|'body'
op|'='
string|"'hi'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'req'
op|'.'
name|'path_info'
op|','
string|"'/'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'req'
op|'.'
name|'body'
op|','
string|"'hi'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'req'
op|'.'
name|'headers'
op|'['
string|"'Content-Type'"
op|']'
op|','
string|"'text/plain'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'req'
op|'.'
name|'method'
op|','
string|"'POST'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_blank_body_precedence
dedent|''
name|'def'
name|'test_blank_body_precedence'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'req'
op|'='
name|'swift'
op|'.'
name|'common'
op|'.'
name|'swob'
op|'.'
name|'Request'
op|'.'
name|'blank'
op|'('
nl|'\n'
string|"'/'"
op|','
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'POST'"
op|','
nl|'\n'
string|"'wsgi.input'"
op|':'
name|'StringIO'
op|'('
string|"''"
op|')'
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'Content-Type'"
op|':'
string|"'text/plain'"
op|'}'
op|','
name|'body'
op|'='
string|"'hi'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'req'
op|'.'
name|'path_info'
op|','
string|"'/'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'req'
op|'.'
name|'body'
op|','
string|"'hi'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'req'
op|'.'
name|'headers'
op|'['
string|"'Content-Type'"
op|']'
op|','
string|"'text/plain'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'req'
op|'.'
name|'method'
op|','
string|"'POST'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_params
dedent|''
name|'def'
name|'test_params'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'req'
op|'='
name|'swift'
op|'.'
name|'common'
op|'.'
name|'swob'
op|'.'
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/?a=b&c=d'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'req'
op|'.'
name|'params'
op|'['
string|"'a'"
op|']'
op|','
string|"'b'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'req'
op|'.'
name|'params'
op|'['
string|"'c'"
op|']'
op|','
string|"'d'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_path
dedent|''
name|'def'
name|'test_path'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'req'
op|'='
name|'swift'
op|'.'
name|'common'
op|'.'
name|'swob'
op|'.'
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/hi?a=b&c=d'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'req'
op|'.'
name|'path'
op|','
string|"'/hi'"
op|')'
newline|'\n'
name|'req'
op|'='
name|'swift'
op|'.'
name|'common'
op|'.'
name|'swob'
op|'.'
name|'Request'
op|'.'
name|'blank'
op|'('
nl|'\n'
string|"'/'"
op|','
name|'environ'
op|'='
op|'{'
string|"'SCRIPT_NAME'"
op|':'
string|"'/hi'"
op|','
string|"'PATH_INFO'"
op|':'
string|"'/there'"
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'req'
op|'.'
name|'path'
op|','
string|"'/hi/there'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_path_info_pop
dedent|''
name|'def'
name|'test_path_info_pop'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'req'
op|'='
name|'swift'
op|'.'
name|'common'
op|'.'
name|'swob'
op|'.'
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/hi/there'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'req'
op|'.'
name|'path_info_pop'
op|'('
op|')'
op|','
string|"'hi'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'req'
op|'.'
name|'path_info'
op|','
string|"'/there'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'req'
op|'.'
name|'script_name'
op|','
string|"'/hi'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_bad_path_info_pop
dedent|''
name|'def'
name|'test_bad_path_info_pop'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'req'
op|'='
name|'swift'
op|'.'
name|'common'
op|'.'
name|'swob'
op|'.'
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'blahblah'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'req'
op|'.'
name|'path_info_pop'
op|'('
op|')'
op|','
name|'None'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_copy_get
dedent|''
name|'def'
name|'test_copy_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'req'
op|'='
name|'swift'
op|'.'
name|'common'
op|'.'
name|'swob'
op|'.'
name|'Request'
op|'.'
name|'blank'
op|'('
nl|'\n'
string|"'/hi/there'"
op|','
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'POST'"
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'req'
op|'.'
name|'method'
op|','
string|"'POST'"
op|')'
newline|'\n'
name|'req2'
op|'='
name|'req'
op|'.'
name|'copy_get'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'req2'
op|'.'
name|'method'
op|','
string|"'GET'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_response
dedent|''
name|'def'
name|'test_get_response'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
DECL|function|test_app
indent|'        '
name|'def'
name|'test_app'
op|'('
name|'environ'
op|','
name|'start_response'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'start_response'
op|'('
string|"'200 OK'"
op|','
op|'['
op|']'
op|')'
newline|'\n'
name|'return'
op|'['
string|"'hi'"
op|']'
newline|'\n'
nl|'\n'
dedent|''
name|'req'
op|'='
name|'swift'
op|'.'
name|'common'
op|'.'
name|'swob'
op|'.'
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/'"
op|')'
newline|'\n'
name|'resp'
op|'='
name|'req'
op|'.'
name|'get_response'
op|'('
name|'test_app'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'200'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'body'
op|','
string|"'hi'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_properties
dedent|''
name|'def'
name|'test_properties'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'req'
op|'='
name|'swift'
op|'.'
name|'common'
op|'.'
name|'swob'
op|'.'
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/hi/there'"
op|','
name|'body'
op|'='
string|"'hi'"
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'req'
op|'.'
name|'body'
op|','
string|"'hi'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'req'
op|'.'
name|'content_length'
op|','
number|'2'
op|')'
newline|'\n'
nl|'\n'
name|'req'
op|'.'
name|'remote_addr'
op|'='
string|"'something'"
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'req'
op|'.'
name|'environ'
op|'['
string|"'REMOTE_ADDR'"
op|']'
op|','
string|"'something'"
op|')'
newline|'\n'
name|'req'
op|'.'
name|'body'
op|'='
string|"'whatever'"
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'req'
op|'.'
name|'content_length'
op|','
number|'8'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'req'
op|'.'
name|'body'
op|','
string|"'whatever'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'req'
op|'.'
name|'method'
op|','
string|"'GET'"
op|')'
newline|'\n'
nl|'\n'
name|'req'
op|'.'
name|'range'
op|'='
string|"'bytes=1-7'"
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'req'
op|'.'
name|'range'
op|'.'
name|'ranges'
op|'['
number|'0'
op|']'
op|','
op|'('
number|'1'
op|','
number|'7'
op|')'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'assert_'
op|'('
string|"'Range'"
name|'in'
name|'req'
op|'.'
name|'headers'
op|')'
newline|'\n'
name|'req'
op|'.'
name|'range'
op|'='
name|'None'
newline|'\n'
name|'self'
op|'.'
name|'assert_'
op|'('
string|"'Range'"
name|'not'
name|'in'
name|'req'
op|'.'
name|'headers'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_datetime_properties
dedent|''
name|'def'
name|'test_datetime_properties'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'req'
op|'='
name|'swift'
op|'.'
name|'common'
op|'.'
name|'swob'
op|'.'
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/hi/there'"
op|','
name|'body'
op|'='
string|"'hi'"
op|')'
newline|'\n'
nl|'\n'
name|'req'
op|'.'
name|'if_unmodified_since'
op|'='
number|'0'
newline|'\n'
name|'self'
op|'.'
name|'assert_'
op|'('
name|'isinstance'
op|'('
name|'req'
op|'.'
name|'if_unmodified_since'
op|','
name|'datetime'
op|'.'
name|'datetime'
op|')'
op|')'
newline|'\n'
name|'if_unmodified_since'
op|'='
name|'req'
op|'.'
name|'if_unmodified_since'
newline|'\n'
name|'req'
op|'.'
name|'if_unmodified_since'
op|'='
name|'if_unmodified_since'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'if_unmodified_since'
op|','
name|'req'
op|'.'
name|'if_unmodified_since'
op|')'
newline|'\n'
nl|'\n'
name|'req'
op|'.'
name|'if_unmodified_since'
op|'='
string|"'something'"
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'req'
op|'.'
name|'headers'
op|'['
string|"'If-Unmodified-Since'"
op|']'
op|','
string|"'something'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'req'
op|'.'
name|'if_unmodified_since'
op|','
name|'None'
op|')'
newline|'\n'
nl|'\n'
name|'req'
op|'.'
name|'if_unmodified_since'
op|'='
op|'-'
number|'1'
newline|'\n'
name|'self'
op|'.'
name|'assertRaises'
op|'('
name|'ValueError'
op|','
name|'lambda'
op|':'
name|'req'
op|'.'
name|'if_unmodified_since'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'assert_'
op|'('
string|"'If-Unmodified-Since'"
name|'in'
name|'req'
op|'.'
name|'headers'
op|')'
newline|'\n'
name|'req'
op|'.'
name|'if_unmodified_since'
op|'='
name|'None'
newline|'\n'
name|'self'
op|'.'
name|'assert_'
op|'('
string|"'If-Unmodified-Since'"
name|'not'
name|'in'
name|'req'
op|'.'
name|'headers'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_bad_range
dedent|''
name|'def'
name|'test_bad_range'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'req'
op|'='
name|'swift'
op|'.'
name|'common'
op|'.'
name|'swob'
op|'.'
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/hi/there'"
op|','
name|'body'
op|'='
string|"'hi'"
op|')'
newline|'\n'
name|'req'
op|'.'
name|'range'
op|'='
string|"'bad range'"
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'req'
op|'.'
name|'range'
op|','
name|'None'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_accept_header
dedent|''
name|'def'
name|'test_accept_header'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'req'
op|'='
name|'swift'
op|'.'
name|'common'
op|'.'
name|'swob'
op|'.'
name|'Request'
op|'('
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'GET'"
op|','
nl|'\n'
string|"'PATH_INFO'"
op|':'
string|"'/'"
op|','
nl|'\n'
string|"'HTTP_ACCEPT'"
op|':'
string|"'application/json'"
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
nl|'\n'
name|'req'
op|'.'
name|'accept'
op|'.'
name|'best_match'
op|'('
op|'['
string|"'application/json'"
op|','
string|"'text/plain'"
op|']'
op|')'
op|','
nl|'\n'
string|"'application/json'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
nl|'\n'
name|'req'
op|'.'
name|'accept'
op|'.'
name|'best_match'
op|'('
op|'['
string|"'text/plain'"
op|','
string|"'application/json'"
op|']'
op|')'
op|','
nl|'\n'
string|"'application/json'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_path_qs
dedent|''
name|'def'
name|'test_path_qs'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'req'
op|'='
name|'swift'
op|'.'
name|'common'
op|'.'
name|'swob'
op|'.'
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/hi/there?hello=equal&acl'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'req'
op|'.'
name|'path_qs'
op|','
string|"'/hi/there?hello=equal&acl'"
op|')'
newline|'\n'
nl|'\n'
name|'req'
op|'='
name|'swift'
op|'.'
name|'common'
op|'.'
name|'swob'
op|'.'
name|'Request'
op|'('
op|'{'
string|"'PATH_INFO'"
op|':'
string|"'/hi/there'"
op|','
nl|'\n'
string|"'QUERY_STRING'"
op|':'
string|"'hello=equal&acl'"
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'req'
op|'.'
name|'path_qs'
op|','
string|"'/hi/there?hello=equal&acl'"
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|TestStatusMap
dedent|''
dedent|''
name|'class'
name|'TestStatusMap'
op|'('
name|'unittest'
op|'.'
name|'TestCase'
op|')'
op|':'
newline|'\n'
DECL|member|test_status_map
indent|'    '
name|'def'
name|'test_status_map'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response_args'
op|'='
op|'['
op|']'
newline|'\n'
nl|'\n'
DECL|function|start_response
name|'def'
name|'start_response'
op|'('
name|'status'
op|','
name|'headers'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'response_args'
op|'.'
name|'append'
op|'('
name|'status'
op|')'
newline|'\n'
name|'response_args'
op|'.'
name|'append'
op|'('
name|'headers'
op|')'
newline|'\n'
dedent|''
name|'resp_cls'
op|'='
name|'swift'
op|'.'
name|'common'
op|'.'
name|'swob'
op|'.'
name|'status_map'
op|'['
number|'404'
op|']'
newline|'\n'
name|'resp'
op|'='
name|'resp_cls'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'404'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'title'
op|','
string|"'Not Found'"
op|')'
newline|'\n'
name|'body'
op|'='
string|"''"
op|'.'
name|'join'
op|'('
name|'resp'
op|'('
op|'{'
op|'}'
op|','
name|'start_response'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assert_'
op|'('
string|"'The resource could not be found.'"
name|'in'
name|'body'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'response_args'
op|'['
number|'0'
op|']'
op|','
string|"'404 Not Found'"
op|')'
newline|'\n'
name|'headers'
op|'='
name|'dict'
op|'('
name|'response_args'
op|'['
number|'1'
op|']'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'headers'
op|'['
string|"'content-type'"
op|']'
op|','
string|"'text/html'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assert_'
op|'('
name|'int'
op|'('
name|'headers'
op|'['
string|"'content-length'"
op|']'
op|')'
op|'>'
number|'0'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|TestResponse
dedent|''
dedent|''
name|'class'
name|'TestResponse'
op|'('
name|'unittest'
op|'.'
name|'TestCase'
op|')'
op|':'
newline|'\n'
DECL|member|_get_response
indent|'    '
name|'def'
name|'_get_response'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
DECL|function|test_app
indent|'        '
name|'def'
name|'test_app'
op|'('
name|'environ'
op|','
name|'start_response'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'start_response'
op|'('
string|"'200 OK'"
op|','
op|'['
op|']'
op|')'
newline|'\n'
name|'return'
op|'['
string|"'hi'"
op|']'
newline|'\n'
nl|'\n'
dedent|''
name|'req'
op|'='
name|'swift'
op|'.'
name|'common'
op|'.'
name|'swob'
op|'.'
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/'"
op|')'
newline|'\n'
name|'return'
name|'req'
op|'.'
name|'get_response'
op|'('
name|'test_app'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_properties
dedent|''
name|'def'
name|'test_properties'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'resp'
op|'='
name|'self'
op|'.'
name|'_get_response'
op|'('
op|')'
newline|'\n'
nl|'\n'
name|'resp'
op|'.'
name|'location'
op|'='
string|"'something'"
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'location'
op|','
string|"'something'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assert_'
op|'('
string|"'Location'"
name|'in'
name|'resp'
op|'.'
name|'headers'
op|')'
newline|'\n'
name|'resp'
op|'.'
name|'location'
op|'='
name|'None'
newline|'\n'
name|'self'
op|'.'
name|'assert_'
op|'('
string|"'Location'"
name|'not'
name|'in'
name|'resp'
op|'.'
name|'headers'
op|')'
newline|'\n'
nl|'\n'
name|'resp'
op|'.'
name|'content_type'
op|'='
string|"'text/plain'"
newline|'\n'
name|'self'
op|'.'
name|'assert_'
op|'('
string|"'Content-Type'"
name|'in'
name|'resp'
op|'.'
name|'headers'
op|')'
newline|'\n'
name|'resp'
op|'.'
name|'content_type'
op|'='
name|'None'
newline|'\n'
name|'self'
op|'.'
name|'assert_'
op|'('
string|"'Content-Type'"
name|'not'
name|'in'
name|'resp'
op|'.'
name|'headers'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_empty_body
dedent|''
name|'def'
name|'test_empty_body'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'resp'
op|'='
name|'self'
op|'.'
name|'_get_response'
op|'('
op|')'
newline|'\n'
name|'resp'
op|'.'
name|'body'
op|'='
string|"''"
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'body'
op|','
string|"''"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_unicode_body
dedent|''
name|'def'
name|'test_unicode_body'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'resp'
op|'='
name|'self'
op|'.'
name|'_get_response'
op|'('
op|')'
newline|'\n'
name|'resp'
op|'.'
name|'body'
op|'='
string|"u'\\N{SNOWMAN}'"
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'body'
op|','
string|"u'\\N{SNOWMAN}'"
op|'.'
name|'encode'
op|'('
string|"'utf-8'"
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_location_rewrite
dedent|''
name|'def'
name|'test_location_rewrite'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
DECL|function|start_response
indent|'        '
name|'def'
name|'start_response'
op|'('
name|'env'
op|','
name|'headers'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'pass'
newline|'\n'
dedent|''
name|'req'
op|'='
name|'swift'
op|'.'
name|'common'
op|'.'
name|'swob'
op|'.'
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/'"
op|')'
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'_get_response'
op|'('
op|')'
newline|'\n'
name|'resp'
op|'.'
name|'location'
op|'='
string|"'/something'"
newline|'\n'
name|'body'
op|'='
string|"''"
op|'.'
name|'join'
op|'('
name|'resp'
op|'('
name|'req'
op|'.'
name|'environ'
op|','
name|'start_response'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'location'
op|','
string|"'http://localhost/something'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_app_iter
dedent|''
name|'def'
name|'test_app_iter'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
DECL|function|start_response
indent|'        '
name|'def'
name|'start_response'
op|'('
name|'env'
op|','
name|'headers'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'pass'
newline|'\n'
dedent|''
name|'resp'
op|'='
name|'self'
op|'.'
name|'_get_response'
op|'('
op|')'
newline|'\n'
name|'resp'
op|'.'
name|'app_iter'
op|'='
op|'['
string|"'a'"
op|','
string|"'b'"
op|','
string|"'c'"
op|']'
newline|'\n'
name|'body'
op|'='
string|"''"
op|'.'
name|'join'
op|'('
name|'resp'
op|'('
op|'{'
op|'}'
op|','
name|'start_response'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'body'
op|','
string|"'abc'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_range_body
dedent|''
name|'def'
name|'test_range_body'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
nl|'\n'
DECL|function|test_app
indent|'        '
name|'def'
name|'test_app'
op|'('
name|'environ'
op|','
name|'start_response'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'start_response'
op|'('
string|"'200 OK'"
op|','
op|'['
op|'('
string|"'Content-Length'"
op|','
string|"'10'"
op|')'
op|']'
op|')'
newline|'\n'
name|'return'
op|'['
string|"'1234567890'"
op|']'
newline|'\n'
nl|'\n'
DECL|function|start_response
dedent|''
name|'def'
name|'start_response'
op|'('
name|'env'
op|','
name|'headers'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'pass'
newline|'\n'
nl|'\n'
dedent|''
name|'req'
op|'='
name|'swift'
op|'.'
name|'common'
op|'.'
name|'swob'
op|'.'
name|'Request'
op|'.'
name|'blank'
op|'('
nl|'\n'
string|"'/'"
op|','
name|'headers'
op|'='
op|'{'
string|"'Range'"
op|':'
string|"'bytes=1-3'"
op|'}'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'req'
op|'.'
name|'get_response'
op|'('
name|'test_app'
op|')'
newline|'\n'
name|'resp'
op|'.'
name|'conditional_response'
op|'='
name|'True'
newline|'\n'
name|'body'
op|'='
string|"''"
op|'.'
name|'join'
op|'('
name|'resp'
op|'('
op|'['
op|']'
op|','
name|'start_response'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'body'
op|','
string|"'234'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status'
op|','
string|"'206 Partial Content'"
op|')'
newline|'\n'
nl|'\n'
name|'resp'
op|'='
name|'swift'
op|'.'
name|'common'
op|'.'
name|'swob'
op|'.'
name|'Response'
op|'('
nl|'\n'
name|'body'
op|'='
string|"'1234567890'"
op|','
name|'request'
op|'='
name|'req'
op|','
nl|'\n'
name|'conditional_response'
op|'='
name|'True'
op|')'
newline|'\n'
name|'body'
op|'='
string|"''"
op|'.'
name|'join'
op|'('
name|'resp'
op|'('
op|'['
op|']'
op|','
name|'start_response'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'body'
op|','
string|"'234'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status'
op|','
string|"'206 Partial Content'"
op|')'
newline|'\n'
nl|'\n'
comment|'# No body for 416'
nl|'\n'
name|'req'
op|'='
name|'swift'
op|'.'
name|'common'
op|'.'
name|'swob'
op|'.'
name|'Request'
op|'.'
name|'blank'
op|'('
nl|'\n'
string|"'/'"
op|','
name|'headers'
op|'='
op|'{'
string|"'Range'"
op|':'
string|"'bytes=-0'"
op|'}'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'req'
op|'.'
name|'get_response'
op|'('
name|'test_app'
op|')'
newline|'\n'
name|'resp'
op|'.'
name|'conditional_response'
op|'='
name|'True'
newline|'\n'
name|'body'
op|'='
string|"''"
op|'.'
name|'join'
op|'('
name|'resp'
op|'('
op|'['
op|']'
op|','
name|'start_response'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'body'
op|','
string|"''"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'content_length'
op|','
number|'0'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status'
op|','
string|"'416 Requested Range Not Satisfiable'"
op|')'
newline|'\n'
nl|'\n'
name|'resp'
op|'='
name|'swift'
op|'.'
name|'common'
op|'.'
name|'swob'
op|'.'
name|'Response'
op|'('
nl|'\n'
name|'body'
op|'='
string|"'1234567890'"
op|','
name|'request'
op|'='
name|'req'
op|','
nl|'\n'
name|'conditional_response'
op|'='
name|'True'
op|')'
newline|'\n'
name|'body'
op|'='
string|"''"
op|'.'
name|'join'
op|'('
name|'resp'
op|'('
op|'['
op|']'
op|','
name|'start_response'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'body'
op|','
string|"''"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status'
op|','
string|"'416 Requested Range Not Satisfiable'"
op|')'
newline|'\n'
nl|'\n'
comment|'# Syntactically-invalid Range headers "MUST" be ignored'
nl|'\n'
name|'req'
op|'='
name|'swift'
op|'.'
name|'common'
op|'.'
name|'swob'
op|'.'
name|'Request'
op|'.'
name|'blank'
op|'('
nl|'\n'
string|"'/'"
op|','
name|'headers'
op|'='
op|'{'
string|"'Range'"
op|':'
string|"'bytes=3-2'"
op|'}'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'req'
op|'.'
name|'get_response'
op|'('
name|'test_app'
op|')'
newline|'\n'
name|'resp'
op|'.'
name|'conditional_response'
op|'='
name|'True'
newline|'\n'
name|'body'
op|'='
string|"''"
op|'.'
name|'join'
op|'('
name|'resp'
op|'('
op|'['
op|']'
op|','
name|'start_response'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'body'
op|','
string|"'1234567890'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status'
op|','
string|"'200 OK'"
op|')'
newline|'\n'
nl|'\n'
name|'resp'
op|'='
name|'swift'
op|'.'
name|'common'
op|'.'
name|'swob'
op|'.'
name|'Response'
op|'('
nl|'\n'
name|'body'
op|'='
string|"'1234567890'"
op|','
name|'request'
op|'='
name|'req'
op|','
nl|'\n'
name|'conditional_response'
op|'='
name|'True'
op|')'
newline|'\n'
name|'body'
op|'='
string|"''"
op|'.'
name|'join'
op|'('
name|'resp'
op|'('
op|'['
op|']'
op|','
name|'start_response'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'body'
op|','
string|"'1234567890'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status'
op|','
string|"'200 OK'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_content_type
dedent|''
name|'def'
name|'test_content_type'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'resp'
op|'='
name|'self'
op|'.'
name|'_get_response'
op|'('
op|')'
newline|'\n'
name|'resp'
op|'.'
name|'content_type'
op|'='
string|"'text/plain; charset=utf8'"
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'content_type'
op|','
string|"'text/plain'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_charset
dedent|''
name|'def'
name|'test_charset'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'resp'
op|'='
name|'self'
op|'.'
name|'_get_response'
op|'('
op|')'
newline|'\n'
name|'resp'
op|'.'
name|'content_type'
op|'='
string|"'text/plain; charset=utf8'"
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'charset'
op|','
string|"'utf8'"
op|')'
newline|'\n'
name|'resp'
op|'.'
name|'charset'
op|'='
string|"'utf16'"
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'charset'
op|','
string|"'utf16'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_etag
dedent|''
name|'def'
name|'test_etag'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'resp'
op|'='
name|'self'
op|'.'
name|'_get_response'
op|'('
op|')'
newline|'\n'
name|'resp'
op|'.'
name|'etag'
op|'='
string|"'hi'"
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'headers'
op|'['
string|"'Etag'"
op|']'
op|','
string|'\'"hi"\''
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'etag'
op|','
string|"'hi'"
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'assert_'
op|'('
string|"'etag'"
name|'in'
name|'resp'
op|'.'
name|'headers'
op|')'
newline|'\n'
name|'resp'
op|'.'
name|'etag'
op|'='
name|'None'
newline|'\n'
name|'self'
op|'.'
name|'assert_'
op|'('
string|"'etag'"
name|'not'
name|'in'
name|'resp'
op|'.'
name|'headers'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|TestUTC
dedent|''
dedent|''
name|'class'
name|'TestUTC'
op|'('
name|'unittest'
op|'.'
name|'TestCase'
op|')'
op|':'
newline|'\n'
DECL|member|test_tzname
indent|'    '
name|'def'
name|'test_tzname'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'swift'
op|'.'
name|'common'
op|'.'
name|'swob'
op|'.'
name|'UTC'
op|'.'
name|'tzname'
op|'('
name|'None'
op|')'
op|','
string|"'UTC'"
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
dedent|''
dedent|''
name|'if'
name|'__name__'
op|'=='
string|"'__main__'"
op|':'
newline|'\n'
indent|'    '
name|'unittest'
op|'.'
name|'main'
op|'('
op|')'
newline|'\n'
dedent|''
endmarker|''
end_unit
