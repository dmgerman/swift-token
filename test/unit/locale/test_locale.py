begin_unit
comment|'#!/usr/bin/env python'
nl|'\n'
comment|'#-*- coding:utf-8 -*-'
nl|'\n'
nl|'\n'
name|'import'
name|'os'
newline|'\n'
name|'import'
name|'unittest'
newline|'\n'
name|'import'
name|'string'
newline|'\n'
name|'import'
name|'sys'
newline|'\n'
nl|'\n'
name|'try'
op|':'
newline|'\n'
indent|'    '
name|'from'
name|'subprocess'
name|'import'
name|'check_output'
newline|'\n'
dedent|''
name|'except'
name|'ImportError'
op|':'
newline|'\n'
indent|'    '
name|'from'
name|'subprocess'
name|'import'
name|'Popen'
op|','
name|'PIPE'
op|','
name|'CalledProcessError'
newline|'\n'
nl|'\n'
DECL|function|check_output
name|'def'
name|'check_output'
op|'('
op|'*'
name|'popenargs'
op|','
op|'**'
name|'kwargs'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Lifted from python 2.7 stdlib."""'
newline|'\n'
name|'if'
string|"'stdout'"
name|'in'
name|'kwargs'
op|':'
newline|'\n'
indent|'            '
name|'raise'
name|'ValueError'
op|'('
string|"'stdout argument not allowed, it will be '"
nl|'\n'
string|"'overridden.'"
op|')'
newline|'\n'
dedent|''
name|'process'
op|'='
name|'Popen'
op|'('
name|'stdout'
op|'='
name|'PIPE'
op|','
op|'*'
name|'popenargs'
op|','
op|'**'
name|'kwargs'
op|')'
newline|'\n'
name|'output'
op|','
name|'unused_err'
op|'='
name|'process'
op|'.'
name|'communicate'
op|'('
op|')'
newline|'\n'
name|'retcode'
op|'='
name|'process'
op|'.'
name|'poll'
op|'('
op|')'
newline|'\n'
name|'if'
name|'retcode'
op|':'
newline|'\n'
indent|'            '
name|'cmd'
op|'='
name|'kwargs'
op|'.'
name|'get'
op|'('
string|'"args"'
op|')'
newline|'\n'
name|'if'
name|'cmd'
name|'is'
name|'None'
op|':'
newline|'\n'
indent|'                '
name|'cmd'
op|'='
name|'popenargs'
op|'['
number|'0'
op|']'
newline|'\n'
dedent|''
name|'raise'
name|'CalledProcessError'
op|'('
name|'retcode'
op|','
name|'cmd'
op|','
name|'output'
op|'='
name|'output'
op|')'
newline|'\n'
dedent|''
name|'return'
name|'output'
newline|'\n'
nl|'\n'
nl|'\n'
dedent|''
dedent|''
name|'os'
op|'.'
name|'environ'
op|'['
string|"'LC_ALL'"
op|']'
op|'='
string|"'eo'"
newline|'\n'
name|'os'
op|'.'
name|'environ'
op|'['
string|"'SWIFT_LOCALEDIR'"
op|']'
op|'='
name|'os'
op|'.'
name|'path'
op|'.'
name|'dirname'
op|'('
name|'__file__'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|TestTranslations
name|'class'
name|'TestTranslations'
op|'('
name|'unittest'
op|'.'
name|'TestCase'
op|')'
op|':'
newline|'\n'
nl|'\n'
DECL|member|test_translations
indent|'    '
name|'def'
name|'test_translations'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'path'
op|'='
string|"':'"
op|'.'
name|'join'
op|'('
name|'sys'
op|'.'
name|'path'
op|')'
newline|'\n'
name|'translated_message'
op|'='
name|'check_output'
op|'('
op|'['
string|"'python'"
op|','
name|'__file__'
op|','
name|'path'
op|']'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'translated_message'
op|','
string|"'testo mesa\xc4\x9don\\n'"
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
dedent|''
dedent|''
name|'if'
name|'__name__'
op|'=='
string|'"__main__"'
op|':'
newline|'\n'
indent|'    '
name|'sys'
op|'.'
name|'path'
op|'='
name|'string'
op|'.'
name|'split'
op|'('
name|'sys'
op|'.'
name|'argv'
op|'['
number|'1'
op|']'
op|','
string|"':'"
op|')'
newline|'\n'
name|'from'
name|'swift'
name|'import'
name|'gettext_'
name|'as'
name|'_'
newline|'\n'
name|'print'
name|'_'
op|'('
string|"'test message'"
op|')'
newline|'\n'
dedent|''
endmarker|''
end_unit
