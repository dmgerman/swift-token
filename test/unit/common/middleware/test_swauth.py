begin_unit
comment|'# Copyright (c) 2010 OpenStack, LLC.'
nl|'\n'
comment|'#'
nl|'\n'
comment|'# Licensed under the Apache License, Version 2.0 (the "License");'
nl|'\n'
comment|'# you may not use this file except in compliance with the License.'
nl|'\n'
comment|'# You may obtain a copy of the License at'
nl|'\n'
comment|'#'
nl|'\n'
comment|'#    http://www.apache.org/licenses/LICENSE-2.0'
nl|'\n'
comment|'#'
nl|'\n'
comment|'# Unless required by applicable law or agreed to in writing, software'
nl|'\n'
comment|'# distributed under the License is distributed on an "AS IS" BASIS,'
nl|'\n'
comment|'# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or'
nl|'\n'
comment|'# implied.'
nl|'\n'
comment|'# See the License for the specific language governing permissions and'
nl|'\n'
comment|'# limitations under the License.'
nl|'\n'
nl|'\n'
name|'try'
op|':'
newline|'\n'
indent|'    '
name|'import'
name|'simplejson'
name|'as'
name|'json'
newline|'\n'
dedent|''
name|'except'
name|'ImportError'
op|':'
newline|'\n'
indent|'    '
name|'import'
name|'json'
newline|'\n'
dedent|''
name|'import'
name|'unittest'
newline|'\n'
name|'from'
name|'contextlib'
name|'import'
name|'contextmanager'
newline|'\n'
name|'from'
name|'time'
name|'import'
name|'time'
newline|'\n'
nl|'\n'
name|'from'
name|'webob'
name|'import'
name|'Request'
op|','
name|'Response'
newline|'\n'
nl|'\n'
name|'from'
name|'swift'
op|'.'
name|'common'
op|'.'
name|'middleware'
name|'import'
name|'swauth'
name|'as'
name|'auth'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FakeMemcache
name|'class'
name|'FakeMemcache'
op|'('
name|'object'
op|')'
op|':'
newline|'\n'
nl|'\n'
DECL|member|__init__
indent|'    '
name|'def'
name|'__init__'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'store'
op|'='
op|'{'
op|'}'
newline|'\n'
nl|'\n'
DECL|member|get
dedent|''
name|'def'
name|'get'
op|'('
name|'self'
op|','
name|'key'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
name|'self'
op|'.'
name|'store'
op|'.'
name|'get'
op|'('
name|'key'
op|')'
newline|'\n'
nl|'\n'
DECL|member|set
dedent|''
name|'def'
name|'set'
op|'('
name|'self'
op|','
name|'key'
op|','
name|'value'
op|','
name|'timeout'
op|'='
number|'0'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'store'
op|'['
name|'key'
op|']'
op|'='
name|'value'
newline|'\n'
name|'return'
name|'True'
newline|'\n'
nl|'\n'
DECL|member|incr
dedent|''
name|'def'
name|'incr'
op|'('
name|'self'
op|','
name|'key'
op|','
name|'timeout'
op|'='
number|'0'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'store'
op|'['
name|'key'
op|']'
op|'='
name|'self'
op|'.'
name|'store'
op|'.'
name|'setdefault'
op|'('
name|'key'
op|','
number|'0'
op|')'
op|'+'
number|'1'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'store'
op|'['
name|'key'
op|']'
newline|'\n'
nl|'\n'
dedent|''
op|'@'
name|'contextmanager'
newline|'\n'
DECL|member|soft_lock
name|'def'
name|'soft_lock'
op|'('
name|'self'
op|','
name|'key'
op|','
name|'timeout'
op|'='
number|'0'
op|','
name|'retries'
op|'='
number|'5'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'yield'
name|'True'
newline|'\n'
nl|'\n'
DECL|member|delete
dedent|''
name|'def'
name|'delete'
op|'('
name|'self'
op|','
name|'key'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'try'
op|':'
newline|'\n'
indent|'            '
name|'del'
name|'self'
op|'.'
name|'store'
op|'['
name|'key'
op|']'
newline|'\n'
dedent|''
name|'except'
op|':'
newline|'\n'
indent|'            '
name|'pass'
newline|'\n'
dedent|''
name|'return'
name|'True'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FakeApp
dedent|''
dedent|''
name|'class'
name|'FakeApp'
op|'('
name|'object'
op|')'
op|':'
newline|'\n'
nl|'\n'
DECL|member|__init__
indent|'    '
name|'def'
name|'__init__'
op|'('
name|'self'
op|','
name|'status_headers_body_iter'
op|'='
name|'None'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'calls'
op|'='
number|'0'
newline|'\n'
name|'self'
op|'.'
name|'status_headers_body_iter'
op|'='
name|'status_headers_body_iter'
newline|'\n'
name|'if'
name|'not'
name|'self'
op|'.'
name|'status_headers_body_iter'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'status_headers_body_iter'
op|'='
name|'iter'
op|'('
op|'['
op|'('
string|"'404 Not Found'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
newline|'\n'
nl|'\n'
DECL|member|__call__
dedent|''
dedent|''
name|'def'
name|'__call__'
op|'('
name|'self'
op|','
name|'env'
op|','
name|'start_response'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'calls'
op|'+='
number|'1'
newline|'\n'
name|'self'
op|'.'
name|'request'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"''"
op|','
name|'environ'
op|'='
name|'env'
op|')'
newline|'\n'
name|'if'
string|"'swift.authorize'"
name|'in'
name|'env'
op|':'
newline|'\n'
indent|'            '
name|'resp'
op|'='
name|'env'
op|'['
string|"'swift.authorize'"
op|']'
op|'('
name|'self'
op|'.'
name|'request'
op|')'
newline|'\n'
name|'if'
name|'resp'
op|':'
newline|'\n'
indent|'                '
name|'return'
name|'resp'
op|'('
name|'env'
op|','
name|'start_response'
op|')'
newline|'\n'
dedent|''
dedent|''
name|'status'
op|','
name|'headers'
op|','
name|'body'
op|'='
name|'self'
op|'.'
name|'status_headers_body_iter'
op|'.'
name|'next'
op|'('
op|')'
newline|'\n'
name|'return'
name|'Response'
op|'('
name|'status'
op|'='
name|'status'
op|','
name|'headers'
op|'='
name|'headers'
op|','
nl|'\n'
name|'body'
op|'='
name|'body'
op|')'
op|'('
name|'env'
op|','
name|'start_response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FakeConn
dedent|''
dedent|''
name|'class'
name|'FakeConn'
op|'('
name|'object'
op|')'
op|':'
newline|'\n'
nl|'\n'
DECL|member|__init__
indent|'    '
name|'def'
name|'__init__'
op|'('
name|'self'
op|','
name|'status_headers_body_iter'
op|'='
name|'None'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'calls'
op|'='
number|'0'
newline|'\n'
name|'self'
op|'.'
name|'status_headers_body_iter'
op|'='
name|'status_headers_body_iter'
newline|'\n'
name|'if'
name|'not'
name|'self'
op|'.'
name|'status_headers_body_iter'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'status_headers_body_iter'
op|'='
name|'iter'
op|'('
op|'['
op|'('
string|"'404 Not Found'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
newline|'\n'
nl|'\n'
DECL|member|request
dedent|''
dedent|''
name|'def'
name|'request'
op|'('
name|'self'
op|','
name|'method'
op|','
name|'path'
op|','
name|'headers'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'calls'
op|'+='
number|'1'
newline|'\n'
name|'self'
op|'.'
name|'request_path'
op|'='
name|'path'
newline|'\n'
name|'self'
op|'.'
name|'status'
op|','
name|'self'
op|'.'
name|'headers'
op|','
name|'self'
op|'.'
name|'body'
op|'='
name|'self'
op|'.'
name|'status_headers_body_iter'
op|'.'
name|'next'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'status'
op|','
name|'self'
op|'.'
name|'reason'
op|'='
name|'self'
op|'.'
name|'status'
op|'.'
name|'split'
op|'('
string|"' '"
op|','
number|'1'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'status'
op|'='
name|'int'
op|'('
name|'self'
op|'.'
name|'status'
op|')'
newline|'\n'
nl|'\n'
DECL|member|getresponse
dedent|''
name|'def'
name|'getresponse'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
name|'self'
newline|'\n'
nl|'\n'
DECL|member|read
dedent|''
name|'def'
name|'read'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'body'
op|'='
name|'self'
op|'.'
name|'body'
newline|'\n'
name|'self'
op|'.'
name|'body'
op|'='
string|"''"
newline|'\n'
name|'return'
name|'body'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|TestAuth
dedent|''
dedent|''
name|'class'
name|'TestAuth'
op|'('
name|'unittest'
op|'.'
name|'TestCase'
op|')'
op|':'
newline|'\n'
nl|'\n'
DECL|member|setUp
indent|'    '
name|'def'
name|'setUp'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'='
name|'auth'
op|'.'
name|'filter_factory'
op|'('
op|'{'
string|"'super_admin_key'"
op|':'
string|"'supertest'"
op|'}'
op|')'
op|'('
name|'FakeApp'
op|'('
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_super_admin_key_required
dedent|''
name|'def'
name|'test_super_admin_key_required'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'app'
op|'='
name|'FakeApp'
op|'('
op|')'
newline|'\n'
name|'exc'
op|'='
name|'None'
newline|'\n'
name|'try'
op|':'
newline|'\n'
indent|'            '
name|'auth'
op|'.'
name|'filter_factory'
op|'('
op|'{'
op|'}'
op|')'
op|'('
name|'app'
op|')'
newline|'\n'
dedent|''
name|'except'
name|'ValueError'
op|','
name|'err'
op|':'
newline|'\n'
indent|'            '
name|'exc'
op|'='
name|'err'
newline|'\n'
dedent|''
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'str'
op|'('
name|'exc'
op|')'
op|','
nl|'\n'
string|"'No super_admin_key set in conf file! Exiting.'"
op|')'
newline|'\n'
name|'auth'
op|'.'
name|'filter_factory'
op|'('
op|'{'
string|"'super_admin_key'"
op|':'
string|"'supertest'"
op|'}'
op|')'
op|'('
name|'app'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_reseller_prefix_init
dedent|''
name|'def'
name|'test_reseller_prefix_init'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'app'
op|'='
name|'FakeApp'
op|'('
op|')'
newline|'\n'
name|'ath'
op|'='
name|'auth'
op|'.'
name|'filter_factory'
op|'('
op|'{'
string|"'super_admin_key'"
op|':'
string|"'supertest'"
op|'}'
op|')'
op|'('
name|'app'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'ath'
op|'.'
name|'reseller_prefix'
op|','
string|"'AUTH_'"
op|')'
newline|'\n'
name|'ath'
op|'='
name|'auth'
op|'.'
name|'filter_factory'
op|'('
op|'{'
string|"'super_admin_key'"
op|':'
string|"'supertest'"
op|','
nl|'\n'
string|"'reseller_prefix'"
op|':'
string|"'TEST'"
op|'}'
op|')'
op|'('
name|'app'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'ath'
op|'.'
name|'reseller_prefix'
op|','
string|"'TEST_'"
op|')'
newline|'\n'
name|'ath'
op|'='
name|'auth'
op|'.'
name|'filter_factory'
op|'('
op|'{'
string|"'super_admin_key'"
op|':'
string|"'supertest'"
op|','
nl|'\n'
string|"'reseller_prefix'"
op|':'
string|"'TEST_'"
op|'}'
op|')'
op|'('
name|'app'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'ath'
op|'.'
name|'reseller_prefix'
op|','
string|"'TEST_'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_auth_prefix_init
dedent|''
name|'def'
name|'test_auth_prefix_init'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'app'
op|'='
name|'FakeApp'
op|'('
op|')'
newline|'\n'
name|'ath'
op|'='
name|'auth'
op|'.'
name|'filter_factory'
op|'('
op|'{'
string|"'super_admin_key'"
op|':'
string|"'supertest'"
op|'}'
op|')'
op|'('
name|'app'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'ath'
op|'.'
name|'auth_prefix'
op|','
string|"'/auth/'"
op|')'
newline|'\n'
name|'ath'
op|'='
name|'auth'
op|'.'
name|'filter_factory'
op|'('
op|'{'
string|"'super_admin_key'"
op|':'
string|"'supertest'"
op|','
nl|'\n'
string|"'auth_prefix'"
op|':'
string|"''"
op|'}'
op|')'
op|'('
name|'app'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'ath'
op|'.'
name|'auth_prefix'
op|','
string|"'/auth/'"
op|')'
newline|'\n'
name|'ath'
op|'='
name|'auth'
op|'.'
name|'filter_factory'
op|'('
op|'{'
string|"'super_admin_key'"
op|':'
string|"'supertest'"
op|','
nl|'\n'
string|"'auth_prefix'"
op|':'
string|"'/test/'"
op|'}'
op|')'
op|'('
name|'app'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'ath'
op|'.'
name|'auth_prefix'
op|','
string|"'/test/'"
op|')'
newline|'\n'
name|'ath'
op|'='
name|'auth'
op|'.'
name|'filter_factory'
op|'('
op|'{'
string|"'super_admin_key'"
op|':'
string|"'supertest'"
op|','
nl|'\n'
string|"'auth_prefix'"
op|':'
string|"'/test'"
op|'}'
op|')'
op|'('
name|'app'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'ath'
op|'.'
name|'auth_prefix'
op|','
string|"'/test/'"
op|')'
newline|'\n'
name|'ath'
op|'='
name|'auth'
op|'.'
name|'filter_factory'
op|'('
op|'{'
string|"'super_admin_key'"
op|':'
string|"'supertest'"
op|','
nl|'\n'
string|"'auth_prefix'"
op|':'
string|"'test/'"
op|'}'
op|')'
op|'('
name|'app'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'ath'
op|'.'
name|'auth_prefix'
op|','
string|"'/test/'"
op|')'
newline|'\n'
name|'ath'
op|'='
name|'auth'
op|'.'
name|'filter_factory'
op|'('
op|'{'
string|"'super_admin_key'"
op|':'
string|"'supertest'"
op|','
nl|'\n'
string|"'auth_prefix'"
op|':'
string|"'test'"
op|'}'
op|')'
op|'('
name|'app'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'ath'
op|'.'
name|'auth_prefix'
op|','
string|"'/test/'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_default_swift_cluster_init
dedent|''
name|'def'
name|'test_default_swift_cluster_init'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'app'
op|'='
name|'FakeApp'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertRaises'
op|'('
name|'Exception'
op|','
name|'auth'
op|'.'
name|'filter_factory'
op|'('
op|'{'
nl|'\n'
string|"'super_admin_key'"
op|':'
string|"'supertest'"
op|','
nl|'\n'
string|"'default_swift_cluster'"
op|':'
string|"'local#badscheme://host/path'"
op|'}'
op|')'
op|','
name|'app'
op|')'
newline|'\n'
name|'ath'
op|'='
name|'auth'
op|'.'
name|'filter_factory'
op|'('
op|'{'
string|"'super_admin_key'"
op|':'
string|"'supertest'"
op|'}'
op|')'
op|'('
name|'app'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'ath'
op|'.'
name|'default_swift_cluster'
op|','
nl|'\n'
string|"'local#http://127.0.0.1:8080/v1'"
op|')'
newline|'\n'
name|'ath'
op|'='
name|'auth'
op|'.'
name|'filter_factory'
op|'('
op|'{'
string|"'super_admin_key'"
op|':'
string|"'supertest'"
op|','
nl|'\n'
string|"'default_swift_cluster'"
op|':'
string|"'local#http://host/path'"
op|'}'
op|')'
op|'('
name|'app'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'ath'
op|'.'
name|'default_swift_cluster'
op|','
nl|'\n'
string|"'local#http://host/path'"
op|')'
newline|'\n'
name|'ath'
op|'='
name|'auth'
op|'.'
name|'filter_factory'
op|'('
op|'{'
string|"'super_admin_key'"
op|':'
string|"'supertest'"
op|','
nl|'\n'
string|"'default_swift_cluster'"
op|':'
string|"'local#https://host/path/'"
op|'}'
op|')'
op|'('
name|'app'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'ath'
op|'.'
name|'dsc_url'
op|','
string|"'https://host/path'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'ath'
op|'.'
name|'dsc_url2'
op|','
string|"'https://host/path'"
op|')'
newline|'\n'
name|'ath'
op|'='
name|'auth'
op|'.'
name|'filter_factory'
op|'('
op|'{'
string|"'super_admin_key'"
op|':'
string|"'supertest'"
op|','
nl|'\n'
string|"'default_swift_cluster'"
op|':'
nl|'\n'
string|"'local#https://host/path/#http://host2/path2/'"
op|'}'
op|')'
op|'('
name|'app'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'ath'
op|'.'
name|'dsc_url'
op|','
string|"'https://host/path'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'ath'
op|'.'
name|'dsc_url2'
op|','
string|"'http://host2/path2'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_top_level_ignore
dedent|''
name|'def'
name|'test_top_level_ignore'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/'"
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'404'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_anon
dedent|''
name|'def'
name|'test_anon'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/v1/AUTH_account'"
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'401'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'environ'
op|'['
string|"'swift.authorize'"
op|']'
op|','
nl|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'authorize'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_auth_deny_non_reseller_prefix
dedent|''
name|'def'
name|'test_auth_deny_non_reseller_prefix'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/v1/BLAH_account'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Token'"
op|':'
string|"'BLAH_t'"
op|'}'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'401'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'environ'
op|'['
string|"'swift.authorize'"
op|']'
op|','
nl|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'denied_response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_auth_deny_non_reseller_prefix_no_override
dedent|''
name|'def'
name|'test_auth_deny_non_reseller_prefix_no_override'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'fake_authorize'
op|'='
name|'lambda'
name|'x'
op|':'
name|'Response'
op|'('
name|'status'
op|'='
string|"'500 Fake'"
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/v1/BLAH_account'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Token'"
op|':'
string|"'BLAH_t'"
op|'}'
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'swift.authorize'"
op|':'
name|'fake_authorize'
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'500'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'environ'
op|'['
string|"'swift.authorize'"
op|']'
op|','
name|'fake_authorize'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_auth_no_reseller_prefix_deny
dedent|''
name|'def'
name|'test_auth_no_reseller_prefix_deny'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|"# Ensures that when we have no reseller prefix, we don't deny a request"
nl|'\n'
comment|'# outright but set up a denial swift.authorize and pass the request on'
nl|'\n'
comment|'# down the chain.'
nl|'\n'
indent|'        '
name|'local_app'
op|'='
name|'FakeApp'
op|'('
op|')'
newline|'\n'
name|'local_auth'
op|'='
name|'auth'
op|'.'
name|'filter_factory'
op|'('
op|'{'
string|"'super_admin_key'"
op|':'
string|"'supertest'"
op|','
nl|'\n'
string|"'reseller_prefix'"
op|':'
string|"''"
op|'}'
op|')'
op|'('
name|'local_app'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/v1/account'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Token'"
op|':'
string|"'t'"
op|'}'
op|')'
op|'.'
name|'get_response'
op|'('
name|'local_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'401'
op|')'
newline|'\n'
comment|'# one for checking auth, two for request passed along'
nl|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'local_app'
op|'.'
name|'calls'
op|','
number|'2'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'environ'
op|'['
string|"'swift.authorize'"
op|']'
op|','
nl|'\n'
name|'local_auth'
op|'.'
name|'denied_response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_auth_no_reseller_prefix_allow
dedent|''
name|'def'
name|'test_auth_no_reseller_prefix_allow'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Ensures that when we have no reseller prefix, we can still allow'
nl|'\n'
comment|'# access if our auth server accepts requests'
nl|'\n'
indent|'        '
name|'local_app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
nl|'\n'
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|"'account'"
op|':'
string|"'act'"
op|','
string|"'user'"
op|':'
string|"'act:usr'"
op|','
nl|'\n'
string|"'account_id'"
op|':'
string|"'AUTH_cfa'"
op|','
nl|'\n'
string|"'groups'"
op|':'
op|'['
op|'{'
string|"'name'"
op|':'
string|"'act:usr'"
op|'}'
op|','
op|'{'
string|"'name'"
op|':'
string|"'act'"
op|'}'
op|','
nl|'\n'
op|'{'
string|"'name'"
op|':'
string|"'.admin'"
op|'}'
op|']'
op|','
nl|'\n'
string|"'expires'"
op|':'
name|'time'
op|'('
op|')'
op|'+'
number|'60'
op|'}'
op|')'
op|')'
op|','
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'local_auth'
op|'='
name|'auth'
op|'.'
name|'filter_factory'
op|'('
op|'{'
string|"'super_admin_key'"
op|':'
string|"'supertest'"
op|','
nl|'\n'
string|"'reseller_prefix'"
op|':'
string|"''"
op|'}'
op|')'
op|'('
name|'local_app'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/v1/act'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Token'"
op|':'
string|"'t'"
op|'}'
op|')'
op|'.'
name|'get_response'
op|'('
name|'local_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'204'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'local_app'
op|'.'
name|'calls'
op|','
number|'2'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'environ'
op|'['
string|"'swift.authorize'"
op|']'
op|','
nl|'\n'
name|'local_auth'
op|'.'
name|'authorize'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_auth_no_reseller_prefix_no_token
dedent|''
name|'def'
name|'test_auth_no_reseller_prefix_no_token'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Check that normally we set up a call back to our authorize.'
nl|'\n'
indent|'        '
name|'local_auth'
op|'='
name|'auth'
op|'.'
name|'filter_factory'
op|'('
op|'{'
string|"'super_admin_key'"
op|':'
string|"'supertest'"
op|','
nl|'\n'
string|"'reseller_prefix'"
op|':'
string|"''"
op|'}'
op|')'
op|'('
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
op|']'
op|')'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/v1/account'"
op|')'
op|'.'
name|'get_response'
op|'('
name|'local_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'401'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'environ'
op|'['
string|"'swift.authorize'"
op|']'
op|','
nl|'\n'
name|'local_auth'
op|'.'
name|'authorize'
op|')'
newline|'\n'
comment|"# Now make sure we don't override an existing swift.authorize when we"
nl|'\n'
comment|'# have no reseller prefix.'
nl|'\n'
name|'local_auth'
op|'='
name|'auth'
op|'.'
name|'filter_factory'
op|'('
op|'{'
string|"'super_admin_key'"
op|':'
string|"'supertest'"
op|','
nl|'\n'
string|"'reseller_prefix'"
op|':'
string|"''"
op|'}'
op|')'
op|'('
name|'FakeApp'
op|'('
op|')'
op|')'
newline|'\n'
name|'local_authorize'
op|'='
name|'lambda'
name|'req'
op|':'
name|'Response'
op|'('
string|"'test'"
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/v1/account'"
op|','
name|'environ'
op|'='
op|'{'
string|"'swift.authorize'"
op|':'
nl|'\n'
name|'local_authorize'
op|'}'
op|')'
op|'.'
name|'get_response'
op|'('
name|'local_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'200'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'environ'
op|'['
string|"'swift.authorize'"
op|']'
op|','
name|'local_authorize'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_auth_fail
dedent|''
name|'def'
name|'test_auth_fail'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/v1/AUTH_cfa'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Token'"
op|':'
string|"'AUTH_t'"
op|'}'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'401'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_auth_success
dedent|''
name|'def'
name|'test_auth_success'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
nl|'\n'
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|"'account'"
op|':'
string|"'act'"
op|','
string|"'user'"
op|':'
string|"'act:usr'"
op|','
nl|'\n'
string|"'account_id'"
op|':'
string|"'AUTH_cfa'"
op|','
nl|'\n'
string|"'groups'"
op|':'
op|'['
op|'{'
string|"'name'"
op|':'
string|"'act:usr'"
op|'}'
op|','
op|'{'
string|"'name'"
op|':'
string|"'act'"
op|'}'
op|','
nl|'\n'
op|'{'
string|"'name'"
op|':'
string|"'.admin'"
op|'}'
op|']'
op|','
nl|'\n'
string|"'expires'"
op|':'
name|'time'
op|'('
op|')'
op|'+'
number|'60'
op|'}'
op|')'
op|')'
op|','
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/v1/AUTH_cfa'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Token'"
op|':'
string|"'AUTH_t'"
op|'}'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'204'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'2'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_auth_memcache
dedent|''
name|'def'
name|'test_auth_memcache'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# First run our test without memcache, showing we need to return the'
nl|'\n'
comment|'# token contents twice.'
nl|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
nl|'\n'
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|"'account'"
op|':'
string|"'act'"
op|','
string|"'user'"
op|':'
string|"'act:usr'"
op|','
nl|'\n'
string|"'account_id'"
op|':'
string|"'AUTH_cfa'"
op|','
nl|'\n'
string|"'groups'"
op|':'
op|'['
op|'{'
string|"'name'"
op|':'
string|"'act:usr'"
op|'}'
op|','
op|'{'
string|"'name'"
op|':'
string|"'act'"
op|'}'
op|','
nl|'\n'
op|'{'
string|"'name'"
op|':'
string|"'.admin'"
op|'}'
op|']'
op|','
nl|'\n'
string|"'expires'"
op|':'
name|'time'
op|'('
op|')'
op|'+'
number|'60'
op|'}'
op|')'
op|')'
op|','
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
nl|'\n'
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|"'account'"
op|':'
string|"'act'"
op|','
string|"'user'"
op|':'
string|"'act:usr'"
op|','
nl|'\n'
string|"'account_id'"
op|':'
string|"'AUTH_cfa'"
op|','
nl|'\n'
string|"'groups'"
op|':'
op|'['
op|'{'
string|"'name'"
op|':'
string|"'act:usr'"
op|'}'
op|','
op|'{'
string|"'name'"
op|':'
string|"'act'"
op|'}'
op|','
nl|'\n'
op|'{'
string|"'name'"
op|':'
string|"'.admin'"
op|'}'
op|']'
op|','
nl|'\n'
string|"'expires'"
op|':'
name|'time'
op|'('
op|')'
op|'+'
number|'60'
op|'}'
op|')'
op|')'
op|','
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/v1/AUTH_cfa'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Token'"
op|':'
string|"'AUTH_t'"
op|'}'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'204'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/v1/AUTH_cfa'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Token'"
op|':'
string|"'AUTH_t'"
op|'}'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'204'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'4'
op|')'
newline|'\n'
comment|'# Now run our test with memcache, showing we no longer need to return'
nl|'\n'
comment|'# the token contents twice.'
nl|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
nl|'\n'
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|"'account'"
op|':'
string|"'act'"
op|','
string|"'user'"
op|':'
string|"'act:usr'"
op|','
nl|'\n'
string|"'account_id'"
op|':'
string|"'AUTH_cfa'"
op|','
nl|'\n'
string|"'groups'"
op|':'
op|'['
op|'{'
string|"'name'"
op|':'
string|"'act:usr'"
op|'}'
op|','
op|'{'
string|"'name'"
op|':'
string|"'act'"
op|'}'
op|','
nl|'\n'
op|'{'
string|"'name'"
op|':'
string|"'.admin'"
op|'}'
op|']'
op|','
nl|'\n'
string|"'expires'"
op|':'
name|'time'
op|'('
op|')'
op|'+'
number|'60'
op|'}'
op|')'
op|')'
op|','
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|"# Don't need a second token object returned if memcache is used"
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'fake_memcache'
op|'='
name|'FakeMemcache'
op|'('
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/v1/AUTH_cfa'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Token'"
op|':'
string|"'AUTH_t'"
op|'}'
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'swift.cache'"
op|':'
name|'fake_memcache'
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'204'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/v1/AUTH_cfa'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Token'"
op|':'
string|"'AUTH_t'"
op|'}'
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'swift.cache'"
op|':'
name|'fake_memcache'
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'204'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'3'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_auth_just_expired
dedent|''
name|'def'
name|'test_auth_just_expired'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# Request for token (which will have expired)'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
nl|'\n'
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|"'account'"
op|':'
string|"'act'"
op|','
string|"'user'"
op|':'
string|"'act:usr'"
op|','
nl|'\n'
string|"'account_id'"
op|':'
string|"'AUTH_cfa'"
op|','
nl|'\n'
string|"'groups'"
op|':'
op|'['
op|'{'
string|"'name'"
op|':'
string|"'act:usr'"
op|'}'
op|','
op|'{'
string|"'name'"
op|':'
string|"'act'"
op|'}'
op|','
nl|'\n'
op|'{'
string|"'name'"
op|':'
string|"'.admin'"
op|'}'
op|']'
op|','
nl|'\n'
string|"'expires'"
op|':'
name|'time'
op|'('
op|')'
op|'-'
number|'1'
op|'}'
op|')'
op|')'
op|','
nl|'\n'
comment|'# Request to delete token'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/v1/AUTH_cfa'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Token'"
op|':'
string|"'AUTH_t'"
op|'}'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'401'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'2'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_middleware_storage_token
dedent|''
name|'def'
name|'test_middleware_storage_token'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
nl|'\n'
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|"'account'"
op|':'
string|"'act'"
op|','
string|"'user'"
op|':'
string|"'act:usr'"
op|','
nl|'\n'
string|"'account_id'"
op|':'
string|"'AUTH_cfa'"
op|','
nl|'\n'
string|"'groups'"
op|':'
op|'['
op|'{'
string|"'name'"
op|':'
string|"'act:usr'"
op|'}'
op|','
op|'{'
string|"'name'"
op|':'
string|"'act'"
op|'}'
op|','
nl|'\n'
op|'{'
string|"'name'"
op|':'
string|"'.admin'"
op|'}'
op|']'
op|','
nl|'\n'
string|"'expires'"
op|':'
name|'time'
op|'('
op|')'
op|'+'
number|'60'
op|'}'
op|')'
op|')'
op|','
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/v1/AUTH_cfa'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Storage-Token'"
op|':'
string|"'AUTH_t'"
op|'}'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'204'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'2'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_authorize_bad_path
dedent|''
name|'def'
name|'test_authorize_bad_path'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/badpath'"
op|')'
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'authorize'
op|'('
name|'req'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'401'
op|')'
newline|'\n'
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/badpath'"
op|')'
newline|'\n'
name|'req'
op|'.'
name|'remote_user'
op|'='
string|"'act:usr,act,AUTH_cfa'"
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'authorize'
op|'('
name|'req'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'403'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_authorize_account_access
dedent|''
name|'def'
name|'test_authorize_account_access'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/v1/AUTH_cfa'"
op|')'
newline|'\n'
name|'req'
op|'.'
name|'remote_user'
op|'='
string|"'act:usr,act,AUTH_cfa'"
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'authorize'
op|'('
name|'req'
op|')'
op|','
name|'None'
op|')'
newline|'\n'
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/v1/AUTH_cfa'"
op|')'
newline|'\n'
name|'req'
op|'.'
name|'remote_user'
op|'='
string|"'act:usr,act'"
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'authorize'
op|'('
name|'req'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'403'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_authorize_acl_group_access
dedent|''
name|'def'
name|'test_authorize_acl_group_access'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/v1/AUTH_cfa'"
op|')'
newline|'\n'
name|'req'
op|'.'
name|'remote_user'
op|'='
string|"'act:usr,act'"
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'authorize'
op|'('
name|'req'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'403'
op|')'
newline|'\n'
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/v1/AUTH_cfa'"
op|')'
newline|'\n'
name|'req'
op|'.'
name|'remote_user'
op|'='
string|"'act:usr,act'"
newline|'\n'
name|'req'
op|'.'
name|'acl'
op|'='
string|"'act'"
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'authorize'
op|'('
name|'req'
op|')'
op|','
name|'None'
op|')'
newline|'\n'
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/v1/AUTH_cfa'"
op|')'
newline|'\n'
name|'req'
op|'.'
name|'remote_user'
op|'='
string|"'act:usr,act'"
newline|'\n'
name|'req'
op|'.'
name|'acl'
op|'='
string|"'act:usr'"
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'authorize'
op|'('
name|'req'
op|')'
op|','
name|'None'
op|')'
newline|'\n'
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/v1/AUTH_cfa'"
op|')'
newline|'\n'
name|'req'
op|'.'
name|'remote_user'
op|'='
string|"'act:usr,act'"
newline|'\n'
name|'req'
op|'.'
name|'acl'
op|'='
string|"'act2'"
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'authorize'
op|'('
name|'req'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'403'
op|')'
newline|'\n'
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/v1/AUTH_cfa'"
op|')'
newline|'\n'
name|'req'
op|'.'
name|'remote_user'
op|'='
string|"'act:usr,act'"
newline|'\n'
name|'req'
op|'.'
name|'acl'
op|'='
string|"'act:usr2'"
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'authorize'
op|'('
name|'req'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'403'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_deny_cross_reseller
dedent|''
name|'def'
name|'test_deny_cross_reseller'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Tests that cross-reseller is denied, even if ACLs/group names match'
nl|'\n'
indent|'        '
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/v1/OTHER_cfa'"
op|')'
newline|'\n'
name|'req'
op|'.'
name|'remote_user'
op|'='
string|"'act:usr,act,AUTH_cfa'"
newline|'\n'
name|'req'
op|'.'
name|'acl'
op|'='
string|"'act'"
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'authorize'
op|'('
name|'req'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'403'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_authorize_acl_referrer_access
dedent|''
name|'def'
name|'test_authorize_acl_referrer_access'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/v1/AUTH_cfa'"
op|')'
newline|'\n'
name|'req'
op|'.'
name|'remote_user'
op|'='
string|"'act:usr,act'"
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'authorize'
op|'('
name|'req'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'403'
op|')'
newline|'\n'
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/v1/AUTH_cfa'"
op|')'
newline|'\n'
name|'req'
op|'.'
name|'remote_user'
op|'='
string|"'act:usr,act'"
newline|'\n'
name|'req'
op|'.'
name|'acl'
op|'='
string|"'.r:*'"
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'authorize'
op|'('
name|'req'
op|')'
op|','
name|'None'
op|')'
newline|'\n'
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/v1/AUTH_cfa'"
op|')'
newline|'\n'
name|'req'
op|'.'
name|'remote_user'
op|'='
string|"'act:usr,act'"
newline|'\n'
name|'req'
op|'.'
name|'acl'
op|'='
string|"'.r:.example.com'"
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'authorize'
op|'('
name|'req'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'403'
op|')'
newline|'\n'
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/v1/AUTH_cfa'"
op|')'
newline|'\n'
name|'req'
op|'.'
name|'remote_user'
op|'='
string|"'act:usr,act'"
newline|'\n'
name|'req'
op|'.'
name|'referer'
op|'='
string|"'http://www.example.com/index.html'"
newline|'\n'
name|'req'
op|'.'
name|'acl'
op|'='
string|"'.r:.example.com'"
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'authorize'
op|'('
name|'req'
op|')'
op|','
name|'None'
op|')'
newline|'\n'
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/v1/AUTH_cfa'"
op|')'
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'authorize'
op|'('
name|'req'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'401'
op|')'
newline|'\n'
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/v1/AUTH_cfa'"
op|')'
newline|'\n'
name|'req'
op|'.'
name|'acl'
op|'='
string|"'.r:*'"
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'authorize'
op|'('
name|'req'
op|')'
op|','
name|'None'
op|')'
newline|'\n'
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/v1/AUTH_cfa'"
op|')'
newline|'\n'
name|'req'
op|'.'
name|'acl'
op|'='
string|"'.r:.example.com'"
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'authorize'
op|'('
name|'req'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'401'
op|')'
newline|'\n'
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/v1/AUTH_cfa'"
op|')'
newline|'\n'
name|'req'
op|'.'
name|'referer'
op|'='
string|"'http://www.example.com/index.html'"
newline|'\n'
name|'req'
op|'.'
name|'acl'
op|'='
string|"'.r:.example.com'"
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'authorize'
op|'('
name|'req'
op|')'
op|','
name|'None'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_account_put_permissions
dedent|''
name|'def'
name|'test_account_put_permissions'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/v1/AUTH_new'"
op|','
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'PUT'"
op|'}'
op|')'
newline|'\n'
name|'req'
op|'.'
name|'remote_user'
op|'='
string|"'act:usr,act'"
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'authorize'
op|'('
name|'req'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'403'
op|')'
newline|'\n'
nl|'\n'
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/v1/AUTH_new'"
op|','
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'PUT'"
op|'}'
op|')'
newline|'\n'
name|'req'
op|'.'
name|'remote_user'
op|'='
string|"'act:usr,act,AUTH_other'"
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'authorize'
op|'('
name|'req'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'403'
op|')'
newline|'\n'
nl|'\n'
comment|'# Even PUTs to your own account as account admin should fail'
nl|'\n'
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/v1/AUTH_old'"
op|','
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'PUT'"
op|'}'
op|')'
newline|'\n'
name|'req'
op|'.'
name|'remote_user'
op|'='
string|"'act:usr,act,AUTH_old'"
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'authorize'
op|'('
name|'req'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'403'
op|')'
newline|'\n'
nl|'\n'
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/v1/AUTH_new'"
op|','
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'PUT'"
op|'}'
op|')'
newline|'\n'
name|'req'
op|'.'
name|'remote_user'
op|'='
string|"'act:usr,act,.reseller_admin'"
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'authorize'
op|'('
name|'req'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|','
name|'None'
op|')'
newline|'\n'
nl|'\n'
comment|'# .super_admin is not something the middleware should ever see or care'
nl|'\n'
comment|'# about'
nl|'\n'
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/v1/AUTH_new'"
op|','
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'PUT'"
op|'}'
op|')'
newline|'\n'
name|'req'
op|'.'
name|'remote_user'
op|'='
string|"'act:usr,act,.super_admin'"
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'authorize'
op|'('
name|'req'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'403'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_account_delete_permissions
dedent|''
name|'def'
name|'test_account_delete_permissions'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/v1/AUTH_new'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'DELETE'"
op|'}'
op|')'
newline|'\n'
name|'req'
op|'.'
name|'remote_user'
op|'='
string|"'act:usr,act'"
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'authorize'
op|'('
name|'req'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'403'
op|')'
newline|'\n'
nl|'\n'
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/v1/AUTH_new'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'DELETE'"
op|'}'
op|')'
newline|'\n'
name|'req'
op|'.'
name|'remote_user'
op|'='
string|"'act:usr,act,AUTH_other'"
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'authorize'
op|'('
name|'req'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'403'
op|')'
newline|'\n'
nl|'\n'
comment|'# Even DELETEs to your own account as account admin should fail'
nl|'\n'
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/v1/AUTH_old'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'DELETE'"
op|'}'
op|')'
newline|'\n'
name|'req'
op|'.'
name|'remote_user'
op|'='
string|"'act:usr,act,AUTH_old'"
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'authorize'
op|'('
name|'req'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'403'
op|')'
newline|'\n'
nl|'\n'
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/v1/AUTH_new'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'DELETE'"
op|'}'
op|')'
newline|'\n'
name|'req'
op|'.'
name|'remote_user'
op|'='
string|"'act:usr,act,.reseller_admin'"
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'authorize'
op|'('
name|'req'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|','
name|'None'
op|')'
newline|'\n'
nl|'\n'
comment|'# .super_admin is not something the middleware should ever see or care'
nl|'\n'
comment|'# about'
nl|'\n'
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/v1/AUTH_new'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'DELETE'"
op|'}'
op|')'
newline|'\n'
name|'req'
op|'.'
name|'remote_user'
op|'='
string|"'act:usr,act,.super_admin'"
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'authorize'
op|'('
name|'req'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'authorize'
op|'('
name|'req'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'403'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_token_fail
dedent|''
name|'def'
name|'test_get_token_fail'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v1.0'"
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'401'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v1.0'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-User'"
op|':'
string|"'act:usr'"
op|','
nl|'\n'
string|"'X-Auth-Key'"
op|':'
string|"'key'"
op|'}'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'401'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_token_fail_invalid_key
dedent|''
name|'def'
name|'test_get_token_fail_invalid_key'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of user object'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
nl|'\n'
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"auth"'
op|':'
string|'"plaintext:key"'
op|','
nl|'\n'
string|'"groups"'
op|':'
op|'['
op|'{'
string|"'name'"
op|':'
string|'"act:usr"'
op|'}'
op|','
op|'{'
string|"'name'"
op|':'
string|'"act"'
op|'}'
op|','
nl|'\n'
op|'{'
string|"'name'"
op|':'
string|'".admin"'
op|'}'
op|']'
op|'}'
op|')'
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v1.0'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-User'"
op|':'
string|"'act:usr'"
op|','
nl|'\n'
string|"'X-Auth-Key'"
op|':'
string|"'invalid'"
op|'}'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'401'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_token_fail_invalid_x_auth_user_format
dedent|''
name|'def'
name|'test_get_token_fail_invalid_x_auth_user_format'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v1/act/auth'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-User'"
op|':'
string|"'usr'"
op|','
nl|'\n'
string|"'X-Auth-Key'"
op|':'
string|"'key'"
op|'}'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'401'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_token_fail_non_matching_account_in_request
dedent|''
name|'def'
name|'test_get_token_fail_non_matching_account_in_request'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v1/act/auth'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-User'"
op|':'
string|"'act2:usr'"
op|','
nl|'\n'
string|"'X-Auth-Key'"
op|':'
string|"'key'"
op|'}'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'401'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_token_fail_bad_path
dedent|''
name|'def'
name|'test_get_token_fail_bad_path'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v1/act/auth/invalid'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-User'"
op|':'
string|"'act:usr'"
op|','
nl|'\n'
string|"'X-Auth-Key'"
op|':'
string|"'key'"
op|'}'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'400'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_token_fail_missing_key
dedent|''
name|'def'
name|'test_get_token_fail_missing_key'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v1/act/auth'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-User'"
op|':'
string|"'act:usr'"
op|'}'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'401'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_token_fail_get_user_details
dedent|''
name|'def'
name|'test_get_token_fail_get_user_details'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
op|'('
string|"'503 Service Unavailable'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v1.0'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-User'"
op|':'
string|"'act:usr'"
op|','
nl|'\n'
string|"'X-Auth-Key'"
op|':'
string|"'key'"
op|'}'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'500'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_token_fail_get_account
dedent|''
name|'def'
name|'test_get_token_fail_get_account'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of user object'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
nl|'\n'
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"auth"'
op|':'
string|'"plaintext:key"'
op|','
nl|'\n'
string|'"groups"'
op|':'
op|'['
op|'{'
string|"'name'"
op|':'
string|'"act:usr"'
op|'}'
op|','
op|'{'
string|"'name'"
op|':'
string|'"act"'
op|'}'
op|','
nl|'\n'
op|'{'
string|"'name'"
op|':'
string|'".admin"'
op|'}'
op|']'
op|'}'
op|')'
op|')'
op|','
nl|'\n'
comment|'# GET of account'
nl|'\n'
op|'('
string|"'503 Service Unavailable'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v1.0'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-User'"
op|':'
string|"'act:usr'"
op|','
nl|'\n'
string|"'X-Auth-Key'"
op|':'
string|"'key'"
op|'}'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'500'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'2'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_token_fail_put_new_token
dedent|''
name|'def'
name|'test_get_token_fail_put_new_token'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of user object'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
nl|'\n'
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"auth"'
op|':'
string|'"plaintext:key"'
op|','
nl|'\n'
string|'"groups"'
op|':'
op|'['
op|'{'
string|"'name'"
op|':'
string|'"act:usr"'
op|'}'
op|','
op|'{'
string|"'name'"
op|':'
string|'"act"'
op|'}'
op|','
nl|'\n'
op|'{'
string|"'name'"
op|':'
string|'".admin"'
op|'}'
op|']'
op|'}'
op|')'
op|')'
op|','
nl|'\n'
comment|'# GET of account'
nl|'\n'
op|'('
string|"'204 Ok'"
op|','
op|'{'
string|"'X-Container-Meta-Account-Id'"
op|':'
string|"'AUTH_cfa'"
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# PUT of new token'
nl|'\n'
op|'('
string|"'503 Service Unavailable'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v1.0'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-User'"
op|':'
string|"'act:usr'"
op|','
nl|'\n'
string|"'X-Auth-Key'"
op|':'
string|"'key'"
op|'}'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'500'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'3'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_token_fail_post_to_user
dedent|''
name|'def'
name|'test_get_token_fail_post_to_user'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of user object'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
nl|'\n'
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"auth"'
op|':'
string|'"plaintext:key"'
op|','
nl|'\n'
string|'"groups"'
op|':'
op|'['
op|'{'
string|"'name'"
op|':'
string|'"act:usr"'
op|'}'
op|','
op|'{'
string|"'name'"
op|':'
string|'"act"'
op|'}'
op|','
nl|'\n'
op|'{'
string|"'name'"
op|':'
string|'".admin"'
op|'}'
op|']'
op|'}'
op|')'
op|')'
op|','
nl|'\n'
comment|'# GET of account'
nl|'\n'
op|'('
string|"'204 Ok'"
op|','
op|'{'
string|"'X-Container-Meta-Account-Id'"
op|':'
string|"'AUTH_cfa'"
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# PUT of new token'
nl|'\n'
op|'('
string|"'201 Created'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# POST of token to user object'
nl|'\n'
op|'('
string|"'503 Service Unavailable'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v1.0'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-User'"
op|':'
string|"'act:usr'"
op|','
nl|'\n'
string|"'X-Auth-Key'"
op|':'
string|"'key'"
op|'}'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'500'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'4'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_token_fail_get_services
dedent|''
name|'def'
name|'test_get_token_fail_get_services'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of user object'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
nl|'\n'
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"auth"'
op|':'
string|'"plaintext:key"'
op|','
nl|'\n'
string|'"groups"'
op|':'
op|'['
op|'{'
string|"'name'"
op|':'
string|'"act:usr"'
op|'}'
op|','
op|'{'
string|"'name'"
op|':'
string|'"act"'
op|'}'
op|','
nl|'\n'
op|'{'
string|"'name'"
op|':'
string|'".admin"'
op|'}'
op|']'
op|'}'
op|')'
op|')'
op|','
nl|'\n'
comment|'# GET of account'
nl|'\n'
op|'('
string|"'204 Ok'"
op|','
op|'{'
string|"'X-Container-Meta-Account-Id'"
op|':'
string|"'AUTH_cfa'"
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# PUT of new token'
nl|'\n'
op|'('
string|"'201 Created'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# POST of token to user object'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# GET of services object'
nl|'\n'
op|'('
string|"'503 Service Unavailable'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v1.0'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-User'"
op|':'
string|"'act:usr'"
op|','
nl|'\n'
string|"'X-Auth-Key'"
op|':'
string|"'key'"
op|'}'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'500'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'5'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_token_fail_get_existing_token
dedent|''
name|'def'
name|'test_get_token_fail_get_existing_token'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of user object'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
string|"'X-Object-Meta-Auth-Token'"
op|':'
string|"'AUTH_tktest'"
op|'}'
op|','
nl|'\n'
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"auth"'
op|':'
string|'"plaintext:key"'
op|','
nl|'\n'
string|'"groups"'
op|':'
op|'['
op|'{'
string|"'name'"
op|':'
string|'"act:usr"'
op|'}'
op|','
op|'{'
string|"'name'"
op|':'
string|'"act"'
op|'}'
op|','
nl|'\n'
op|'{'
string|"'name'"
op|':'
string|'".admin"'
op|'}'
op|']'
op|'}'
op|')'
op|')'
op|','
nl|'\n'
comment|'# GET of token'
nl|'\n'
op|'('
string|"'503 Service Unavailable'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v1.0'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-User'"
op|':'
string|"'act:usr'"
op|','
nl|'\n'
string|"'X-Auth-Key'"
op|':'
string|"'key'"
op|'}'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'500'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'2'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_token_success_v1_0
dedent|''
name|'def'
name|'test_get_token_success_v1_0'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of user object'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
nl|'\n'
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"auth"'
op|':'
string|'"plaintext:key"'
op|','
nl|'\n'
string|'"groups"'
op|':'
op|'['
op|'{'
string|"'name'"
op|':'
string|'"act:usr"'
op|'}'
op|','
op|'{'
string|"'name'"
op|':'
string|'"act"'
op|'}'
op|','
nl|'\n'
op|'{'
string|"'name'"
op|':'
string|'".admin"'
op|'}'
op|']'
op|'}'
op|')'
op|')'
op|','
nl|'\n'
comment|'# GET of account'
nl|'\n'
op|'('
string|"'204 Ok'"
op|','
op|'{'
string|"'X-Container-Meta-Account-Id'"
op|':'
string|"'AUTH_cfa'"
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# PUT of new token'
nl|'\n'
op|'('
string|"'201 Created'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# POST of token to user object'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# GET of services object'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"storage"'
op|':'
op|'{'
string|'"default"'
op|':'
string|'"local"'
op|','
nl|'\n'
string|'"local"'
op|':'
string|'"http://127.0.0.1:8080/v1/AUTH_cfa"'
op|'}'
op|'}'
op|')'
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v1.0'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-User'"
op|':'
string|"'act:usr'"
op|','
nl|'\n'
string|"'X-Auth-Key'"
op|':'
string|"'key'"
op|'}'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'200'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assert_'
op|'('
name|'resp'
op|'.'
name|'headers'
op|'.'
name|'get'
op|'('
string|"'x-auth-token'"
op|','
nl|'\n'
string|"''"
op|')'
op|'.'
name|'startswith'
op|'('
string|"'AUTH_tk'"
op|')'
op|','
name|'resp'
op|'.'
name|'headers'
op|'.'
name|'get'
op|'('
string|"'x-auth-token'"
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'headers'
op|'.'
name|'get'
op|'('
string|"'x-auth-token'"
op|')'
op|','
nl|'\n'
name|'resp'
op|'.'
name|'headers'
op|'.'
name|'get'
op|'('
string|"'x-storage-token'"
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'headers'
op|'.'
name|'get'
op|'('
string|"'x-storage-url'"
op|')'
op|','
nl|'\n'
string|"'http://127.0.0.1:8080/v1/AUTH_cfa'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'json'
op|'.'
name|'loads'
op|'('
name|'resp'
op|'.'
name|'body'
op|')'
op|','
nl|'\n'
op|'{'
string|'"storage"'
op|':'
op|'{'
string|'"default"'
op|':'
string|'"local"'
op|','
nl|'\n'
string|'"local"'
op|':'
string|'"http://127.0.0.1:8080/v1/AUTH_cfa"'
op|'}'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'5'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_token_success_v1_act_auth
dedent|''
name|'def'
name|'test_get_token_success_v1_act_auth'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of user object'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
nl|'\n'
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"auth"'
op|':'
string|'"plaintext:key"'
op|','
nl|'\n'
string|'"groups"'
op|':'
op|'['
op|'{'
string|"'name'"
op|':'
string|'"act:usr"'
op|'}'
op|','
op|'{'
string|"'name'"
op|':'
string|'"act"'
op|'}'
op|','
nl|'\n'
op|'{'
string|"'name'"
op|':'
string|'".admin"'
op|'}'
op|']'
op|'}'
op|')'
op|')'
op|','
nl|'\n'
comment|'# GET of account'
nl|'\n'
op|'('
string|"'204 Ok'"
op|','
op|'{'
string|"'X-Container-Meta-Account-Id'"
op|':'
string|"'AUTH_cfa'"
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# PUT of new token'
nl|'\n'
op|'('
string|"'201 Created'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# POST of token to user object'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# GET of services object'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"storage"'
op|':'
op|'{'
string|'"default"'
op|':'
string|'"local"'
op|','
nl|'\n'
string|'"local"'
op|':'
string|'"http://127.0.0.1:8080/v1/AUTH_cfa"'
op|'}'
op|'}'
op|')'
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v1/act/auth'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Storage-User'"
op|':'
string|"'usr'"
op|','
nl|'\n'
string|"'X-Storage-Pass'"
op|':'
string|"'key'"
op|'}'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'200'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assert_'
op|'('
name|'resp'
op|'.'
name|'headers'
op|'.'
name|'get'
op|'('
string|"'x-auth-token'"
op|','
nl|'\n'
string|"''"
op|')'
op|'.'
name|'startswith'
op|'('
string|"'AUTH_tk'"
op|')'
op|','
name|'resp'
op|'.'
name|'headers'
op|'.'
name|'get'
op|'('
string|"'x-auth-token'"
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'headers'
op|'.'
name|'get'
op|'('
string|"'x-auth-token'"
op|')'
op|','
nl|'\n'
name|'resp'
op|'.'
name|'headers'
op|'.'
name|'get'
op|'('
string|"'x-storage-token'"
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'headers'
op|'.'
name|'get'
op|'('
string|"'x-storage-url'"
op|')'
op|','
nl|'\n'
string|"'http://127.0.0.1:8080/v1/AUTH_cfa'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'json'
op|'.'
name|'loads'
op|'('
name|'resp'
op|'.'
name|'body'
op|')'
op|','
nl|'\n'
op|'{'
string|'"storage"'
op|':'
op|'{'
string|'"default"'
op|':'
string|'"local"'
op|','
nl|'\n'
string|'"local"'
op|':'
string|'"http://127.0.0.1:8080/v1/AUTH_cfa"'
op|'}'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'5'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_token_success_storage_instead_of_auth
dedent|''
name|'def'
name|'test_get_token_success_storage_instead_of_auth'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of user object'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
nl|'\n'
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"auth"'
op|':'
string|'"plaintext:key"'
op|','
nl|'\n'
string|'"groups"'
op|':'
op|'['
op|'{'
string|"'name'"
op|':'
string|'"act:usr"'
op|'}'
op|','
op|'{'
string|"'name'"
op|':'
string|'"act"'
op|'}'
op|','
nl|'\n'
op|'{'
string|"'name'"
op|':'
string|'".admin"'
op|'}'
op|']'
op|'}'
op|')'
op|')'
op|','
nl|'\n'
comment|'# GET of account'
nl|'\n'
op|'('
string|"'204 Ok'"
op|','
op|'{'
string|"'X-Container-Meta-Account-Id'"
op|':'
string|"'AUTH_cfa'"
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# PUT of new token'
nl|'\n'
op|'('
string|"'201 Created'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# POST of token to user object'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# GET of services object'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"storage"'
op|':'
op|'{'
string|'"default"'
op|':'
string|'"local"'
op|','
nl|'\n'
string|'"local"'
op|':'
string|'"http://127.0.0.1:8080/v1/AUTH_cfa"'
op|'}'
op|'}'
op|')'
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v1.0'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Storage-User'"
op|':'
string|"'act:usr'"
op|','
nl|'\n'
string|"'X-Storage-Pass'"
op|':'
string|"'key'"
op|'}'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'200'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assert_'
op|'('
name|'resp'
op|'.'
name|'headers'
op|'.'
name|'get'
op|'('
string|"'x-auth-token'"
op|','
nl|'\n'
string|"''"
op|')'
op|'.'
name|'startswith'
op|'('
string|"'AUTH_tk'"
op|')'
op|','
name|'resp'
op|'.'
name|'headers'
op|'.'
name|'get'
op|'('
string|"'x-auth-token'"
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'headers'
op|'.'
name|'get'
op|'('
string|"'x-auth-token'"
op|')'
op|','
nl|'\n'
name|'resp'
op|'.'
name|'headers'
op|'.'
name|'get'
op|'('
string|"'x-storage-token'"
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'headers'
op|'.'
name|'get'
op|'('
string|"'x-storage-url'"
op|')'
op|','
nl|'\n'
string|"'http://127.0.0.1:8080/v1/AUTH_cfa'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'json'
op|'.'
name|'loads'
op|'('
name|'resp'
op|'.'
name|'body'
op|')'
op|','
nl|'\n'
op|'{'
string|'"storage"'
op|':'
op|'{'
string|'"default"'
op|':'
string|'"local"'
op|','
nl|'\n'
string|'"local"'
op|':'
string|'"http://127.0.0.1:8080/v1/AUTH_cfa"'
op|'}'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'5'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_token_success_v1_act_auth_auth_instead_of_storage
dedent|''
name|'def'
name|'test_get_token_success_v1_act_auth_auth_instead_of_storage'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of user object'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
nl|'\n'
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"auth"'
op|':'
string|'"plaintext:key"'
op|','
nl|'\n'
string|'"groups"'
op|':'
op|'['
op|'{'
string|"'name'"
op|':'
string|'"act:usr"'
op|'}'
op|','
op|'{'
string|"'name'"
op|':'
string|'"act"'
op|'}'
op|','
nl|'\n'
op|'{'
string|"'name'"
op|':'
string|'".admin"'
op|'}'
op|']'
op|'}'
op|')'
op|')'
op|','
nl|'\n'
comment|'# GET of account'
nl|'\n'
op|'('
string|"'204 Ok'"
op|','
op|'{'
string|"'X-Container-Meta-Account-Id'"
op|':'
string|"'AUTH_cfa'"
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# PUT of new token'
nl|'\n'
op|'('
string|"'201 Created'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# POST of token to user object'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# GET of services object'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"storage"'
op|':'
op|'{'
string|'"default"'
op|':'
string|'"local"'
op|','
nl|'\n'
string|'"local"'
op|':'
string|'"http://127.0.0.1:8080/v1/AUTH_cfa"'
op|'}'
op|'}'
op|')'
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v1/act/auth'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-User'"
op|':'
string|"'act:usr'"
op|','
nl|'\n'
string|"'X-Auth-Key'"
op|':'
string|"'key'"
op|'}'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'200'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assert_'
op|'('
name|'resp'
op|'.'
name|'headers'
op|'.'
name|'get'
op|'('
string|"'x-auth-token'"
op|','
nl|'\n'
string|"''"
op|')'
op|'.'
name|'startswith'
op|'('
string|"'AUTH_tk'"
op|')'
op|','
name|'resp'
op|'.'
name|'headers'
op|'.'
name|'get'
op|'('
string|"'x-auth-token'"
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'headers'
op|'.'
name|'get'
op|'('
string|"'x-auth-token'"
op|')'
op|','
nl|'\n'
name|'resp'
op|'.'
name|'headers'
op|'.'
name|'get'
op|'('
string|"'x-storage-token'"
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'headers'
op|'.'
name|'get'
op|'('
string|"'x-storage-url'"
op|')'
op|','
nl|'\n'
string|"'http://127.0.0.1:8080/v1/AUTH_cfa'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'json'
op|'.'
name|'loads'
op|'('
name|'resp'
op|'.'
name|'body'
op|')'
op|','
nl|'\n'
op|'{'
string|'"storage"'
op|':'
op|'{'
string|'"default"'
op|':'
string|'"local"'
op|','
nl|'\n'
string|'"local"'
op|':'
string|'"http://127.0.0.1:8080/v1/AUTH_cfa"'
op|'}'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'5'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_token_success_existing_token
dedent|''
name|'def'
name|'test_get_token_success_existing_token'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of user object'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
string|"'X-Object-Meta-Auth-Token'"
op|':'
string|"'AUTH_tktest'"
op|'}'
op|','
nl|'\n'
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"auth"'
op|':'
string|'"plaintext:key"'
op|','
nl|'\n'
string|'"groups"'
op|':'
op|'['
op|'{'
string|"'name'"
op|':'
string|'"act:usr"'
op|'}'
op|','
op|'{'
string|"'name'"
op|':'
string|'"act"'
op|'}'
op|','
nl|'\n'
op|'{'
string|"'name'"
op|':'
string|'".admin"'
op|'}'
op|']'
op|'}'
op|')'
op|')'
op|','
nl|'\n'
comment|'# GET of token'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"account"'
op|':'
string|'"act"'
op|','
string|'"user"'
op|':'
string|'"usr"'
op|','
nl|'\n'
string|'"account_id"'
op|':'
string|'"AUTH_cfa"'
op|','
string|'"groups"'
op|':'
op|'['
op|'{'
string|"'name'"
op|':'
string|'"act:usr"'
op|'}'
op|','
nl|'\n'
op|'{'
string|"'name'"
op|':'
string|'"key"'
op|'}'
op|','
op|'{'
string|"'name'"
op|':'
string|'".admin"'
op|'}'
op|']'
op|','
nl|'\n'
string|'"expires"'
op|':'
number|'9999999999.9999999'
op|'}'
op|')'
op|')'
op|','
nl|'\n'
comment|'# GET of services object'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"storage"'
op|':'
op|'{'
string|'"default"'
op|':'
string|'"local"'
op|','
nl|'\n'
string|'"local"'
op|':'
string|'"http://127.0.0.1:8080/v1/AUTH_cfa"'
op|'}'
op|'}'
op|')'
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v1.0'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-User'"
op|':'
string|"'act:usr'"
op|','
nl|'\n'
string|"'X-Auth-Key'"
op|':'
string|"'key'"
op|'}'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'200'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'headers'
op|'.'
name|'get'
op|'('
string|"'x-auth-token'"
op|')'
op|','
string|"'AUTH_tktest'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'headers'
op|'.'
name|'get'
op|'('
string|"'x-auth-token'"
op|')'
op|','
nl|'\n'
name|'resp'
op|'.'
name|'headers'
op|'.'
name|'get'
op|'('
string|"'x-storage-token'"
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'headers'
op|'.'
name|'get'
op|'('
string|"'x-storage-url'"
op|')'
op|','
nl|'\n'
string|"'http://127.0.0.1:8080/v1/AUTH_cfa'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'json'
op|'.'
name|'loads'
op|'('
name|'resp'
op|'.'
name|'body'
op|')'
op|','
nl|'\n'
op|'{'
string|'"storage"'
op|':'
op|'{'
string|'"default"'
op|':'
string|'"local"'
op|','
nl|'\n'
string|'"local"'
op|':'
string|'"http://127.0.0.1:8080/v1/AUTH_cfa"'
op|'}'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'3'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_token_success_existing_token_expired
dedent|''
name|'def'
name|'test_get_token_success_existing_token_expired'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of user object'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
string|"'X-Object-Meta-Auth-Token'"
op|':'
string|"'AUTH_tktest'"
op|'}'
op|','
nl|'\n'
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"auth"'
op|':'
string|'"plaintext:key"'
op|','
nl|'\n'
string|'"groups"'
op|':'
op|'['
op|'{'
string|"'name'"
op|':'
string|'"act:usr"'
op|'}'
op|','
op|'{'
string|"'name'"
op|':'
string|'"act"'
op|'}'
op|','
nl|'\n'
op|'{'
string|"'name'"
op|':'
string|'".admin"'
op|'}'
op|']'
op|'}'
op|')'
op|')'
op|','
nl|'\n'
comment|'# GET of token'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"account"'
op|':'
string|'"act"'
op|','
string|'"user"'
op|':'
string|'"usr"'
op|','
nl|'\n'
string|'"account_id"'
op|':'
string|'"AUTH_cfa"'
op|','
string|'"groups"'
op|':'
op|'['
op|'{'
string|"'name'"
op|':'
string|'"act:usr"'
op|'}'
op|','
nl|'\n'
op|'{'
string|"'name'"
op|':'
string|'"key"'
op|'}'
op|','
op|'{'
string|"'name'"
op|':'
string|'".admin"'
op|'}'
op|']'
op|','
nl|'\n'
string|'"expires"'
op|':'
number|'0.0'
op|'}'
op|')'
op|')'
op|','
nl|'\n'
comment|'# DELETE of expired token'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# GET of account'
nl|'\n'
op|'('
string|"'204 Ok'"
op|','
op|'{'
string|"'X-Container-Meta-Account-Id'"
op|':'
string|"'AUTH_cfa'"
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# PUT of new token'
nl|'\n'
op|'('
string|"'201 Created'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# POST of token to user object'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# GET of services object'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"storage"'
op|':'
op|'{'
string|'"default"'
op|':'
string|'"local"'
op|','
nl|'\n'
string|'"local"'
op|':'
string|'"http://127.0.0.1:8080/v1/AUTH_cfa"'
op|'}'
op|'}'
op|')'
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v1.0'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-User'"
op|':'
string|"'act:usr'"
op|','
nl|'\n'
string|"'X-Auth-Key'"
op|':'
string|"'key'"
op|'}'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'200'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertNotEquals'
op|'('
name|'resp'
op|'.'
name|'headers'
op|'.'
name|'get'
op|'('
string|"'x-auth-token'"
op|')'
op|','
string|"'AUTH_tktest'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'headers'
op|'.'
name|'get'
op|'('
string|"'x-auth-token'"
op|')'
op|','
nl|'\n'
name|'resp'
op|'.'
name|'headers'
op|'.'
name|'get'
op|'('
string|"'x-storage-token'"
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'headers'
op|'.'
name|'get'
op|'('
string|"'x-storage-url'"
op|')'
op|','
nl|'\n'
string|"'http://127.0.0.1:8080/v1/AUTH_cfa'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'json'
op|'.'
name|'loads'
op|'('
name|'resp'
op|'.'
name|'body'
op|')'
op|','
nl|'\n'
op|'{'
string|'"storage"'
op|':'
op|'{'
string|'"default"'
op|':'
string|'"local"'
op|','
nl|'\n'
string|'"local"'
op|':'
string|'"http://127.0.0.1:8080/v1/AUTH_cfa"'
op|'}'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'7'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_token_success_existing_token_expired_fail_deleting_old
dedent|''
name|'def'
name|'test_get_token_success_existing_token_expired_fail_deleting_old'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of user object'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
string|"'X-Object-Meta-Auth-Token'"
op|':'
string|"'AUTH_tktest'"
op|'}'
op|','
nl|'\n'
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"auth"'
op|':'
string|'"plaintext:key"'
op|','
nl|'\n'
string|'"groups"'
op|':'
op|'['
op|'{'
string|"'name'"
op|':'
string|'"act:usr"'
op|'}'
op|','
op|'{'
string|"'name'"
op|':'
string|'"act"'
op|'}'
op|','
nl|'\n'
op|'{'
string|"'name'"
op|':'
string|'".admin"'
op|'}'
op|']'
op|'}'
op|')'
op|')'
op|','
nl|'\n'
comment|'# GET of token'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"account"'
op|':'
string|'"act"'
op|','
string|'"user"'
op|':'
string|'"usr"'
op|','
nl|'\n'
string|'"account_id"'
op|':'
string|'"AUTH_cfa"'
op|','
string|'"groups"'
op|':'
op|'['
op|'{'
string|"'name'"
op|':'
string|'"act:usr"'
op|'}'
op|','
nl|'\n'
op|'{'
string|"'name'"
op|':'
string|'"key"'
op|'}'
op|','
op|'{'
string|"'name'"
op|':'
string|'".admin"'
op|'}'
op|']'
op|','
nl|'\n'
string|'"expires"'
op|':'
number|'0.0'
op|'}'
op|')'
op|')'
op|','
nl|'\n'
comment|'# DELETE of expired token'
nl|'\n'
op|'('
string|"'503 Service Unavailable'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# GET of account'
nl|'\n'
op|'('
string|"'204 Ok'"
op|','
op|'{'
string|"'X-Container-Meta-Account-Id'"
op|':'
string|"'AUTH_cfa'"
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# PUT of new token'
nl|'\n'
op|'('
string|"'201 Created'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# POST of token to user object'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# GET of services object'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"storage"'
op|':'
op|'{'
string|'"default"'
op|':'
string|'"local"'
op|','
nl|'\n'
string|'"local"'
op|':'
string|'"http://127.0.0.1:8080/v1/AUTH_cfa"'
op|'}'
op|'}'
op|')'
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v1.0'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-User'"
op|':'
string|"'act:usr'"
op|','
nl|'\n'
string|"'X-Auth-Key'"
op|':'
string|"'key'"
op|'}'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'200'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertNotEquals'
op|'('
name|'resp'
op|'.'
name|'headers'
op|'.'
name|'get'
op|'('
string|"'x-auth-token'"
op|')'
op|','
string|"'AUTH_tktest'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'headers'
op|'.'
name|'get'
op|'('
string|"'x-auth-token'"
op|')'
op|','
nl|'\n'
name|'resp'
op|'.'
name|'headers'
op|'.'
name|'get'
op|'('
string|"'x-storage-token'"
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'headers'
op|'.'
name|'get'
op|'('
string|"'x-storage-url'"
op|')'
op|','
nl|'\n'
string|"'http://127.0.0.1:8080/v1/AUTH_cfa'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'json'
op|'.'
name|'loads'
op|'('
name|'resp'
op|'.'
name|'body'
op|')'
op|','
nl|'\n'
op|'{'
string|'"storage"'
op|':'
op|'{'
string|'"default"'
op|':'
string|'"local"'
op|','
nl|'\n'
string|'"local"'
op|':'
string|'"http://127.0.0.1:8080/v1/AUTH_cfa"'
op|'}'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'7'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_prep_success
dedent|''
name|'def'
name|'test_prep_success'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'list_to_iter'
op|'='
op|'['
nl|'\n'
comment|'# PUT of .auth account'
nl|'\n'
op|'('
string|"'201 Created'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# PUT of .account_id container'
nl|'\n'
op|'('
string|"'201 Created'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
newline|'\n'
comment|'# PUT of .token* containers'
nl|'\n'
name|'for'
name|'x'
name|'in'
name|'xrange'
op|'('
number|'16'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'list_to_iter'
op|'.'
name|'append'
op|'('
op|'('
string|"'201 Created'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|')'
newline|'\n'
dedent|''
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
name|'list_to_iter'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/.prep'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'POST'"
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'204'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'18'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_prep_bad_method
dedent|''
name|'def'
name|'test_prep_bad_method'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/.prep'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'400'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/.prep'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'HEAD'"
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'400'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/.prep'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'PUT'"
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'400'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_prep_bad_creds
dedent|''
name|'def'
name|'test_prep_bad_creds'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/.prep'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'POST'"
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'403'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/.prep'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'POST'"
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'upertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'403'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/.prep'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'POST'"
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'403'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/.prep'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'POST'"
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'403'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/.prep'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'POST'"
op|'}'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'403'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_prep_fail_account_create
dedent|''
name|'def'
name|'test_prep_fail_account_create'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# PUT of .auth account'
nl|'\n'
op|'('
string|"'503 Service Unavailable'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/.prep'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'POST'"
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'500'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_prep_fail_token_container_create
dedent|''
name|'def'
name|'test_prep_fail_token_container_create'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# PUT of .auth account'
nl|'\n'
op|'('
string|"'201 Created'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# PUT of .token container'
nl|'\n'
op|'('
string|"'503 Service Unavailable'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/.prep'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'POST'"
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'500'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'2'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_prep_fail_account_id_container_create
dedent|''
name|'def'
name|'test_prep_fail_account_id_container_create'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# PUT of .auth account'
nl|'\n'
op|'('
string|"'201 Created'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# PUT of .token container'
nl|'\n'
op|'('
string|"'201 Created'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# PUT of .account_id container'
nl|'\n'
op|'('
string|"'503 Service Unavailable'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/.prep'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'POST'"
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'500'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'3'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_reseller_success
dedent|''
name|'def'
name|'test_get_reseller_success'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of .auth account (list containers)'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'['
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'".token"'
op|','
string|'"count"'
op|':'
number|'0'
op|','
string|'"bytes"'
op|':'
number|'0'
op|'}'
op|','
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'".account_id"'
op|','
string|'"count"'
op|':'
number|'0'
op|','
string|'"bytes"'
op|':'
number|'0'
op|'}'
op|','
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'"act"'
op|','
string|'"count"'
op|':'
number|'0'
op|','
string|'"bytes"'
op|':'
number|'0'
op|'}'
op|']'
op|')'
op|')'
op|','
nl|'\n'
comment|'# GET of .auth account (list containers continuation)'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
string|"'[]'"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'200'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'json'
op|'.'
name|'loads'
op|'('
name|'resp'
op|'.'
name|'body'
op|')'
op|','
nl|'\n'
op|'{'
string|'"accounts"'
op|':'
op|'['
op|'{'
string|'"name"'
op|':'
string|'"act"'
op|'}'
op|']'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'2'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of user object'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"groups"'
op|':'
op|'['
op|'{'
string|'"name"'
op|':'
string|'"act:adm"'
op|'}'
op|','
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'"test"'
op|'}'
op|','
op|'{'
string|'"name"'
op|':'
string|'".admin"'
op|'}'
op|','
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'".reseller_admin"'
op|'}'
op|']'
op|','
string|'"auth"'
op|':'
string|'"plaintext:key"'
op|'}'
op|')'
op|')'
op|','
nl|'\n'
comment|'# GET of .auth account (list containers)'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'['
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'".token"'
op|','
string|'"count"'
op|':'
number|'0'
op|','
string|'"bytes"'
op|':'
number|'0'
op|'}'
op|','
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'".account_id"'
op|','
string|'"count"'
op|':'
number|'0'
op|','
string|'"bytes"'
op|':'
number|'0'
op|'}'
op|','
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'"act"'
op|','
string|'"count"'
op|':'
number|'0'
op|','
string|'"bytes"'
op|':'
number|'0'
op|'}'
op|']'
op|')'
op|')'
op|','
nl|'\n'
comment|'# GET of .auth account (list containers continuation)'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
string|"'[]'"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'act:adm'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'key'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'200'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'json'
op|'.'
name|'loads'
op|'('
name|'resp'
op|'.'
name|'body'
op|')'
op|','
nl|'\n'
op|'{'
string|'"accounts"'
op|':'
op|'['
op|'{'
string|'"name"'
op|':'
string|'"act"'
op|'}'
op|']'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'3'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_reseller_fail_bad_creds
dedent|''
name|'def'
name|'test_get_reseller_fail_bad_creds'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of user object'
nl|'\n'
op|'('
string|"'404 Not Found'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'super:admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'403'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of user object (account admin, but not reseller admin)'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"groups"'
op|':'
op|'['
op|'{'
string|'"name"'
op|':'
string|'"act:adm"'
op|'}'
op|','
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'"test"'
op|'}'
op|','
op|'{'
string|'"name"'
op|':'
string|'".admin"'
op|'}'
op|']'
op|','
nl|'\n'
string|'"auth"'
op|':'
string|'"plaintext:key"'
op|'}'
op|')'
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'act:adm'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'key'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'403'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of user object (regular user)'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"groups"'
op|':'
op|'['
op|'{'
string|'"name"'
op|':'
string|'"act:usr"'
op|'}'
op|','
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'"test"'
op|'}'
op|']'
op|','
string|'"auth"'
op|':'
string|'"plaintext:key"'
op|'}'
op|')'
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'act:usr'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'key'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'403'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_reseller_fail_listing
dedent|''
name|'def'
name|'test_get_reseller_fail_listing'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of .auth account (list containers)'
nl|'\n'
op|'('
string|"'503 Service Unavailable'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'500'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of .auth account (list containers)'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'['
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'".token"'
op|','
string|'"count"'
op|':'
number|'0'
op|','
string|'"bytes"'
op|':'
number|'0'
op|'}'
op|','
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'".account_id"'
op|','
string|'"count"'
op|':'
number|'0'
op|','
string|'"bytes"'
op|':'
number|'0'
op|'}'
op|','
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'"act"'
op|','
string|'"count"'
op|':'
number|'0'
op|','
string|'"bytes"'
op|':'
number|'0'
op|'}'
op|']'
op|')'
op|')'
op|','
nl|'\n'
comment|'# GET of .auth account (list containers continuation)'
nl|'\n'
op|'('
string|"'503 Service Unavailable'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'500'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'2'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_account_success
dedent|''
name|'def'
name|'test_get_account_success'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of .services object'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"storage"'
op|':'
op|'{'
string|'"default"'
op|':'
string|'"local"'
op|','
nl|'\n'
string|'"local"'
op|':'
string|'"http://127.0.0.1:8080/v1/AUTH_cfa"'
op|'}'
op|'}'
op|')'
op|')'
op|','
nl|'\n'
comment|'# GET of account container (list objects)'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
string|"'X-Container-Meta-Account-Id'"
op|':'
string|"'AUTH_cfa'"
op|'}'
op|','
nl|'\n'
name|'json'
op|'.'
name|'dumps'
op|'('
op|'['
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'".services"'
op|','
string|'"hash"'
op|':'
string|'"etag"'
op|','
string|'"bytes"'
op|':'
number|'112'
op|','
nl|'\n'
string|'"content_type"'
op|':'
string|'"application/octet-stream"'
op|','
nl|'\n'
string|'"last_modified"'
op|':'
string|'"2010-12-03T17:16:27.618110"'
op|'}'
op|','
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'"tester"'
op|','
string|'"hash"'
op|':'
string|'"etag"'
op|','
string|'"bytes"'
op|':'
number|'104'
op|','
nl|'\n'
string|'"content_type"'
op|':'
string|'"application/octet-stream"'
op|','
nl|'\n'
string|'"last_modified"'
op|':'
string|'"2010-12-03T17:16:27.736680"'
op|'}'
op|','
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'"tester3"'
op|','
string|'"hash"'
op|':'
string|'"etag"'
op|','
string|'"bytes"'
op|':'
number|'86'
op|','
nl|'\n'
string|'"content_type"'
op|':'
string|'"application/octet-stream"'
op|','
nl|'\n'
string|'"last_modified"'
op|':'
string|'"2010-12-03T17:16:28.135530"'
op|'}'
op|']'
op|')'
op|')'
op|','
nl|'\n'
comment|'# GET of account container (list objects continuation)'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
string|"'X-Container-Meta-Account-Id'"
op|':'
string|"'AUTH_cfa'"
op|'}'
op|','
string|"'[]'"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'200'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'json'
op|'.'
name|'loads'
op|'('
name|'resp'
op|'.'
name|'body'
op|')'
op|','
nl|'\n'
op|'{'
string|"'account_id'"
op|':'
string|"'AUTH_cfa'"
op|','
nl|'\n'
string|"'services'"
op|':'
op|'{'
string|"'storage'"
op|':'
nl|'\n'
op|'{'
string|"'default'"
op|':'
string|"'local'"
op|','
nl|'\n'
string|"'local'"
op|':'
string|"'http://127.0.0.1:8080/v1/AUTH_cfa'"
op|'}'
op|'}'
op|','
nl|'\n'
string|"'users'"
op|':'
op|'['
op|'{'
string|"'name'"
op|':'
string|"'tester'"
op|'}'
op|','
op|'{'
string|"'name'"
op|':'
string|"'tester3'"
op|'}'
op|']'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'3'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of user object'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"groups"'
op|':'
op|'['
op|'{'
string|'"name"'
op|':'
string|'"act:adm"'
op|'}'
op|','
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'"test"'
op|'}'
op|','
op|'{'
string|'"name"'
op|':'
string|'".admin"'
op|'}'
op|']'
op|','
nl|'\n'
string|'"auth"'
op|':'
string|'"plaintext:key"'
op|'}'
op|')'
op|')'
op|','
nl|'\n'
comment|'# GET of .services object'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"storage"'
op|':'
op|'{'
string|'"default"'
op|':'
string|'"local"'
op|','
nl|'\n'
string|'"local"'
op|':'
string|'"http://127.0.0.1:8080/v1/AUTH_cfa"'
op|'}'
op|'}'
op|')'
op|')'
op|','
nl|'\n'
comment|'# GET of account container (list objects)'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
string|"'X-Container-Meta-Account-Id'"
op|':'
string|"'AUTH_cfa'"
op|'}'
op|','
nl|'\n'
name|'json'
op|'.'
name|'dumps'
op|'('
op|'['
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'".services"'
op|','
string|'"hash"'
op|':'
string|'"etag"'
op|','
string|'"bytes"'
op|':'
number|'112'
op|','
nl|'\n'
string|'"content_type"'
op|':'
string|'"application/octet-stream"'
op|','
nl|'\n'
string|'"last_modified"'
op|':'
string|'"2010-12-03T17:16:27.618110"'
op|'}'
op|','
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'"tester"'
op|','
string|'"hash"'
op|':'
string|'"etag"'
op|','
string|'"bytes"'
op|':'
number|'104'
op|','
nl|'\n'
string|'"content_type"'
op|':'
string|'"application/octet-stream"'
op|','
nl|'\n'
string|'"last_modified"'
op|':'
string|'"2010-12-03T17:16:27.736680"'
op|'}'
op|','
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'"tester3"'
op|','
string|'"hash"'
op|':'
string|'"etag"'
op|','
string|'"bytes"'
op|':'
number|'86'
op|','
nl|'\n'
string|'"content_type"'
op|':'
string|'"application/octet-stream"'
op|','
nl|'\n'
string|'"last_modified"'
op|':'
string|'"2010-12-03T17:16:28.135530"'
op|'}'
op|']'
op|')'
op|')'
op|','
nl|'\n'
comment|'# GET of account container (list objects continuation)'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
string|"'X-Container-Meta-Account-Id'"
op|':'
string|"'AUTH_cfa'"
op|'}'
op|','
string|"'[]'"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'act:adm'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'key'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'200'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'json'
op|'.'
name|'loads'
op|'('
name|'resp'
op|'.'
name|'body'
op|')'
op|','
nl|'\n'
op|'{'
string|"'account_id'"
op|':'
string|"'AUTH_cfa'"
op|','
nl|'\n'
string|"'services'"
op|':'
op|'{'
string|"'storage'"
op|':'
nl|'\n'
op|'{'
string|"'default'"
op|':'
string|"'local'"
op|','
nl|'\n'
string|"'local'"
op|':'
string|"'http://127.0.0.1:8080/v1/AUTH_cfa'"
op|'}'
op|'}'
op|','
nl|'\n'
string|"'users'"
op|':'
op|'['
op|'{'
string|"'name'"
op|':'
string|"'tester'"
op|'}'
op|','
op|'{'
string|"'name'"
op|':'
string|"'tester3'"
op|'}'
op|']'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'4'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_account_fail_bad_account_name
dedent|''
name|'def'
name|'test_get_account_fail_bad_account_name'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/.token'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'400'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/.anything'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'400'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_account_fail_creds
dedent|''
name|'def'
name|'test_get_account_fail_creds'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of user object'
nl|'\n'
op|'('
string|"'404 Not Found'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'super:admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'403'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of user object (account admin, but wrong account)'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"groups"'
op|':'
op|'['
op|'{'
string|'"name"'
op|':'
string|'"act2:adm"'
op|'}'
op|','
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'"test"'
op|'}'
op|','
op|'{'
string|'"name"'
op|':'
string|'".admin"'
op|'}'
op|']'
op|','
nl|'\n'
string|'"auth"'
op|':'
string|'"plaintext:key"'
op|'}'
op|')'
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'act2:adm'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'key'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'403'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of user object (regular user)'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"groups"'
op|':'
op|'['
op|'{'
string|'"name"'
op|':'
string|'"act:usr"'
op|'}'
op|','
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'"test"'
op|'}'
op|']'
op|','
string|'"auth"'
op|':'
string|'"plaintext:key"'
op|'}'
op|')'
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'act:usr'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'key'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'403'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_account_fail_get_services
dedent|''
name|'def'
name|'test_get_account_fail_get_services'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of .services object'
nl|'\n'
op|'('
string|"'503 Service Unavailable'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'500'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of .services object'
nl|'\n'
op|'('
string|"'404 Not Found'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'404'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_account_fail_listing
dedent|''
name|'def'
name|'test_get_account_fail_listing'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of .services object'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"storage"'
op|':'
op|'{'
string|'"default"'
op|':'
string|'"local"'
op|','
nl|'\n'
string|'"local"'
op|':'
string|'"http://127.0.0.1:8080/v1/AUTH_cfa"'
op|'}'
op|'}'
op|')'
op|')'
op|','
nl|'\n'
comment|'# GET of account container (list objects)'
nl|'\n'
op|'('
string|"'503 Service Unavailable'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'500'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'2'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of .services object'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"storage"'
op|':'
op|'{'
string|'"default"'
op|':'
string|'"local"'
op|','
nl|'\n'
string|'"local"'
op|':'
string|'"http://127.0.0.1:8080/v1/AUTH_cfa"'
op|'}'
op|'}'
op|')'
op|')'
op|','
nl|'\n'
comment|'# GET of account container (list objects)'
nl|'\n'
op|'('
string|"'404 Not Found'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'404'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'2'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of .services object'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"storage"'
op|':'
op|'{'
string|'"default"'
op|':'
string|'"local"'
op|','
nl|'\n'
string|'"local"'
op|':'
string|'"http://127.0.0.1:8080/v1/AUTH_cfa"'
op|'}'
op|'}'
op|')'
op|')'
op|','
nl|'\n'
comment|'# GET of account container (list objects)'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
string|"'X-Container-Meta-Account-Id'"
op|':'
string|"'AUTH_cfa'"
op|'}'
op|','
nl|'\n'
name|'json'
op|'.'
name|'dumps'
op|'('
op|'['
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'".services"'
op|','
string|'"hash"'
op|':'
string|'"etag"'
op|','
string|'"bytes"'
op|':'
number|'112'
op|','
nl|'\n'
string|'"content_type"'
op|':'
string|'"application/octet-stream"'
op|','
nl|'\n'
string|'"last_modified"'
op|':'
string|'"2010-12-03T17:16:27.618110"'
op|'}'
op|','
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'"tester"'
op|','
string|'"hash"'
op|':'
string|'"etag"'
op|','
string|'"bytes"'
op|':'
number|'104'
op|','
nl|'\n'
string|'"content_type"'
op|':'
string|'"application/octet-stream"'
op|','
nl|'\n'
string|'"last_modified"'
op|':'
string|'"2010-12-03T17:16:27.736680"'
op|'}'
op|','
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'"tester3"'
op|','
string|'"hash"'
op|':'
string|'"etag"'
op|','
string|'"bytes"'
op|':'
number|'86'
op|','
nl|'\n'
string|'"content_type"'
op|':'
string|'"application/octet-stream"'
op|','
nl|'\n'
string|'"last_modified"'
op|':'
string|'"2010-12-03T17:16:28.135530"'
op|'}'
op|']'
op|')'
op|')'
op|','
nl|'\n'
comment|'# GET of account container (list objects continuation)'
nl|'\n'
op|'('
string|"'503 Service Unavailable'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'500'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'3'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_set_services_new_service
dedent|''
name|'def'
name|'test_set_services_new_service'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of .services object'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"storage"'
op|':'
op|'{'
string|'"default"'
op|':'
string|'"local"'
op|','
nl|'\n'
string|'"local"'
op|':'
string|'"http://127.0.0.1:8080/v1/AUTH_cfa"'
op|'}'
op|'}'
op|')'
op|')'
op|','
nl|'\n'
comment|'# PUT of new .services object'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act/.services'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'POST'"
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
op|','
nl|'\n'
name|'body'
op|'='
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|"'new_service'"
op|':'
op|'{'
string|"'new_endpoint'"
op|':'
string|"'new_value'"
op|'}'
op|'}'
op|')'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'200'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'json'
op|'.'
name|'loads'
op|'('
name|'resp'
op|'.'
name|'body'
op|')'
op|','
nl|'\n'
op|'{'
string|"'storage'"
op|':'
op|'{'
string|"'default'"
op|':'
string|"'local'"
op|','
nl|'\n'
string|"'local'"
op|':'
string|"'http://127.0.0.1:8080/v1/AUTH_cfa'"
op|'}'
op|','
nl|'\n'
string|"'new_service'"
op|':'
op|'{'
string|"'new_endpoint'"
op|':'
string|"'new_value'"
op|'}'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'2'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_set_services_new_endpoint
dedent|''
name|'def'
name|'test_set_services_new_endpoint'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of .services object'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"storage"'
op|':'
op|'{'
string|'"default"'
op|':'
string|'"local"'
op|','
nl|'\n'
string|'"local"'
op|':'
string|'"http://127.0.0.1:8080/v1/AUTH_cfa"'
op|'}'
op|'}'
op|')'
op|')'
op|','
nl|'\n'
comment|'# PUT of new .services object'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act/.services'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'POST'"
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
op|','
nl|'\n'
name|'body'
op|'='
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|"'storage'"
op|':'
op|'{'
string|"'new_endpoint'"
op|':'
string|"'new_value'"
op|'}'
op|'}'
op|')'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'200'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'json'
op|'.'
name|'loads'
op|'('
name|'resp'
op|'.'
name|'body'
op|')'
op|','
nl|'\n'
op|'{'
string|"'storage'"
op|':'
op|'{'
string|"'default'"
op|':'
string|"'local'"
op|','
nl|'\n'
string|"'local'"
op|':'
string|"'http://127.0.0.1:8080/v1/AUTH_cfa'"
op|','
nl|'\n'
string|"'new_endpoint'"
op|':'
string|"'new_value'"
op|'}'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'2'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_set_services_update_endpoint
dedent|''
name|'def'
name|'test_set_services_update_endpoint'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of .services object'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"storage"'
op|':'
op|'{'
string|'"default"'
op|':'
string|'"local"'
op|','
nl|'\n'
string|'"local"'
op|':'
string|'"http://127.0.0.1:8080/v1/AUTH_cfa"'
op|'}'
op|'}'
op|')'
op|')'
op|','
nl|'\n'
comment|'# PUT of new .services object'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act/.services'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'POST'"
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
op|','
nl|'\n'
name|'body'
op|'='
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|"'storage'"
op|':'
op|'{'
string|"'local'"
op|':'
string|"'new_value'"
op|'}'
op|'}'
op|')'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'200'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'json'
op|'.'
name|'loads'
op|'('
name|'resp'
op|'.'
name|'body'
op|')'
op|','
nl|'\n'
op|'{'
string|"'storage'"
op|':'
op|'{'
string|"'default'"
op|':'
string|"'local'"
op|','
nl|'\n'
string|"'local'"
op|':'
string|"'new_value'"
op|'}'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'2'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_set_services_fail_bad_creds
dedent|''
name|'def'
name|'test_set_services_fail_bad_creds'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of user object'
nl|'\n'
op|'('
string|"'404 Not Found'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act/.services'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'POST'"
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'super:admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
op|','
nl|'\n'
name|'body'
op|'='
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|"'storage'"
op|':'
op|'{'
string|"'local'"
op|':'
string|"'new_value'"
op|'}'
op|'}'
op|')'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'403'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of user object (account admin, but not reseller admin)'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"groups"'
op|':'
op|'['
op|'{'
string|'"name"'
op|':'
string|'"act:adm"'
op|'}'
op|','
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'"test"'
op|'}'
op|','
op|'{'
string|'"name"'
op|':'
string|'".admin"'
op|'}'
op|']'
op|','
nl|'\n'
string|'"auth"'
op|':'
string|'"plaintext:key"'
op|'}'
op|')'
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act/.services'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'POST'"
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'act:adm'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'key'"
op|'}'
op|','
nl|'\n'
name|'body'
op|'='
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|"'storage'"
op|':'
op|'{'
string|"'local'"
op|':'
string|"'new_value'"
op|'}'
op|'}'
op|')'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'403'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of user object (regular user)'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"groups"'
op|':'
op|'['
op|'{'
string|'"name"'
op|':'
string|'"act:usr"'
op|'}'
op|','
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'"test"'
op|'}'
op|']'
op|','
string|'"auth"'
op|':'
string|'"plaintext:key"'
op|'}'
op|')'
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act/.services'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'POST'"
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'act:usr'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'key'"
op|'}'
op|','
nl|'\n'
name|'body'
op|'='
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|"'storage'"
op|':'
op|'{'
string|"'local'"
op|':'
string|"'new_value'"
op|'}'
op|'}'
op|')'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'403'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_set_services_fail_bad_account_name
dedent|''
name|'def'
name|'test_set_services_fail_bad_account_name'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/.act/.services'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'POST'"
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
op|','
nl|'\n'
name|'body'
op|'='
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|"'storage'"
op|':'
op|'{'
string|"'local'"
op|':'
string|"'new_value'"
op|'}'
op|'}'
op|')'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'400'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_set_services_fail_bad_json
dedent|''
name|'def'
name|'test_set_services_fail_bad_json'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act/.services'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'POST'"
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
op|','
nl|'\n'
name|'body'
op|'='
string|"'garbage'"
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'400'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act/.services'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'POST'"
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
op|','
nl|'\n'
name|'body'
op|'='
string|"''"
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'400'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_set_services_fail_get_services
dedent|''
name|'def'
name|'test_set_services_fail_get_services'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of .services object'
nl|'\n'
op|'('
string|"'503 Unavailable'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act/.services'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'POST'"
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
op|','
nl|'\n'
name|'body'
op|'='
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|"'new_service'"
op|':'
op|'{'
string|"'new_endpoint'"
op|':'
string|"'new_value'"
op|'}'
op|'}'
op|')'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'500'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of .services object'
nl|'\n'
op|'('
string|"'404 Not Found'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act/.services'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'POST'"
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
op|','
nl|'\n'
name|'body'
op|'='
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|"'new_service'"
op|':'
op|'{'
string|"'new_endpoint'"
op|':'
string|"'new_value'"
op|'}'
op|'}'
op|')'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'404'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_set_services_fail_put_services
dedent|''
name|'def'
name|'test_set_services_fail_put_services'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of .services object'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"storage"'
op|':'
op|'{'
string|'"default"'
op|':'
string|'"local"'
op|','
nl|'\n'
string|'"local"'
op|':'
string|'"http://127.0.0.1:8080/v1/AUTH_cfa"'
op|'}'
op|'}'
op|')'
op|')'
op|','
nl|'\n'
comment|'# PUT of new .services object'
nl|'\n'
op|'('
string|"'503 Unavailable'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act/.services'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'POST'"
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
op|','
nl|'\n'
name|'body'
op|'='
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|"'new_service'"
op|':'
op|'{'
string|"'new_endpoint'"
op|':'
string|"'new_value'"
op|'}'
op|'}'
op|')'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'500'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'2'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_put_account_success
dedent|''
name|'def'
name|'test_put_account_success'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'conn'
op|'='
name|'FakeConn'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# PUT of storage account itself'
nl|'\n'
op|'('
string|"'201 Created'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'get_conn'
op|'='
name|'lambda'
op|':'
name|'conn'
newline|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# Initial HEAD of account container to check for pre-existence'
nl|'\n'
op|'('
string|"'404 Not Found'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# PUT of account container'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# PUT of .account_id mapping object'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# PUT of .services object'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# POST to account container updating X-Container-Meta-Account-Id'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'PUT'"
op|','
string|"'swift.cache'"
op|':'
name|'FakeMemcache'
op|'('
op|')'
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'201'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'5'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'conn'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_put_account_success_preexist_but_not_completed
dedent|''
name|'def'
name|'test_put_account_success_preexist_but_not_completed'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'conn'
op|'='
name|'FakeConn'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# PUT of storage account itself'
nl|'\n'
op|'('
string|"'201 Created'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'get_conn'
op|'='
name|'lambda'
op|':'
name|'conn'
newline|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# Initial HEAD of account container to check for pre-existence'
nl|'\n'
comment|"# We're going to show it as existing this time, but with no"
nl|'\n'
comment|'# X-Container-Meta-Account-Id, indicating a failed previous attempt'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# PUT of .account_id mapping object'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# PUT of .services object'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# POST to account container updating X-Container-Meta-Account-Id'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'PUT'"
op|','
string|"'swift.cache'"
op|':'
name|'FakeMemcache'
op|'('
op|')'
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'201'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'4'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'conn'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_put_account_success_preexist_and_completed
dedent|''
name|'def'
name|'test_put_account_success_preexist_and_completed'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# Initial HEAD of account container to check for pre-existence'
nl|'\n'
comment|"# We're going to show it as existing this time, and with an"
nl|'\n'
comment|'# X-Container-Meta-Account-Id, indicating it already exists'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
string|"'X-Container-Meta-Account-Id'"
op|':'
string|"'AUTH_cfa'"
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'PUT'"
op|','
string|"'swift.cache'"
op|':'
name|'FakeMemcache'
op|'('
op|')'
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'202'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_put_account_success_with_given_suffix
dedent|''
name|'def'
name|'test_put_account_success_with_given_suffix'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'conn'
op|'='
name|'FakeConn'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# PUT of storage account itself'
nl|'\n'
op|'('
string|"'201 Created'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'get_conn'
op|'='
name|'lambda'
op|':'
name|'conn'
newline|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# Initial HEAD of account container to check for pre-existence'
nl|'\n'
op|'('
string|"'404 Not Found'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# PUT of account container'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# PUT of .account_id mapping object'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# PUT of .services object'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# POST to account container updating X-Container-Meta-Account-Id'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'PUT'"
op|','
string|"'swift.cache'"
op|':'
name|'FakeMemcache'
op|'('
op|')'
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|','
nl|'\n'
string|"'X-Account-Suffix'"
op|':'
string|"'test-suffix'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'201'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'conn'
op|'.'
name|'request_path'
op|','
string|"'/v1/AUTH_test-suffix'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'5'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'conn'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_put_account_fail_bad_creds
dedent|''
name|'def'
name|'test_put_account_fail_bad_creds'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of user object'
nl|'\n'
op|'('
string|"'404 Not Found'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'PUT'"
op|','
string|"'swift.cache'"
op|':'
name|'FakeMemcache'
op|'('
op|')'
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'super:admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
op|','
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'403'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of user object (account admin, but not reseller admin)'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"groups"'
op|':'
op|'['
op|'{'
string|'"name"'
op|':'
string|'"act:adm"'
op|'}'
op|','
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'"test"'
op|'}'
op|','
op|'{'
string|'"name"'
op|':'
string|'".admin"'
op|'}'
op|']'
op|','
nl|'\n'
string|'"auth"'
op|':'
string|'"plaintext:key"'
op|'}'
op|')'
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'PUT'"
op|','
string|"'swift.cache'"
op|':'
name|'FakeMemcache'
op|'('
op|')'
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'act:adm'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'key'"
op|'}'
op|','
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'403'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of user object (regular user)'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"groups"'
op|':'
op|'['
op|'{'
string|'"name"'
op|':'
string|'"act:usr"'
op|'}'
op|','
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'"test"'
op|'}'
op|']'
op|','
string|'"auth"'
op|':'
string|'"plaintext:key"'
op|'}'
op|')'
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'PUT'"
op|','
string|"'swift.cache'"
op|':'
name|'FakeMemcache'
op|'('
op|')'
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'act:usr'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'key'"
op|'}'
op|','
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'403'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_put_account_fail_invalid_account_name
dedent|''
name|'def'
name|'test_put_account_fail_invalid_account_name'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/.act'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'PUT'"
op|','
string|"'swift.cache'"
op|':'
name|'FakeMemcache'
op|'('
op|')'
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
op|','
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'400'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_put_account_fail_on_initial_account_head
dedent|''
name|'def'
name|'test_put_account_fail_on_initial_account_head'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# Initial HEAD of account container to check for pre-existence'
nl|'\n'
op|'('
string|"'503 Service Unavailable'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'PUT'"
op|','
string|"'swift.cache'"
op|':'
name|'FakeMemcache'
op|'('
op|')'
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'500'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_put_account_fail_on_account_marker_put
dedent|''
name|'def'
name|'test_put_account_fail_on_account_marker_put'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# Initial HEAD of account container to check for pre-existence'
nl|'\n'
op|'('
string|"'404 Not Found'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# PUT of account container'
nl|'\n'
op|'('
string|"'503 Service Unavailable'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'PUT'"
op|','
string|"'swift.cache'"
op|':'
name|'FakeMemcache'
op|'('
op|')'
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'500'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'2'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_put_account_fail_on_storage_account_put
dedent|''
name|'def'
name|'test_put_account_fail_on_storage_account_put'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'conn'
op|'='
name|'FakeConn'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# PUT of storage account itself'
nl|'\n'
op|'('
string|"'503 Service Unavailable'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'get_conn'
op|'='
name|'lambda'
op|':'
name|'conn'
newline|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# Initial HEAD of account container to check for pre-existence'
nl|'\n'
op|'('
string|"'404 Not Found'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# PUT of account container'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'PUT'"
op|','
string|"'swift.cache'"
op|':'
name|'FakeMemcache'
op|'('
op|')'
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'500'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'conn'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'2'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_put_account_fail_on_account_id_mapping
dedent|''
name|'def'
name|'test_put_account_fail_on_account_id_mapping'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'conn'
op|'='
name|'FakeConn'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# PUT of storage account itself'
nl|'\n'
op|'('
string|"'201 Created'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'get_conn'
op|'='
name|'lambda'
op|':'
name|'conn'
newline|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# Initial HEAD of account container to check for pre-existence'
nl|'\n'
op|'('
string|"'404 Not Found'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# PUT of account container'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# PUT of .account_id mapping object'
nl|'\n'
op|'('
string|"'503 Service Unavailable'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'PUT'"
op|','
string|"'swift.cache'"
op|':'
name|'FakeMemcache'
op|'('
op|')'
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'500'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'conn'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'3'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_put_account_fail_on_services_object
dedent|''
name|'def'
name|'test_put_account_fail_on_services_object'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'conn'
op|'='
name|'FakeConn'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# PUT of storage account itself'
nl|'\n'
op|'('
string|"'201 Created'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'get_conn'
op|'='
name|'lambda'
op|':'
name|'conn'
newline|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# Initial HEAD of account container to check for pre-existence'
nl|'\n'
op|'('
string|"'404 Not Found'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# PUT of account container'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# PUT of .account_id mapping object'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# PUT of .services object'
nl|'\n'
op|'('
string|"'503 Service Unavailable'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'PUT'"
op|','
string|"'swift.cache'"
op|':'
name|'FakeMemcache'
op|'('
op|')'
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'500'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'conn'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'4'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_put_account_fail_on_post_mapping
dedent|''
name|'def'
name|'test_put_account_fail_on_post_mapping'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'conn'
op|'='
name|'FakeConn'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# PUT of storage account itself'
nl|'\n'
op|'('
string|"'201 Created'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'get_conn'
op|'='
name|'lambda'
op|':'
name|'conn'
newline|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# Initial HEAD of account container to check for pre-existence'
nl|'\n'
op|'('
string|"'404 Not Found'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# PUT of account container'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# PUT of .account_id mapping object'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# PUT of .services object'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# POST to account container updating X-Container-Meta-Account-Id'
nl|'\n'
op|'('
string|"'503 Service Unavailable'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'PUT'"
op|','
string|"'swift.cache'"
op|':'
name|'FakeMemcache'
op|'('
op|')'
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'500'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'conn'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'5'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_delete_account_success
dedent|''
name|'def'
name|'test_delete_account_success'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'conn'
op|'='
name|'FakeConn'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# DELETE of storage account itself'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'get_conn'
op|'='
name|'lambda'
name|'x'
op|':'
name|'conn'
newline|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|"# Account's container listing, checking for users"
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
string|"'X-Container-Meta-Account-Id'"
op|':'
string|"'AUTH_cfa'"
op|'}'
op|','
nl|'\n'
name|'json'
op|'.'
name|'dumps'
op|'('
op|'['
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'".services"'
op|','
string|'"hash"'
op|':'
string|'"etag"'
op|','
string|'"bytes"'
op|':'
number|'112'
op|','
nl|'\n'
string|'"content_type"'
op|':'
string|'"application/octet-stream"'
op|','
nl|'\n'
string|'"last_modified"'
op|':'
string|'"2010-12-03T17:16:27.618110"'
op|'}'
op|']'
op|')'
op|')'
op|','
nl|'\n'
comment|"# Account's container listing, checking for users (continuation)"
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
string|"'X-Container-Meta-Account-Id'"
op|':'
string|"'AUTH_cfa'"
op|'}'
op|','
string|"'[]'"
op|')'
op|','
nl|'\n'
comment|'# GET the .services object'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"storage"'
op|':'
op|'{'
string|'"default"'
op|':'
string|'"local"'
op|','
nl|'\n'
string|'"local"'
op|':'
string|'"http://127.0.0.1:8080/v1/AUTH_cfa"'
op|'}'
op|'}'
op|')'
op|')'
op|','
nl|'\n'
comment|'# DELETE the .services object'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# DELETE the .account_id mapping object'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# DELETE the account container'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'DELETE'"
op|','
nl|'\n'
string|"'swift.cache'"
op|':'
name|'FakeMemcache'
op|'('
op|')'
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'204'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'6'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'conn'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_delete_account_success_missing_services
dedent|''
name|'def'
name|'test_delete_account_success_missing_services'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|"# Account's container listing, checking for users"
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
string|"'X-Container-Meta-Account-Id'"
op|':'
string|"'AUTH_cfa'"
op|'}'
op|','
nl|'\n'
name|'json'
op|'.'
name|'dumps'
op|'('
op|'['
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'".services"'
op|','
string|'"hash"'
op|':'
string|'"etag"'
op|','
string|'"bytes"'
op|':'
number|'112'
op|','
nl|'\n'
string|'"content_type"'
op|':'
string|'"application/octet-stream"'
op|','
nl|'\n'
string|'"last_modified"'
op|':'
string|'"2010-12-03T17:16:27.618110"'
op|'}'
op|']'
op|')'
op|')'
op|','
nl|'\n'
comment|"# Account's container listing, checking for users (continuation)"
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
string|"'X-Container-Meta-Account-Id'"
op|':'
string|"'AUTH_cfa'"
op|'}'
op|','
string|"'[]'"
op|')'
op|','
nl|'\n'
comment|'# GET the .services object'
nl|'\n'
op|'('
string|"'404 Not Found'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# DELETE the .account_id mapping object'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# DELETE the account container'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'DELETE'"
op|','
nl|'\n'
string|"'swift.cache'"
op|':'
name|'FakeMemcache'
op|'('
op|')'
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'204'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'5'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_delete_account_success_missing_storage_account
dedent|''
name|'def'
name|'test_delete_account_success_missing_storage_account'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'conn'
op|'='
name|'FakeConn'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# DELETE of storage account itself'
nl|'\n'
op|'('
string|"'404 Not Found'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'get_conn'
op|'='
name|'lambda'
name|'x'
op|':'
name|'conn'
newline|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|"# Account's container listing, checking for users"
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
string|"'X-Container-Meta-Account-Id'"
op|':'
string|"'AUTH_cfa'"
op|'}'
op|','
nl|'\n'
name|'json'
op|'.'
name|'dumps'
op|'('
op|'['
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'".services"'
op|','
string|'"hash"'
op|':'
string|'"etag"'
op|','
string|'"bytes"'
op|':'
number|'112'
op|','
nl|'\n'
string|'"content_type"'
op|':'
string|'"application/octet-stream"'
op|','
nl|'\n'
string|'"last_modified"'
op|':'
string|'"2010-12-03T17:16:27.618110"'
op|'}'
op|']'
op|')'
op|')'
op|','
nl|'\n'
comment|"# Account's container listing, checking for users (continuation)"
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
string|"'X-Container-Meta-Account-Id'"
op|':'
string|"'AUTH_cfa'"
op|'}'
op|','
string|"'[]'"
op|')'
op|','
nl|'\n'
comment|'# GET the .services object'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"storage"'
op|':'
op|'{'
string|'"default"'
op|':'
string|'"local"'
op|','
nl|'\n'
string|'"local"'
op|':'
string|'"http://127.0.0.1:8080/v1/AUTH_cfa"'
op|'}'
op|'}'
op|')'
op|')'
op|','
nl|'\n'
comment|'# DELETE the .services object'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# DELETE the .account_id mapping object'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# DELETE the account container'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'DELETE'"
op|','
nl|'\n'
string|"'swift.cache'"
op|':'
name|'FakeMemcache'
op|'('
op|')'
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'204'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'6'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'conn'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_delete_account_success_missing_account_id_mapping
dedent|''
name|'def'
name|'test_delete_account_success_missing_account_id_mapping'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'conn'
op|'='
name|'FakeConn'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# DELETE of storage account itself'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'get_conn'
op|'='
name|'lambda'
name|'x'
op|':'
name|'conn'
newline|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|"# Account's container listing, checking for users"
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
string|"'X-Container-Meta-Account-Id'"
op|':'
string|"'AUTH_cfa'"
op|'}'
op|','
nl|'\n'
name|'json'
op|'.'
name|'dumps'
op|'('
op|'['
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'".services"'
op|','
string|'"hash"'
op|':'
string|'"etag"'
op|','
string|'"bytes"'
op|':'
number|'112'
op|','
nl|'\n'
string|'"content_type"'
op|':'
string|'"application/octet-stream"'
op|','
nl|'\n'
string|'"last_modified"'
op|':'
string|'"2010-12-03T17:16:27.618110"'
op|'}'
op|']'
op|')'
op|')'
op|','
nl|'\n'
comment|"# Account's container listing, checking for users (continuation)"
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
string|"'X-Container-Meta-Account-Id'"
op|':'
string|"'AUTH_cfa'"
op|'}'
op|','
string|"'[]'"
op|')'
op|','
nl|'\n'
comment|'# GET the .services object'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"storage"'
op|':'
op|'{'
string|'"default"'
op|':'
string|'"local"'
op|','
nl|'\n'
string|'"local"'
op|':'
string|'"http://127.0.0.1:8080/v1/AUTH_cfa"'
op|'}'
op|'}'
op|')'
op|')'
op|','
nl|'\n'
comment|'# DELETE the .services object'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# DELETE the .account_id mapping object'
nl|'\n'
op|'('
string|"'404 Not Found'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# DELETE the account container'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'DELETE'"
op|','
nl|'\n'
string|"'swift.cache'"
op|':'
name|'FakeMemcache'
op|'('
op|')'
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'204'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'6'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'conn'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_delete_account_success_missing_account_container_at_end
dedent|''
name|'def'
name|'test_delete_account_success_missing_account_container_at_end'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'conn'
op|'='
name|'FakeConn'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# DELETE of storage account itself'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'get_conn'
op|'='
name|'lambda'
name|'x'
op|':'
name|'conn'
newline|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|"# Account's container listing, checking for users"
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
string|"'X-Container-Meta-Account-Id'"
op|':'
string|"'AUTH_cfa'"
op|'}'
op|','
nl|'\n'
name|'json'
op|'.'
name|'dumps'
op|'('
op|'['
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'".services"'
op|','
string|'"hash"'
op|':'
string|'"etag"'
op|','
string|'"bytes"'
op|':'
number|'112'
op|','
nl|'\n'
string|'"content_type"'
op|':'
string|'"application/octet-stream"'
op|','
nl|'\n'
string|'"last_modified"'
op|':'
string|'"2010-12-03T17:16:27.618110"'
op|'}'
op|']'
op|')'
op|')'
op|','
nl|'\n'
comment|"# Account's container listing, checking for users (continuation)"
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
string|"'X-Container-Meta-Account-Id'"
op|':'
string|"'AUTH_cfa'"
op|'}'
op|','
string|"'[]'"
op|')'
op|','
nl|'\n'
comment|'# GET the .services object'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"storage"'
op|':'
op|'{'
string|'"default"'
op|':'
string|'"local"'
op|','
nl|'\n'
string|'"local"'
op|':'
string|'"http://127.0.0.1:8080/v1/AUTH_cfa"'
op|'}'
op|'}'
op|')'
op|')'
op|','
nl|'\n'
comment|'# DELETE the .services object'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# DELETE the .account_id mapping object'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# DELETE the account container'
nl|'\n'
op|'('
string|"'404 Not Found'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'DELETE'"
op|','
nl|'\n'
string|"'swift.cache'"
op|':'
name|'FakeMemcache'
op|'('
op|')'
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'204'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'6'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'conn'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_delete_account_fail_bad_creds
dedent|''
name|'def'
name|'test_delete_account_fail_bad_creds'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of user object'
nl|'\n'
op|'('
string|"'404 Not Found'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'DELETE'"
op|','
nl|'\n'
string|"'swift.cache'"
op|':'
name|'FakeMemcache'
op|'('
op|')'
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'super:admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
op|','
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'403'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of user object (account admin, but not reseller admin)'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"groups"'
op|':'
op|'['
op|'{'
string|'"name"'
op|':'
string|'"act:adm"'
op|'}'
op|','
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'"test"'
op|'}'
op|','
op|'{'
string|'"name"'
op|':'
string|'".admin"'
op|'}'
op|']'
op|','
nl|'\n'
string|'"auth"'
op|':'
string|'"plaintext:key"'
op|'}'
op|')'
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'DELETE'"
op|','
nl|'\n'
string|"'swift.cache'"
op|':'
name|'FakeMemcache'
op|'('
op|')'
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'act:adm'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'key'"
op|'}'
op|','
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'403'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of user object (regular user)'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"groups"'
op|':'
op|'['
op|'{'
string|'"name"'
op|':'
string|'"act:usr"'
op|'}'
op|','
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'"test"'
op|'}'
op|']'
op|','
string|'"auth"'
op|':'
string|'"plaintext:key"'
op|'}'
op|')'
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'DELETE'"
op|','
nl|'\n'
string|"'swift.cache'"
op|':'
name|'FakeMemcache'
op|'('
op|')'
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'act:usr'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'key'"
op|'}'
op|','
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'403'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_delete_account_fail_invalid_account_name
dedent|''
name|'def'
name|'test_delete_account_fail_invalid_account_name'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/.act'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'DELETE'"
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'400'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_delete_account_fail_not_found
dedent|''
name|'def'
name|'test_delete_account_fail_not_found'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|"# Account's container listing, checking for users"
nl|'\n'
op|'('
string|"'404 Not Found'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'DELETE'"
op|','
nl|'\n'
string|"'swift.cache'"
op|':'
name|'FakeMemcache'
op|'('
op|')'
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'404'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_delete_account_fail_not_found_concurrency
dedent|''
name|'def'
name|'test_delete_account_fail_not_found_concurrency'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|"# Account's container listing, checking for users"
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
string|"'X-Container-Meta-Account-Id'"
op|':'
string|"'AUTH_cfa'"
op|'}'
op|','
nl|'\n'
name|'json'
op|'.'
name|'dumps'
op|'('
op|'['
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'".services"'
op|','
string|'"hash"'
op|':'
string|'"etag"'
op|','
string|'"bytes"'
op|':'
number|'112'
op|','
nl|'\n'
string|'"content_type"'
op|':'
string|'"application/octet-stream"'
op|','
nl|'\n'
string|'"last_modified"'
op|':'
string|'"2010-12-03T17:16:27.618110"'
op|'}'
op|']'
op|')'
op|')'
op|','
nl|'\n'
comment|"# Account's container listing, checking for users (continuation)"
nl|'\n'
op|'('
string|"'404 Not Found'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'DELETE'"
op|','
nl|'\n'
string|"'swift.cache'"
op|':'
name|'FakeMemcache'
op|'('
op|')'
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'404'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'2'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_delete_account_fail_list_account
dedent|''
name|'def'
name|'test_delete_account_fail_list_account'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|"# Account's container listing, checking for users"
nl|'\n'
op|'('
string|"'503 Service Unavailable'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'DELETE'"
op|','
nl|'\n'
string|"'swift.cache'"
op|':'
name|'FakeMemcache'
op|'('
op|')'
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'500'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_delete_account_fail_list_account_concurrency
dedent|''
name|'def'
name|'test_delete_account_fail_list_account_concurrency'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|"# Account's container listing, checking for users"
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
string|"'X-Container-Meta-Account-Id'"
op|':'
string|"'AUTH_cfa'"
op|'}'
op|','
nl|'\n'
name|'json'
op|'.'
name|'dumps'
op|'('
op|'['
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'".services"'
op|','
string|'"hash"'
op|':'
string|'"etag"'
op|','
string|'"bytes"'
op|':'
number|'112'
op|','
nl|'\n'
string|'"content_type"'
op|':'
string|'"application/octet-stream"'
op|','
nl|'\n'
string|'"last_modified"'
op|':'
string|'"2010-12-03T17:16:27.618110"'
op|'}'
op|']'
op|')'
op|')'
op|','
nl|'\n'
comment|"# Account's container listing, checking for users (continuation)"
nl|'\n'
op|'('
string|"'503 Service Unavailable'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'DELETE'"
op|','
nl|'\n'
string|"'swift.cache'"
op|':'
name|'FakeMemcache'
op|'('
op|')'
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'500'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'2'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_delete_account_fail_has_users
dedent|''
name|'def'
name|'test_delete_account_fail_has_users'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|"# Account's container listing, checking for users"
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
string|"'X-Container-Meta-Account-Id'"
op|':'
string|"'AUTH_cfa'"
op|'}'
op|','
nl|'\n'
name|'json'
op|'.'
name|'dumps'
op|'('
op|'['
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'".services"'
op|','
string|'"hash"'
op|':'
string|'"etag"'
op|','
string|'"bytes"'
op|':'
number|'112'
op|','
nl|'\n'
string|'"content_type"'
op|':'
string|'"application/octet-stream"'
op|','
nl|'\n'
string|'"last_modified"'
op|':'
string|'"2010-12-03T17:16:27.618110"'
op|'}'
op|','
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'"tester"'
op|','
string|'"hash"'
op|':'
string|'"etag"'
op|','
string|'"bytes"'
op|':'
number|'104'
op|','
nl|'\n'
string|'"content_type"'
op|':'
string|'"application/octet-stream"'
op|','
nl|'\n'
string|'"last_modified"'
op|':'
string|'"2010-12-03T17:16:27.736680"'
op|'}'
op|']'
op|')'
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'DELETE'"
op|','
nl|'\n'
string|"'swift.cache'"
op|':'
name|'FakeMemcache'
op|'('
op|')'
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'409'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_delete_account_fail_has_users2
dedent|''
name|'def'
name|'test_delete_account_fail_has_users2'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|"# Account's container listing, checking for users"
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
string|"'X-Container-Meta-Account-Id'"
op|':'
string|"'AUTH_cfa'"
op|'}'
op|','
nl|'\n'
name|'json'
op|'.'
name|'dumps'
op|'('
op|'['
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'".services"'
op|','
string|'"hash"'
op|':'
string|'"etag"'
op|','
string|'"bytes"'
op|':'
number|'112'
op|','
nl|'\n'
string|'"content_type"'
op|':'
string|'"application/octet-stream"'
op|','
nl|'\n'
string|'"last_modified"'
op|':'
string|'"2010-12-03T17:16:27.618110"'
op|'}'
op|']'
op|')'
op|')'
op|','
nl|'\n'
comment|"# Account's container listing, checking for users (continuation)"
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
string|"'X-Container-Meta-Account-Id'"
op|':'
string|"'AUTH_cfa'"
op|'}'
op|','
nl|'\n'
name|'json'
op|'.'
name|'dumps'
op|'('
op|'['
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'"tester"'
op|','
string|'"hash"'
op|':'
string|'"etag"'
op|','
string|'"bytes"'
op|':'
number|'104'
op|','
nl|'\n'
string|'"content_type"'
op|':'
string|'"application/octet-stream"'
op|','
nl|'\n'
string|'"last_modified"'
op|':'
string|'"2010-12-03T17:16:27.736680"'
op|'}'
op|']'
op|')'
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'DELETE'"
op|','
nl|'\n'
string|"'swift.cache'"
op|':'
name|'FakeMemcache'
op|'('
op|')'
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'409'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'2'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_delete_account_fail_get_services
dedent|''
name|'def'
name|'test_delete_account_fail_get_services'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|"# Account's container listing, checking for users"
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
string|"'X-Container-Meta-Account-Id'"
op|':'
string|"'AUTH_cfa'"
op|'}'
op|','
nl|'\n'
name|'json'
op|'.'
name|'dumps'
op|'('
op|'['
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'".services"'
op|','
string|'"hash"'
op|':'
string|'"etag"'
op|','
string|'"bytes"'
op|':'
number|'112'
op|','
nl|'\n'
string|'"content_type"'
op|':'
string|'"application/octet-stream"'
op|','
nl|'\n'
string|'"last_modified"'
op|':'
string|'"2010-12-03T17:16:27.618110"'
op|'}'
op|']'
op|')'
op|')'
op|','
nl|'\n'
comment|"# Account's container listing, checking for users (continuation)"
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
string|"'X-Container-Meta-Account-Id'"
op|':'
string|"'AUTH_cfa'"
op|'}'
op|','
string|"'[]'"
op|')'
op|','
nl|'\n'
comment|'# GET the .services object'
nl|'\n'
op|'('
string|"'503 Service Unavailable'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'DELETE'"
op|','
nl|'\n'
string|"'swift.cache'"
op|':'
name|'FakeMemcache'
op|'('
op|')'
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'500'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'3'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_delete_account_fail_delete_storage_account
dedent|''
name|'def'
name|'test_delete_account_fail_delete_storage_account'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'conn'
op|'='
name|'FakeConn'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# DELETE of storage account itself'
nl|'\n'
op|'('
string|"'409 Conflict'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'get_conn'
op|'='
name|'lambda'
name|'x'
op|':'
name|'conn'
newline|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|"# Account's container listing, checking for users"
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
string|"'X-Container-Meta-Account-Id'"
op|':'
string|"'AUTH_cfa'"
op|'}'
op|','
nl|'\n'
name|'json'
op|'.'
name|'dumps'
op|'('
op|'['
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'".services"'
op|','
string|'"hash"'
op|':'
string|'"etag"'
op|','
string|'"bytes"'
op|':'
number|'112'
op|','
nl|'\n'
string|'"content_type"'
op|':'
string|'"application/octet-stream"'
op|','
nl|'\n'
string|'"last_modified"'
op|':'
string|'"2010-12-03T17:16:27.618110"'
op|'}'
op|']'
op|')'
op|')'
op|','
nl|'\n'
comment|"# Account's container listing, checking for users (continuation)"
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
string|"'X-Container-Meta-Account-Id'"
op|':'
string|"'AUTH_cfa'"
op|'}'
op|','
string|"'[]'"
op|')'
op|','
nl|'\n'
comment|'# GET the .services object'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"storage"'
op|':'
op|'{'
string|'"default"'
op|':'
string|'"local"'
op|','
nl|'\n'
string|'"local"'
op|':'
string|'"http://127.0.0.1:8080/v1/AUTH_cfa"'
op|'}'
op|'}'
op|')'
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'DELETE'"
op|','
nl|'\n'
string|"'swift.cache'"
op|':'
name|'FakeMemcache'
op|'('
op|')'
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'409'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'3'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'conn'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_delete_account_fail_delete_storage_account2
dedent|''
name|'def'
name|'test_delete_account_fail_delete_storage_account2'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'conn'
op|'='
name|'FakeConn'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# DELETE of storage account itself'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# DELETE of storage account itself'
nl|'\n'
op|'('
string|"'409 Conflict'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'get_conn'
op|'='
name|'lambda'
name|'x'
op|':'
name|'conn'
newline|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|"# Account's container listing, checking for users"
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
string|"'X-Container-Meta-Account-Id'"
op|':'
string|"'AUTH_cfa'"
op|'}'
op|','
nl|'\n'
name|'json'
op|'.'
name|'dumps'
op|'('
op|'['
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'".services"'
op|','
string|'"hash"'
op|':'
string|'"etag"'
op|','
string|'"bytes"'
op|':'
number|'112'
op|','
nl|'\n'
string|'"content_type"'
op|':'
string|'"application/octet-stream"'
op|','
nl|'\n'
string|'"last_modified"'
op|':'
string|'"2010-12-03T17:16:27.618110"'
op|'}'
op|']'
op|')'
op|')'
op|','
nl|'\n'
comment|"# Account's container listing, checking for users (continuation)"
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
string|"'X-Container-Meta-Account-Id'"
op|':'
string|"'AUTH_cfa'"
op|'}'
op|','
string|"'[]'"
op|')'
op|','
nl|'\n'
comment|'# GET the .services object'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"storage"'
op|':'
op|'{'
string|'"default"'
op|':'
string|'"local"'
op|','
nl|'\n'
string|'"local"'
op|':'
string|'"http://127.0.0.1:8080/v1/AUTH_cfa"'
op|','
nl|'\n'
string|'"other"'
op|':'
string|'"http://127.0.0.1:8080/v1/AUTH_cfa2"'
op|'}'
op|'}'
op|')'
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'DELETE'"
op|','
nl|'\n'
string|"'swift.cache'"
op|':'
name|'FakeMemcache'
op|'('
op|')'
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'500'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'3'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'conn'
op|'.'
name|'calls'
op|','
number|'2'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_delete_account_fail_delete_storage_account3
dedent|''
name|'def'
name|'test_delete_account_fail_delete_storage_account3'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'conn'
op|'='
name|'FakeConn'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# DELETE of storage account itself'
nl|'\n'
op|'('
string|"'503 Service Unavailable'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'get_conn'
op|'='
name|'lambda'
name|'x'
op|':'
name|'conn'
newline|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|"# Account's container listing, checking for users"
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
string|"'X-Container-Meta-Account-Id'"
op|':'
string|"'AUTH_cfa'"
op|'}'
op|','
nl|'\n'
name|'json'
op|'.'
name|'dumps'
op|'('
op|'['
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'".services"'
op|','
string|'"hash"'
op|':'
string|'"etag"'
op|','
string|'"bytes"'
op|':'
number|'112'
op|','
nl|'\n'
string|'"content_type"'
op|':'
string|'"application/octet-stream"'
op|','
nl|'\n'
string|'"last_modified"'
op|':'
string|'"2010-12-03T17:16:27.618110"'
op|'}'
op|']'
op|')'
op|')'
op|','
nl|'\n'
comment|"# Account's container listing, checking for users (continuation)"
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
string|"'X-Container-Meta-Account-Id'"
op|':'
string|"'AUTH_cfa'"
op|'}'
op|','
string|"'[]'"
op|')'
op|','
nl|'\n'
comment|'# GET the .services object'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"storage"'
op|':'
op|'{'
string|'"default"'
op|':'
string|'"local"'
op|','
nl|'\n'
string|'"local"'
op|':'
string|'"http://127.0.0.1:8080/v1/AUTH_cfa"'
op|'}'
op|'}'
op|')'
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'DELETE'"
op|','
nl|'\n'
string|"'swift.cache'"
op|':'
name|'FakeMemcache'
op|'('
op|')'
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'500'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'3'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'conn'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_delete_account_fail_delete_storage_account4
dedent|''
name|'def'
name|'test_delete_account_fail_delete_storage_account4'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'conn'
op|'='
name|'FakeConn'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# DELETE of storage account itself'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# DELETE of storage account itself'
nl|'\n'
op|'('
string|"'503 Service Unavailable'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'get_conn'
op|'='
name|'lambda'
name|'x'
op|':'
name|'conn'
newline|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|"# Account's container listing, checking for users"
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
string|"'X-Container-Meta-Account-Id'"
op|':'
string|"'AUTH_cfa'"
op|'}'
op|','
nl|'\n'
name|'json'
op|'.'
name|'dumps'
op|'('
op|'['
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'".services"'
op|','
string|'"hash"'
op|':'
string|'"etag"'
op|','
string|'"bytes"'
op|':'
number|'112'
op|','
nl|'\n'
string|'"content_type"'
op|':'
string|'"application/octet-stream"'
op|','
nl|'\n'
string|'"last_modified"'
op|':'
string|'"2010-12-03T17:16:27.618110"'
op|'}'
op|']'
op|')'
op|')'
op|','
nl|'\n'
comment|"# Account's container listing, checking for users (continuation)"
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
string|"'X-Container-Meta-Account-Id'"
op|':'
string|"'AUTH_cfa'"
op|'}'
op|','
string|"'[]'"
op|')'
op|','
nl|'\n'
comment|'# GET the .services object'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"storage"'
op|':'
op|'{'
string|'"default"'
op|':'
string|'"local"'
op|','
nl|'\n'
string|'"local"'
op|':'
string|'"http://127.0.0.1:8080/v1/AUTH_cfa"'
op|','
nl|'\n'
string|'"other"'
op|':'
string|'"http://127.0.0.1:8080/v1/AUTH_cfa2"'
op|'}'
op|'}'
op|')'
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'DELETE'"
op|','
nl|'\n'
string|"'swift.cache'"
op|':'
name|'FakeMemcache'
op|'('
op|')'
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'500'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'3'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'conn'
op|'.'
name|'calls'
op|','
number|'2'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_delete_account_fail_delete_services
dedent|''
name|'def'
name|'test_delete_account_fail_delete_services'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'conn'
op|'='
name|'FakeConn'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# DELETE of storage account itself'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'get_conn'
op|'='
name|'lambda'
name|'x'
op|':'
name|'conn'
newline|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|"# Account's container listing, checking for users"
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
string|"'X-Container-Meta-Account-Id'"
op|':'
string|"'AUTH_cfa'"
op|'}'
op|','
nl|'\n'
name|'json'
op|'.'
name|'dumps'
op|'('
op|'['
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'".services"'
op|','
string|'"hash"'
op|':'
string|'"etag"'
op|','
string|'"bytes"'
op|':'
number|'112'
op|','
nl|'\n'
string|'"content_type"'
op|':'
string|'"application/octet-stream"'
op|','
nl|'\n'
string|'"last_modified"'
op|':'
string|'"2010-12-03T17:16:27.618110"'
op|'}'
op|']'
op|')'
op|')'
op|','
nl|'\n'
comment|"# Account's container listing, checking for users (continuation)"
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
string|"'X-Container-Meta-Account-Id'"
op|':'
string|"'AUTH_cfa'"
op|'}'
op|','
string|"'[]'"
op|')'
op|','
nl|'\n'
comment|'# GET the .services object'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"storage"'
op|':'
op|'{'
string|'"default"'
op|':'
string|'"local"'
op|','
nl|'\n'
string|'"local"'
op|':'
string|'"http://127.0.0.1:8080/v1/AUTH_cfa"'
op|'}'
op|'}'
op|')'
op|')'
op|','
nl|'\n'
comment|'# DELETE the .services object'
nl|'\n'
op|'('
string|"'503 Service Unavailable'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'DELETE'"
op|','
nl|'\n'
string|"'swift.cache'"
op|':'
name|'FakeMemcache'
op|'('
op|')'
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'500'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'4'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'conn'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_delete_account_fail_delete_account_id_mapping
dedent|''
name|'def'
name|'test_delete_account_fail_delete_account_id_mapping'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'conn'
op|'='
name|'FakeConn'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# DELETE of storage account itself'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'get_conn'
op|'='
name|'lambda'
name|'x'
op|':'
name|'conn'
newline|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|"# Account's container listing, checking for users"
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
string|"'X-Container-Meta-Account-Id'"
op|':'
string|"'AUTH_cfa'"
op|'}'
op|','
nl|'\n'
name|'json'
op|'.'
name|'dumps'
op|'('
op|'['
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'".services"'
op|','
string|'"hash"'
op|':'
string|'"etag"'
op|','
string|'"bytes"'
op|':'
number|'112'
op|','
nl|'\n'
string|'"content_type"'
op|':'
string|'"application/octet-stream"'
op|','
nl|'\n'
string|'"last_modified"'
op|':'
string|'"2010-12-03T17:16:27.618110"'
op|'}'
op|']'
op|')'
op|')'
op|','
nl|'\n'
comment|"# Account's container listing, checking for users (continuation)"
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
string|"'X-Container-Meta-Account-Id'"
op|':'
string|"'AUTH_cfa'"
op|'}'
op|','
string|"'[]'"
op|')'
op|','
nl|'\n'
comment|'# GET the .services object'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"storage"'
op|':'
op|'{'
string|'"default"'
op|':'
string|'"local"'
op|','
nl|'\n'
string|'"local"'
op|':'
string|'"http://127.0.0.1:8080/v1/AUTH_cfa"'
op|'}'
op|'}'
op|')'
op|')'
op|','
nl|'\n'
comment|'# DELETE the .services object'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# DELETE the .account_id mapping object'
nl|'\n'
op|'('
string|"'503 Service Unavailable'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'DELETE'"
op|','
nl|'\n'
string|"'swift.cache'"
op|':'
name|'FakeMemcache'
op|'('
op|')'
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'500'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'5'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'conn'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_delete_account_fail_delete_account_container
dedent|''
name|'def'
name|'test_delete_account_fail_delete_account_container'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'conn'
op|'='
name|'FakeConn'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# DELETE of storage account itself'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'get_conn'
op|'='
name|'lambda'
name|'x'
op|':'
name|'conn'
newline|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|"# Account's container listing, checking for users"
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
string|"'X-Container-Meta-Account-Id'"
op|':'
string|"'AUTH_cfa'"
op|'}'
op|','
nl|'\n'
name|'json'
op|'.'
name|'dumps'
op|'('
op|'['
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'".services"'
op|','
string|'"hash"'
op|':'
string|'"etag"'
op|','
string|'"bytes"'
op|':'
number|'112'
op|','
nl|'\n'
string|'"content_type"'
op|':'
string|'"application/octet-stream"'
op|','
nl|'\n'
string|'"last_modified"'
op|':'
string|'"2010-12-03T17:16:27.618110"'
op|'}'
op|']'
op|')'
op|')'
op|','
nl|'\n'
comment|"# Account's container listing, checking for users (continuation)"
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
string|"'X-Container-Meta-Account-Id'"
op|':'
string|"'AUTH_cfa'"
op|'}'
op|','
string|"'[]'"
op|')'
op|','
nl|'\n'
comment|'# GET the .services object'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"storage"'
op|':'
op|'{'
string|'"default"'
op|':'
string|'"local"'
op|','
nl|'\n'
string|'"local"'
op|':'
string|'"http://127.0.0.1:8080/v1/AUTH_cfa"'
op|'}'
op|'}'
op|')'
op|')'
op|','
nl|'\n'
comment|'# DELETE the .services object'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# DELETE the .account_id mapping object'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# DELETE the account container'
nl|'\n'
op|'('
string|"'503 Service Unavailable'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'DELETE'"
op|','
nl|'\n'
string|"'swift.cache'"
op|':'
name|'FakeMemcache'
op|'('
op|')'
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'500'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'6'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'conn'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_user_success
dedent|''
name|'def'
name|'test_get_user_success'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of user object'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
nl|'\n'
op|'{'
string|'"groups"'
op|':'
op|'['
op|'{'
string|'"name"'
op|':'
string|'"act:usr"'
op|'}'
op|','
op|'{'
string|'"name"'
op|':'
string|'"act"'
op|'}'
op|','
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'".admin"'
op|'}'
op|']'
op|','
nl|'\n'
string|'"auth"'
op|':'
string|'"plaintext:key"'
op|'}'
op|')'
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act/usr'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'200'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'body'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
nl|'\n'
op|'{'
string|'"groups"'
op|':'
op|'['
op|'{'
string|'"name"'
op|':'
string|'"act:usr"'
op|'}'
op|','
op|'{'
string|'"name"'
op|':'
string|'"act"'
op|'}'
op|','
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'".admin"'
op|'}'
op|']'
op|','
nl|'\n'
string|'"auth"'
op|':'
string|'"plaintext:key"'
op|'}'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_user_groups_success
dedent|''
name|'def'
name|'test_get_user_groups_success'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of account container (list objects)'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
string|"'X-Container-Meta-Account-Id'"
op|':'
string|"'AUTH_cfa'"
op|'}'
op|','
nl|'\n'
name|'json'
op|'.'
name|'dumps'
op|'('
op|'['
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'".services"'
op|','
string|'"hash"'
op|':'
string|'"etag"'
op|','
string|'"bytes"'
op|':'
number|'112'
op|','
nl|'\n'
string|'"content_type"'
op|':'
string|'"application/octet-stream"'
op|','
nl|'\n'
string|'"last_modified"'
op|':'
string|'"2010-12-03T17:16:27.618110"'
op|'}'
op|','
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'"tester"'
op|','
string|'"hash"'
op|':'
string|'"etag"'
op|','
string|'"bytes"'
op|':'
number|'104'
op|','
nl|'\n'
string|'"content_type"'
op|':'
string|'"application/octet-stream"'
op|','
nl|'\n'
string|'"last_modified"'
op|':'
string|'"2010-12-03T17:16:27.736680"'
op|'}'
op|','
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'"tester3"'
op|','
string|'"hash"'
op|':'
string|'"etag"'
op|','
string|'"bytes"'
op|':'
number|'86'
op|','
nl|'\n'
string|'"content_type"'
op|':'
string|'"application/octet-stream"'
op|','
nl|'\n'
string|'"last_modified"'
op|':'
string|'"2010-12-03T17:16:28.135530"'
op|'}'
op|']'
op|')'
op|')'
op|','
nl|'\n'
comment|'# GET of user object'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
nl|'\n'
op|'{'
string|'"groups"'
op|':'
op|'['
op|'{'
string|'"name"'
op|':'
string|'"act:tester"'
op|'}'
op|','
op|'{'
string|'"name"'
op|':'
string|'"act"'
op|'}'
op|','
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'".admin"'
op|'}'
op|']'
op|','
nl|'\n'
string|'"auth"'
op|':'
string|'"plaintext:key"'
op|'}'
op|')'
op|')'
op|','
nl|'\n'
comment|'# GET of user object'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
nl|'\n'
op|'{'
string|'"groups"'
op|':'
op|'['
op|'{'
string|'"name"'
op|':'
string|'"act:tester3"'
op|'}'
op|','
op|'{'
string|'"name"'
op|':'
string|'"act"'
op|'}'
op|']'
op|','
nl|'\n'
string|'"auth"'
op|':'
string|'"plaintext:key3"'
op|'}'
op|')'
op|')'
op|','
nl|'\n'
comment|'# GET of account container (list objects continuation)'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
string|"'X-Container-Meta-Account-Id'"
op|':'
string|"'AUTH_cfa'"
op|'}'
op|','
string|"'[]'"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act/.groups'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'200'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'body'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
nl|'\n'
op|'{'
string|'"groups"'
op|':'
op|'['
op|'{'
string|'"name"'
op|':'
string|'".admin"'
op|'}'
op|','
op|'{'
string|'"name"'
op|':'
string|'"act"'
op|'}'
op|','
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'"act:tester"'
op|'}'
op|','
op|'{'
string|'"name"'
op|':'
string|'"act:tester3"'
op|'}'
op|']'
op|'}'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'4'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_user_groups_success2
dedent|''
name|'def'
name|'test_get_user_groups_success2'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of account container (list objects)'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
string|"'X-Container-Meta-Account-Id'"
op|':'
string|"'AUTH_cfa'"
op|'}'
op|','
nl|'\n'
name|'json'
op|'.'
name|'dumps'
op|'('
op|'['
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'".services"'
op|','
string|'"hash"'
op|':'
string|'"etag"'
op|','
string|'"bytes"'
op|':'
number|'112'
op|','
nl|'\n'
string|'"content_type"'
op|':'
string|'"application/octet-stream"'
op|','
nl|'\n'
string|'"last_modified"'
op|':'
string|'"2010-12-03T17:16:27.618110"'
op|'}'
op|','
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'"tester"'
op|','
string|'"hash"'
op|':'
string|'"etag"'
op|','
string|'"bytes"'
op|':'
number|'104'
op|','
nl|'\n'
string|'"content_type"'
op|':'
string|'"application/octet-stream"'
op|','
nl|'\n'
string|'"last_modified"'
op|':'
string|'"2010-12-03T17:16:27.736680"'
op|'}'
op|']'
op|')'
op|')'
op|','
nl|'\n'
comment|'# GET of user object'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
nl|'\n'
op|'{'
string|'"groups"'
op|':'
op|'['
op|'{'
string|'"name"'
op|':'
string|'"act:tester"'
op|'}'
op|','
op|'{'
string|'"name"'
op|':'
string|'"act"'
op|'}'
op|','
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'".admin"'
op|'}'
op|']'
op|','
nl|'\n'
string|'"auth"'
op|':'
string|'"plaintext:key"'
op|'}'
op|')'
op|')'
op|','
nl|'\n'
comment|'# GET of account container (list objects continuation)'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
string|"'X-Container-Meta-Account-Id'"
op|':'
string|"'AUTH_cfa'"
op|'}'
op|','
nl|'\n'
name|'json'
op|'.'
name|'dumps'
op|'('
op|'['
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'"tester3"'
op|','
string|'"hash"'
op|':'
string|'"etag"'
op|','
string|'"bytes"'
op|':'
number|'86'
op|','
nl|'\n'
string|'"content_type"'
op|':'
string|'"application/octet-stream"'
op|','
nl|'\n'
string|'"last_modified"'
op|':'
string|'"2010-12-03T17:16:28.135530"'
op|'}'
op|']'
op|')'
op|')'
op|','
nl|'\n'
comment|'# GET of user object'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
nl|'\n'
op|'{'
string|'"groups"'
op|':'
op|'['
op|'{'
string|'"name"'
op|':'
string|'"act:tester3"'
op|'}'
op|','
op|'{'
string|'"name"'
op|':'
string|'"act"'
op|'}'
op|']'
op|','
nl|'\n'
string|'"auth"'
op|':'
string|'"plaintext:key3"'
op|'}'
op|')'
op|')'
op|','
nl|'\n'
comment|'# GET of account container (list objects continuation)'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
string|"'X-Container-Meta-Account-Id'"
op|':'
string|"'AUTH_cfa'"
op|'}'
op|','
string|"'[]'"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act/.groups'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'200'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'body'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
nl|'\n'
op|'{'
string|'"groups"'
op|':'
op|'['
op|'{'
string|'"name"'
op|':'
string|'".admin"'
op|'}'
op|','
op|'{'
string|'"name"'
op|':'
string|'"act"'
op|'}'
op|','
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'"act:tester"'
op|'}'
op|','
op|'{'
string|'"name"'
op|':'
string|'"act:tester3"'
op|'}'
op|']'
op|'}'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'5'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_user_fail_invalid_account
dedent|''
name|'def'
name|'test_get_user_fail_invalid_account'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/.invalid/usr'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'400'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_user_fail_invalid_user
dedent|''
name|'def'
name|'test_get_user_fail_invalid_user'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act/.invalid'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'400'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_user_fail_bad_creds
dedent|''
name|'def'
name|'test_get_user_fail_bad_creds'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of user object'
nl|'\n'
op|'('
string|"'404 Not Found'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act/usr'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'super:admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
op|','
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'403'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of user object (regular user)'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"groups"'
op|':'
op|'['
op|'{'
string|'"name"'
op|':'
string|'"act:usr"'
op|'}'
op|','
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'"test"'
op|'}'
op|']'
op|','
string|'"auth"'
op|':'
string|'"plaintext:key"'
op|'}'
op|')'
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act/usr'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'act:usr'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'key'"
op|'}'
op|','
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'403'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_user_account_admin_success
dedent|''
name|'def'
name|'test_get_user_account_admin_success'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of user object (account admin, but not reseller admin)'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"groups"'
op|':'
op|'['
op|'{'
string|'"name"'
op|':'
string|'"act:adm"'
op|'}'
op|','
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'"test"'
op|'}'
op|','
op|'{'
string|'"name"'
op|':'
string|'".admin"'
op|'}'
op|']'
op|','
nl|'\n'
string|'"auth"'
op|':'
string|'"plaintext:key"'
op|'}'
op|')'
op|')'
op|','
nl|'\n'
comment|'# GET of requested user object'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
nl|'\n'
op|'{'
string|'"groups"'
op|':'
op|'['
op|'{'
string|'"name"'
op|':'
string|'"act:usr"'
op|'}'
op|','
op|'{'
string|'"name"'
op|':'
string|'"act"'
op|'}'
op|','
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'".admin"'
op|'}'
op|']'
op|','
nl|'\n'
string|'"auth"'
op|':'
string|'"plaintext:key"'
op|'}'
op|')'
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act/usr'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'act:adm'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'key'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'200'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'body'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
nl|'\n'
op|'{'
string|'"groups"'
op|':'
op|'['
op|'{'
string|'"name"'
op|':'
string|'"act:usr"'
op|'}'
op|','
op|'{'
string|'"name"'
op|':'
string|'"act"'
op|'}'
op|','
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'".admin"'
op|'}'
op|']'
op|','
nl|'\n'
string|'"auth"'
op|':'
string|'"plaintext:key"'
op|'}'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'2'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_user_groups_not_found
dedent|''
name|'def'
name|'test_get_user_groups_not_found'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of account container (list objects)'
nl|'\n'
op|'('
string|"'404 Not Found'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act/.groups'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'404'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_user_groups_fail_listing
dedent|''
name|'def'
name|'test_get_user_groups_fail_listing'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of account container (list objects)'
nl|'\n'
op|'('
string|"'503 Service Unavailable'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act/.groups'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'500'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_user_groups_fail_get_user
dedent|''
name|'def'
name|'test_get_user_groups_fail_get_user'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of account container (list objects)'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
string|"'X-Container-Meta-Account-Id'"
op|':'
string|"'AUTH_cfa'"
op|'}'
op|','
nl|'\n'
name|'json'
op|'.'
name|'dumps'
op|'('
op|'['
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'".services"'
op|','
string|'"hash"'
op|':'
string|'"etag"'
op|','
string|'"bytes"'
op|':'
number|'112'
op|','
nl|'\n'
string|'"content_type"'
op|':'
string|'"application/octet-stream"'
op|','
nl|'\n'
string|'"last_modified"'
op|':'
string|'"2010-12-03T17:16:27.618110"'
op|'}'
op|','
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'"tester"'
op|','
string|'"hash"'
op|':'
string|'"etag"'
op|','
string|'"bytes"'
op|':'
number|'104'
op|','
nl|'\n'
string|'"content_type"'
op|':'
string|'"application/octet-stream"'
op|','
nl|'\n'
string|'"last_modified"'
op|':'
string|'"2010-12-03T17:16:27.736680"'
op|'}'
op|','
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'"tester3"'
op|','
string|'"hash"'
op|':'
string|'"etag"'
op|','
string|'"bytes"'
op|':'
number|'86'
op|','
nl|'\n'
string|'"content_type"'
op|':'
string|'"application/octet-stream"'
op|','
nl|'\n'
string|'"last_modified"'
op|':'
string|'"2010-12-03T17:16:28.135530"'
op|'}'
op|']'
op|')'
op|')'
op|','
nl|'\n'
comment|'# GET of user object'
nl|'\n'
op|'('
string|"'503 Service Unavailable'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act/.groups'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'500'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'2'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_user_not_found
dedent|''
name|'def'
name|'test_get_user_not_found'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of user object'
nl|'\n'
op|'('
string|"'404 Not Found'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act/usr'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'404'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_user_fail
dedent|''
name|'def'
name|'test_get_user_fail'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of user object'
nl|'\n'
op|'('
string|"'503 Service Unavailable'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act/usr'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|','
nl|'\n'
string|"'X-Auth-User-Key'"
op|':'
string|"'key'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'500'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_put_user_fail_invalid_account
dedent|''
name|'def'
name|'test_put_user_fail_invalid_account'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/.invalid/usr'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'PUT'"
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|','
nl|'\n'
string|"'X-Auth-User-Key'"
op|':'
string|"'key'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'400'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_put_user_fail_invalid_user
dedent|''
name|'def'
name|'test_put_user_fail_invalid_user'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act/.usr'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'PUT'"
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|','
nl|'\n'
string|"'X-Auth-User-Key'"
op|':'
string|"'key'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'400'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_put_user_fail_no_user_key
dedent|''
name|'def'
name|'test_put_user_fail_no_user_key'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act/usr'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'PUT'"
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'400'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_put_user_reseller_admin_fail_bad_creds
dedent|''
name|'def'
name|'test_put_user_reseller_admin_fail_bad_creds'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of user object (reseller admin)'
nl|'\n'
comment|"# This shouldn't actually get called, checked below"
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"groups"'
op|':'
op|'['
op|'{'
string|'"name"'
op|':'
string|'"act:rdm"'
op|'}'
op|','
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'"test"'
op|'}'
op|','
op|'{'
string|'"name"'
op|':'
string|'".admin"'
op|'}'
op|','
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'".reseller_admin"'
op|'}'
op|']'
op|','
string|'"auth"'
op|':'
string|'"plaintext:key"'
op|'}'
op|')'
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act/usr'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'PUT'"
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'act:rdm'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'key'"
op|','
nl|'\n'
string|"'X-Auth-User-Key'"
op|':'
string|"'key'"
op|','
nl|'\n'
string|"'X-Auth-User-Reseller-Admin'"
op|':'
string|"'true'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'403'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'0'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of user object (account admin, but not reseller admin)'
nl|'\n'
comment|"# This shouldn't actually get called, checked below"
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"groups"'
op|':'
op|'['
op|'{'
string|'"name"'
op|':'
string|'"act:adm"'
op|'}'
op|','
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'"test"'
op|'}'
op|','
op|'{'
string|'"name"'
op|':'
string|'".admin"'
op|'}'
op|']'
op|','
nl|'\n'
string|'"auth"'
op|':'
string|'"plaintext:key"'
op|'}'
op|')'
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act/usr'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'PUT'"
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'act:adm'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'key'"
op|','
nl|'\n'
string|"'X-Auth-User-Key'"
op|':'
string|"'key'"
op|','
nl|'\n'
string|"'X-Auth-User-Reseller-Admin'"
op|':'
string|"'true'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'403'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'0'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of user object (regular user)'
nl|'\n'
comment|"# This shouldn't actually get called, checked below"
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"groups"'
op|':'
op|'['
op|'{'
string|'"name"'
op|':'
string|'"act:usr"'
op|'}'
op|','
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'"test"'
op|'}'
op|']'
op|','
string|'"auth"'
op|':'
string|'"plaintext:key"'
op|'}'
op|')'
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act/usr'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'PUT'"
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'act:adm'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'key'"
op|','
nl|'\n'
string|"'X-Auth-User-Key'"
op|':'
string|"'key'"
op|','
nl|'\n'
string|"'X-Auth-User-Reseller-Admin'"
op|':'
string|"'true'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'403'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'0'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_put_user_account_admin_fail_bad_creds
dedent|''
name|'def'
name|'test_put_user_account_admin_fail_bad_creds'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of user object (account admin, but wrong account)'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"groups"'
op|':'
op|'['
op|'{'
string|'"name"'
op|':'
string|'"act2:adm"'
op|'}'
op|','
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'"test"'
op|'}'
op|','
op|'{'
string|'"name"'
op|':'
string|'".admin"'
op|'}'
op|']'
op|','
nl|'\n'
string|'"auth"'
op|':'
string|'"plaintext:key"'
op|'}'
op|')'
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act/usr'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'PUT'"
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'act2:adm'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'key'"
op|','
nl|'\n'
string|"'X-Auth-User-Key'"
op|':'
string|"'key'"
op|','
nl|'\n'
string|"'X-Auth-User-Admin'"
op|':'
string|"'true'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'403'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of user object (regular user)'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"groups"'
op|':'
op|'['
op|'{'
string|'"name"'
op|':'
string|'"act:usr"'
op|'}'
op|','
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'"test"'
op|'}'
op|']'
op|','
string|'"auth"'
op|':'
string|'"plaintext:key"'
op|'}'
op|')'
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act/usr'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'PUT'"
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'act:usr'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'key'"
op|','
nl|'\n'
string|"'X-Auth-User-Key'"
op|':'
string|"'key'"
op|','
nl|'\n'
string|"'X-Auth-User-Admin'"
op|':'
string|"'true'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'403'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_put_user_regular_fail_bad_creds
dedent|''
name|'def'
name|'test_put_user_regular_fail_bad_creds'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of user object (account admin, but wrong account)'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"groups"'
op|':'
op|'['
op|'{'
string|'"name"'
op|':'
string|'"act2:adm"'
op|'}'
op|','
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'"test"'
op|'}'
op|','
op|'{'
string|'"name"'
op|':'
string|'".admin"'
op|'}'
op|']'
op|','
nl|'\n'
string|'"auth"'
op|':'
string|'"plaintext:key"'
op|'}'
op|')'
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act/usr'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'PUT'"
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'act2:adm'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'key'"
op|','
nl|'\n'
string|"'X-Auth-User-Key'"
op|':'
string|"'key'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'403'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of user object (regular user)'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"groups"'
op|':'
op|'['
op|'{'
string|'"name"'
op|':'
string|'"act:usr"'
op|'}'
op|','
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'"test"'
op|'}'
op|']'
op|','
string|'"auth"'
op|':'
string|'"plaintext:key"'
op|'}'
op|')'
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act/usr'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'PUT'"
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'act:usr'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'key'"
op|','
nl|'\n'
string|"'X-Auth-User-Key'"
op|':'
string|"'key'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'403'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_put_user_regular_success
dedent|''
name|'def'
name|'test_put_user_regular_success'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
string|"'X-Container-Meta-Account-Id'"
op|':'
string|"'AUTH_cfa'"
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# PUT of user object'
nl|'\n'
op|'('
string|"'201 Created'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act/usr'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'PUT'"
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|','
nl|'\n'
string|"'X-Auth-User-Key'"
op|':'
string|"'key'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'201'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'2'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'json'
op|'.'
name|'loads'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'request'
op|'.'
name|'body'
op|')'
op|','
nl|'\n'
op|'{'
string|'"groups"'
op|':'
op|'['
op|'{'
string|'"name"'
op|':'
string|'"act:usr"'
op|'}'
op|','
op|'{'
string|'"name"'
op|':'
string|'"act"'
op|'}'
op|']'
op|','
nl|'\n'
string|'"auth"'
op|':'
string|'"plaintext:key"'
op|'}'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_put_user_account_admin_success
dedent|''
name|'def'
name|'test_put_user_account_admin_success'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
string|"'X-Container-Meta-Account-Id'"
op|':'
string|"'AUTH_cfa'"
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# PUT of user object'
nl|'\n'
op|'('
string|"'201 Created'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act/usr'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'PUT'"
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|','
nl|'\n'
string|"'X-Auth-User-Key'"
op|':'
string|"'key'"
op|','
nl|'\n'
string|"'X-Auth-User-Admin'"
op|':'
string|"'true'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'201'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'2'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'json'
op|'.'
name|'loads'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'request'
op|'.'
name|'body'
op|')'
op|','
nl|'\n'
op|'{'
string|'"groups"'
op|':'
op|'['
op|'{'
string|'"name"'
op|':'
string|'"act:usr"'
op|'}'
op|','
op|'{'
string|'"name"'
op|':'
string|'"act"'
op|'}'
op|','
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'".admin"'
op|'}'
op|']'
op|','
nl|'\n'
string|'"auth"'
op|':'
string|'"plaintext:key"'
op|'}'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_put_user_reseller_admin_success
dedent|''
name|'def'
name|'test_put_user_reseller_admin_success'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
string|"'X-Container-Meta-Account-Id'"
op|':'
string|"'AUTH_cfa'"
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# PUT of user object'
nl|'\n'
op|'('
string|"'201 Created'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act/usr'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'PUT'"
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|','
nl|'\n'
string|"'X-Auth-User-Key'"
op|':'
string|"'key'"
op|','
nl|'\n'
string|"'X-Auth-User-Reseller-Admin'"
op|':'
string|"'true'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'201'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'2'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'json'
op|'.'
name|'loads'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'request'
op|'.'
name|'body'
op|')'
op|','
nl|'\n'
op|'{'
string|'"groups"'
op|':'
op|'['
op|'{'
string|'"name"'
op|':'
string|'"act:usr"'
op|'}'
op|','
op|'{'
string|'"name"'
op|':'
string|'"act"'
op|'}'
op|','
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'".admin"'
op|'}'
op|','
op|'{'
string|'"name"'
op|':'
string|'".reseller_admin"'
op|'}'
op|']'
op|','
nl|'\n'
string|'"auth"'
op|':'
string|'"plaintext:key"'
op|'}'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_put_user_fail_not_found
dedent|''
name|'def'
name|'test_put_user_fail_not_found'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
string|"'X-Container-Meta-Account-Id'"
op|':'
string|"'AUTH_cfa'"
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# PUT of user object'
nl|'\n'
op|'('
string|"'404 Not Found'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act/usr'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'PUT'"
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|','
nl|'\n'
string|"'X-Auth-User-Key'"
op|':'
string|"'key'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'404'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'2'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_put_user_fail
dedent|''
name|'def'
name|'test_put_user_fail'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# PUT of user object'
nl|'\n'
op|'('
string|"'503 Service Unavailable'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act/usr'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'PUT'"
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|','
nl|'\n'
string|"'X-Auth-User-Key'"
op|':'
string|"'key'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'500'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_delete_user_bad_creds
dedent|''
name|'def'
name|'test_delete_user_bad_creds'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of user object (account admin, but wrong account)'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"groups"'
op|':'
op|'['
op|'{'
string|'"name"'
op|':'
string|'"act2:adm"'
op|'}'
op|','
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'"test"'
op|'}'
op|','
op|'{'
string|'"name"'
op|':'
string|'".admin"'
op|'}'
op|']'
op|','
nl|'\n'
string|'"auth"'
op|':'
string|'"plaintext:key"'
op|'}'
op|')'
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act/usr'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'DELETE'"
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'act2:adm'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'key'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'403'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of user object (regular user)'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"groups"'
op|':'
op|'['
op|'{'
string|'"name"'
op|':'
string|'"act:usr"'
op|'}'
op|','
nl|'\n'
op|'{'
string|'"name"'
op|':'
string|'"test"'
op|'}'
op|']'
op|','
string|'"auth"'
op|':'
string|'"plaintext:key"'
op|'}'
op|')'
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act/usr'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'DELETE'"
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'act:usr'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'key'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'403'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_delete_user_invalid_account
dedent|''
name|'def'
name|'test_delete_user_invalid_account'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/.invalid/usr'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'DELETE'"
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'400'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_delete_user_invalid_user
dedent|''
name|'def'
name|'test_delete_user_invalid_user'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act/.invalid'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'DELETE'"
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'400'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_delete_user_not_found
dedent|''
name|'def'
name|'test_delete_user_not_found'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# HEAD of user object'
nl|'\n'
op|'('
string|"'404 Not Found'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act/usr'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'DELETE'"
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'404'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_delete_user_fail_head_user
dedent|''
name|'def'
name|'test_delete_user_fail_head_user'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# HEAD of user object'
nl|'\n'
op|'('
string|"'503 Service Unavailable'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act/usr'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'DELETE'"
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'500'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_delete_user_fail_delete_token
dedent|''
name|'def'
name|'test_delete_user_fail_delete_token'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# HEAD of user object'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
string|"'X-Object-Meta-Auth-Token'"
op|':'
string|"'AUTH_tk'"
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# DELETE of token'
nl|'\n'
op|'('
string|"'503 Service Unavailable'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act/usr'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'DELETE'"
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'500'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'2'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_delete_user_fail_delete_user
dedent|''
name|'def'
name|'test_delete_user_fail_delete_user'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# HEAD of user object'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
string|"'X-Object-Meta-Auth-Token'"
op|':'
string|"'AUTH_tk'"
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# DELETE of token'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# DELETE of user object'
nl|'\n'
op|'('
string|"'503 Service Unavailable'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act/usr'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'DELETE'"
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'500'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'3'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_delete_user_success
dedent|''
name|'def'
name|'test_delete_user_success'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# HEAD of user object'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
string|"'X-Object-Meta-Auth-Token'"
op|':'
string|"'AUTH_tk'"
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# DELETE of token'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# DELETE of user object'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act/usr'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'DELETE'"
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'204'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'3'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_delete_user_success_missing_user_at_end
dedent|''
name|'def'
name|'test_delete_user_success_missing_user_at_end'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# HEAD of user object'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
string|"'X-Object-Meta-Auth-Token'"
op|':'
string|"'AUTH_tk'"
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# DELETE of token'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# DELETE of user object'
nl|'\n'
op|'('
string|"'404 Not Found'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act/usr'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'DELETE'"
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'204'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'3'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_delete_user_success_missing_token
dedent|''
name|'def'
name|'test_delete_user_success_missing_token'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# HEAD of user object'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
string|"'X-Object-Meta-Auth-Token'"
op|':'
string|"'AUTH_tk'"
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# DELETE of token'
nl|'\n'
op|'('
string|"'404 Not Found'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# DELETE of user object'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act/usr'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'DELETE'"
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'204'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'3'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_delete_user_success_no_token
dedent|''
name|'def'
name|'test_delete_user_success_no_token'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# HEAD of user object'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|','
nl|'\n'
comment|'# DELETE of user object'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/act/usr'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'DELETE'"
op|'}'
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'204'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'2'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_validate_token_bad_prefix
dedent|''
name|'def'
name|'test_validate_token_bad_prefix'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/.token/BAD_token'"
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'400'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_validate_token_tmi
dedent|''
name|'def'
name|'test_validate_token_tmi'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/.token/AUTH_token/tmi'"
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'400'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_validate_token_bad_memcache
dedent|''
name|'def'
name|'test_validate_token_bad_memcache'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'fake_memcache'
op|'='
name|'FakeMemcache'
op|'('
op|')'
newline|'\n'
name|'fake_memcache'
op|'.'
name|'set'
op|'('
string|"'AUTH_/auth/AUTH_token'"
op|','
string|"'bogus'"
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/.token/AUTH_token'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'swift.cache'"
op|':'
nl|'\n'
name|'fake_memcache'
op|'}'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'500'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_validate_token_from_memcache
dedent|''
name|'def'
name|'test_validate_token_from_memcache'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'fake_memcache'
op|'='
name|'FakeMemcache'
op|'('
op|')'
newline|'\n'
name|'fake_memcache'
op|'.'
name|'set'
op|'('
string|"'AUTH_/auth/AUTH_token'"
op|','
op|'('
name|'time'
op|'('
op|')'
op|'+'
number|'1'
op|','
string|"'act:usr,act'"
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/.token/AUTH_token'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'swift.cache'"
op|':'
nl|'\n'
name|'fake_memcache'
op|'}'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'204'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'headers'
op|'.'
name|'get'
op|'('
string|"'x-auth-groups'"
op|')'
op|','
string|"'act:usr,act'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assert_'
op|'('
name|'float'
op|'('
name|'resp'
op|'.'
name|'headers'
op|'['
string|"'x-auth-ttl'"
op|']'
op|')'
op|'<'
number|'1'
op|','
nl|'\n'
name|'resp'
op|'.'
name|'headers'
op|'['
string|"'x-auth-ttl'"
op|']'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_validate_token_from_memcache_expired
dedent|''
name|'def'
name|'test_validate_token_from_memcache_expired'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'fake_memcache'
op|'='
name|'FakeMemcache'
op|'('
op|')'
newline|'\n'
name|'fake_memcache'
op|'.'
name|'set'
op|'('
string|"'AUTH_/auth/AUTH_token'"
op|','
op|'('
name|'time'
op|'('
op|')'
op|'-'
number|'1'
op|','
string|"'act:usr,act'"
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/.token/AUTH_token'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'swift.cache'"
op|':'
nl|'\n'
name|'fake_memcache'
op|'}'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'404'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assert_'
op|'('
string|"'x-auth-groups'"
name|'not'
name|'in'
name|'resp'
op|'.'
name|'headers'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assert_'
op|'('
string|"'x-auth-ttl'"
name|'not'
name|'in'
name|'resp'
op|'.'
name|'headers'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_validate_token_from_object
dedent|''
name|'def'
name|'test_validate_token_from_object'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of token object'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|"'groups'"
op|':'
op|'['
op|'{'
string|"'name'"
op|':'
string|"'act:usr'"
op|'}'
op|','
nl|'\n'
op|'{'
string|"'name'"
op|':'
string|"'act'"
op|'}'
op|']'
op|','
string|"'expires'"
op|':'
name|'time'
op|'('
op|')'
op|'+'
number|'1'
op|'}'
op|')'
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/.token/AUTH_token'"
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'204'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'headers'
op|'.'
name|'get'
op|'('
string|"'x-auth-groups'"
op|')'
op|','
string|"'act:usr,act'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assert_'
op|'('
name|'float'
op|'('
name|'resp'
op|'.'
name|'headers'
op|'['
string|"'x-auth-ttl'"
op|']'
op|')'
op|'<'
number|'1'
op|','
nl|'\n'
name|'resp'
op|'.'
name|'headers'
op|'['
string|"'x-auth-ttl'"
op|']'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_validate_token_from_object_expired
dedent|''
name|'def'
name|'test_validate_token_from_object_expired'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of token object'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|"'groups'"
op|':'
string|"'act:usr,act'"
op|','
nl|'\n'
string|"'expires'"
op|':'
name|'time'
op|'('
op|')'
op|'-'
number|'1'
op|'}'
op|')'
op|')'
op|','
nl|'\n'
comment|'# DELETE of expired token object'
nl|'\n'
op|'('
string|"'204 No Content'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/.token/AUTH_token'"
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'404'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'2'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_validate_token_from_object_with_admin
dedent|''
name|'def'
name|'test_validate_token_from_object_with_admin'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
comment|'# GET of token object'
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|"'account_id'"
op|':'
string|"'AUTH_cfa'"
op|','
string|"'groups'"
op|':'
nl|'\n'
op|'['
op|'{'
string|"'name'"
op|':'
string|"'act:usr'"
op|'}'
op|','
op|'{'
string|"'name'"
op|':'
string|"'act'"
op|'}'
op|','
op|'{'
string|"'name'"
op|':'
string|"'.admin'"
op|'}'
op|']'
op|','
nl|'\n'
string|"'expires'"
op|':'
name|'time'
op|'('
op|')'
op|'+'
number|'1'
op|'}'
op|')'
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'resp'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/auth/v2/.token/AUTH_token'"
nl|'\n'
op|')'
op|'.'
name|'get_response'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'204'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'headers'
op|'.'
name|'get'
op|'('
string|"'x-auth-groups'"
op|')'
op|','
nl|'\n'
string|"'act:usr,act,AUTH_cfa'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assert_'
op|'('
name|'float'
op|'('
name|'resp'
op|'.'
name|'headers'
op|'['
string|"'x-auth-ttl'"
op|']'
op|')'
op|'<'
number|'1'
op|','
nl|'\n'
name|'resp'
op|'.'
name|'headers'
op|'['
string|"'x-auth-ttl'"
op|']'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_conn_default
dedent|''
name|'def'
name|'test_get_conn_default'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'conn'
op|'='
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'get_conn'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'conn'
op|'.'
name|'__class__'
op|','
name|'auth'
op|'.'
name|'HTTPConnection'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'conn'
op|'.'
name|'host'
op|','
string|"'127.0.0.1'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'conn'
op|'.'
name|'port'
op|','
number|'8080'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_conn_default_https
dedent|''
name|'def'
name|'test_get_conn_default_https'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'local_auth'
op|'='
name|'auth'
op|'.'
name|'filter_factory'
op|'('
op|'{'
string|"'super_admin_key'"
op|':'
string|"'supertest'"
op|','
nl|'\n'
string|"'default_swift_cluster'"
op|':'
string|"'local#https://1.2.3.4/v1'"
op|'}'
op|')'
op|'('
name|'FakeApp'
op|'('
op|')'
op|')'
newline|'\n'
name|'conn'
op|'='
name|'local_auth'
op|'.'
name|'get_conn'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'conn'
op|'.'
name|'__class__'
op|','
name|'auth'
op|'.'
name|'HTTPSConnection'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'conn'
op|'.'
name|'host'
op|','
string|"'1.2.3.4'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'conn'
op|'.'
name|'port'
op|','
number|'443'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_conn_overridden
dedent|''
name|'def'
name|'test_get_conn_overridden'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'local_auth'
op|'='
name|'auth'
op|'.'
name|'filter_factory'
op|'('
op|'{'
string|"'super_admin_key'"
op|':'
string|"'supertest'"
op|','
nl|'\n'
string|"'default_swift_cluster'"
op|':'
string|"'local#https://1.2.3.4/v1'"
op|'}'
op|')'
op|'('
name|'FakeApp'
op|'('
op|')'
op|')'
newline|'\n'
name|'conn'
op|'='
name|'local_auth'
op|'.'
name|'get_conn'
op|'('
name|'urlparsed'
op|'='
name|'auth'
op|'.'
name|'urlparse'
op|'('
string|"'http://5.6.7.8/v1'"
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'conn'
op|'.'
name|'__class__'
op|','
name|'auth'
op|'.'
name|'HTTPConnection'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'conn'
op|'.'
name|'host'
op|','
string|"'5.6.7.8'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'conn'
op|'.'
name|'port'
op|','
number|'80'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_conn_overridden_https
dedent|''
name|'def'
name|'test_get_conn_overridden_https'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'local_auth'
op|'='
name|'auth'
op|'.'
name|'filter_factory'
op|'('
op|'{'
string|"'super_admin_key'"
op|':'
string|"'supertest'"
op|','
nl|'\n'
string|"'default_swift_cluster'"
op|':'
string|"'local#http://1.2.3.4/v1'"
op|'}'
op|')'
op|'('
name|'FakeApp'
op|'('
op|')'
op|')'
newline|'\n'
name|'conn'
op|'='
name|'local_auth'
op|'.'
name|'get_conn'
op|'('
name|'urlparsed'
op|'='
name|'auth'
op|'.'
name|'urlparse'
op|'('
string|"'https://5.6.7.8/v1'"
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'conn'
op|'.'
name|'__class__'
op|','
name|'auth'
op|'.'
name|'HTTPSConnection'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'conn'
op|'.'
name|'host'
op|','
string|"'5.6.7.8'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'conn'
op|'.'
name|'port'
op|','
number|'443'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_itoken_fail_no_memcache
dedent|''
name|'def'
name|'test_get_itoken_fail_no_memcache'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'exc'
op|'='
name|'None'
newline|'\n'
name|'try'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'get_itoken'
op|'('
op|'{'
op|'}'
op|')'
newline|'\n'
dedent|''
name|'except'
name|'Exception'
op|','
name|'err'
op|':'
newline|'\n'
indent|'            '
name|'exc'
op|'='
name|'err'
newline|'\n'
dedent|''
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'str'
op|'('
name|'exc'
op|')'
op|','
nl|'\n'
string|"'No memcache set up; required for Swauth middleware'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_itoken_success
dedent|''
name|'def'
name|'test_get_itoken_success'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'fmc'
op|'='
name|'FakeMemcache'
op|'('
op|')'
newline|'\n'
name|'itk'
op|'='
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'get_itoken'
op|'('
op|'{'
string|"'swift.cache'"
op|':'
name|'fmc'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assert_'
op|'('
name|'itk'
op|'.'
name|'startswith'
op|'('
string|"'AUTH_itk'"
op|')'
op|','
name|'itk'
op|')'
newline|'\n'
name|'expires'
op|','
name|'groups'
op|'='
name|'fmc'
op|'.'
name|'get'
op|'('
string|"'AUTH_/auth/%s'"
op|'%'
name|'itk'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assert_'
op|'('
name|'expires'
op|'>'
name|'time'
op|'('
op|')'
op|','
name|'expires'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'groups'
op|','
string|"'.auth,.reseller_admin,AUTH_.auth'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_admin_detail_fail_no_colon
dedent|''
name|'def'
name|'test_get_admin_detail_fail_no_colon'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
op|']'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'get_admin_detail'
op|'('
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/'"
op|')'
op|')'
op|','
nl|'\n'
name|'None'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'get_admin_detail'
op|'('
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'usr'"
op|'}'
op|')'
op|')'
op|','
name|'None'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertRaises'
op|'('
name|'StopIteration'
op|','
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'get_admin_detail'
op|','
nl|'\n'
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/'"
op|','
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'act:usr'"
op|'}'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_admin_detail_fail_user_not_found
dedent|''
name|'def'
name|'test_get_admin_detail_fail_user_not_found'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
op|'('
string|"'404 Not Found'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'get_admin_detail'
op|'('
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'act:usr'"
op|'}'
op|')'
op|')'
op|','
name|'None'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_admin_detail_fail_get_user_error
dedent|''
name|'def'
name|'test_get_admin_detail_fail_get_user_error'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
op|'('
string|"'503 Service Unavailable'"
op|','
op|'{'
op|'}'
op|','
string|"''"
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'exc'
op|'='
name|'None'
newline|'\n'
name|'try'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'get_admin_detail'
op|'('
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'act:usr'"
op|'}'
op|')'
op|')'
newline|'\n'
dedent|''
name|'except'
name|'Exception'
op|','
name|'err'
op|':'
newline|'\n'
indent|'            '
name|'exc'
op|'='
name|'err'
newline|'\n'
dedent|''
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'str'
op|'('
name|'exc'
op|')'
op|','
string|"'Could not get admin user object: '"
nl|'\n'
string|"'/v1/AUTH_.auth/act/usr 503 Service Unavailable'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_admin_detail_success
dedent|''
name|'def'
name|'test_get_admin_detail_success'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
nl|'\n'
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|'"auth"'
op|':'
string|'"plaintext:key"'
op|','
nl|'\n'
string|'"groups"'
op|':'
op|'['
op|'{'
string|"'name'"
op|':'
string|'"act:usr"'
op|'}'
op|','
op|'{'
string|"'name'"
op|':'
string|'"act"'
op|'}'
op|','
nl|'\n'
op|'{'
string|"'name'"
op|':'
string|'".admin"'
op|'}'
op|']'
op|'}'
op|')'
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'detail'
op|'='
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'get_admin_detail'
op|'('
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'act:usr'"
op|'}'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'.'
name|'calls'
op|','
number|'1'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'detail'
op|','
op|'{'
string|"'account'"
op|':'
string|"'act'"
op|','
nl|'\n'
string|"'auth'"
op|':'
string|"'plaintext:key'"
op|','
nl|'\n'
string|"'groups'"
op|':'
op|'['
op|'{'
string|"'name'"
op|':'
string|"'act:usr'"
op|'}'
op|','
op|'{'
string|"'name'"
op|':'
string|"'act'"
op|'}'
op|','
nl|'\n'
op|'{'
string|"'name'"
op|':'
string|"'.admin'"
op|'}'
op|']'
op|'}'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_credentials_match_success
dedent|''
name|'def'
name|'test_credentials_match_success'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'assert_'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'credentials_match'
op|'('
nl|'\n'
op|'{'
string|"'auth'"
op|':'
string|"'plaintext:key'"
op|'}'
op|','
string|"'key'"
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_credentials_match_fail_no_details
dedent|''
name|'def'
name|'test_credentials_match_fail_no_details'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'assert_'
op|'('
name|'not'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'credentials_match'
op|'('
name|'None'
op|','
string|"'notkey'"
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_credentials_match_fail_plaintext
dedent|''
name|'def'
name|'test_credentials_match_fail_plaintext'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'assert_'
op|'('
name|'not'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'credentials_match'
op|'('
nl|'\n'
op|'{'
string|"'auth'"
op|':'
string|"'plaintext:key'"
op|'}'
op|','
string|"'notkey'"
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_is_super_admin_success
dedent|''
name|'def'
name|'test_is_super_admin_success'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'assert_'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'is_super_admin'
op|'('
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
op|')'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_is_super_admin_fail_bad_key
dedent|''
name|'def'
name|'test_is_super_admin_fail_bad_key'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'assert_'
op|'('
name|'not'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'is_super_admin'
op|'('
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'bad'"
op|'}'
op|')'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assert_'
op|'('
name|'not'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'is_super_admin'
op|'('
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|'}'
op|')'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assert_'
op|'('
name|'not'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'is_super_admin'
op|'('
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/'"
op|')'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_is_super_admin_fail_bad_user
dedent|''
name|'def'
name|'test_is_super_admin_fail_bad_user'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'assert_'
op|'('
name|'not'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'is_super_admin'
op|'('
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'bad'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
op|')'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assert_'
op|'('
name|'not'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'is_super_admin'
op|'('
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
op|')'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assert_'
op|'('
name|'not'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'is_super_admin'
op|'('
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/'"
op|')'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_is_reseller_admin_success_is_super_admin
dedent|''
name|'def'
name|'test_is_reseller_admin_success_is_super_admin'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'assert_'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'is_reseller_admin'
op|'('
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
op|')'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_is_reseller_admin_success_called_get_admin_detail
dedent|''
name|'def'
name|'test_is_reseller_admin_success_called_get_admin_detail'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
nl|'\n'
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|"'auth'"
op|':'
string|"'plaintext:key'"
op|','
nl|'\n'
string|"'groups'"
op|':'
op|'['
op|'{'
string|"'name'"
op|':'
string|"'act:rdm'"
op|'}'
op|','
op|'{'
string|"'name'"
op|':'
string|"'act'"
op|'}'
op|','
nl|'\n'
op|'{'
string|"'name'"
op|':'
string|"'.admin'"
op|'}'
op|','
nl|'\n'
op|'{'
string|"'name'"
op|':'
string|"'.reseller_admin'"
op|'}'
op|']'
op|'}'
op|')'
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assert_'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'is_reseller_admin'
op|'('
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'act:rdm'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'key'"
op|'}'
op|')'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_is_reseller_admin_fail_only_account_admin
dedent|''
name|'def'
name|'test_is_reseller_admin_fail_only_account_admin'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
nl|'\n'
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|"'auth'"
op|':'
string|"'plaintext:key'"
op|','
nl|'\n'
string|"'groups'"
op|':'
op|'['
op|'{'
string|"'name'"
op|':'
string|"'act:adm'"
op|'}'
op|','
op|'{'
string|"'name'"
op|':'
string|"'act'"
op|'}'
op|','
nl|'\n'
op|'{'
string|"'name'"
op|':'
string|"'.admin'"
op|'}'
op|']'
op|'}'
op|')'
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assert_'
op|'('
name|'not'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'is_reseller_admin'
op|'('
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'act:adm'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'key'"
op|'}'
op|')'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_is_reseller_admin_fail_regular_user
dedent|''
name|'def'
name|'test_is_reseller_admin_fail_regular_user'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
nl|'\n'
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|"'auth'"
op|':'
string|"'plaintext:key'"
op|','
nl|'\n'
string|"'groups'"
op|':'
op|'['
op|'{'
string|"'name'"
op|':'
string|"'act:usr'"
op|'}'
op|','
op|'{'
string|"'name'"
op|':'
string|"'act'"
op|'}'
op|']'
op|'}'
op|')'
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assert_'
op|'('
name|'not'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'is_reseller_admin'
op|'('
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'act:usr'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'key'"
op|'}'
op|')'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_is_reseller_admin_fail_bad_key
dedent|''
name|'def'
name|'test_is_reseller_admin_fail_bad_key'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
nl|'\n'
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|"'auth'"
op|':'
string|"'plaintext:key'"
op|','
nl|'\n'
string|"'groups'"
op|':'
op|'['
op|'{'
string|"'name'"
op|':'
string|"'act:rdm'"
op|'}'
op|','
op|'{'
string|"'name'"
op|':'
string|"'act'"
op|'}'
op|','
nl|'\n'
op|'{'
string|"'name'"
op|':'
string|"'.admin'"
op|'}'
op|','
nl|'\n'
op|'{'
string|"'name'"
op|':'
string|"'.reseller_admin'"
op|'}'
op|']'
op|'}'
op|')'
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assert_'
op|'('
name|'not'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'is_reseller_admin'
op|'('
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'act:rdm'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'bad'"
op|'}'
op|')'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_is_account_admin_success_is_super_admin
dedent|''
name|'def'
name|'test_is_account_admin_success_is_super_admin'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'assert_'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'is_account_admin'
op|'('
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'.super_admin'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'supertest'"
op|'}'
op|')'
op|','
string|"'act'"
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_is_account_admin_success_is_reseller_admin
dedent|''
name|'def'
name|'test_is_account_admin_success_is_reseller_admin'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
nl|'\n'
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|"'auth'"
op|':'
string|"'plaintext:key'"
op|','
nl|'\n'
string|"'groups'"
op|':'
op|'['
op|'{'
string|"'name'"
op|':'
string|"'act:rdm'"
op|'}'
op|','
op|'{'
string|"'name'"
op|':'
string|"'act'"
op|'}'
op|','
nl|'\n'
op|'{'
string|"'name'"
op|':'
string|"'.admin'"
op|'}'
op|','
nl|'\n'
op|'{'
string|"'name'"
op|':'
string|"'.reseller_admin'"
op|'}'
op|']'
op|'}'
op|')'
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assert_'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'is_account_admin'
op|'('
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'act:rdm'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'key'"
op|'}'
op|')'
op|','
string|"'act'"
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_is_account_admin_success
dedent|''
name|'def'
name|'test_is_account_admin_success'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
nl|'\n'
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|"'auth'"
op|':'
string|"'plaintext:key'"
op|','
nl|'\n'
string|"'groups'"
op|':'
op|'['
op|'{'
string|"'name'"
op|':'
string|"'act:adm'"
op|'}'
op|','
op|'{'
string|"'name'"
op|':'
string|"'act'"
op|'}'
op|','
nl|'\n'
op|'{'
string|"'name'"
op|':'
string|"'.admin'"
op|'}'
op|']'
op|'}'
op|')'
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assert_'
op|'('
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'is_account_admin'
op|'('
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'act:adm'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'key'"
op|'}'
op|')'
op|','
string|"'act'"
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_is_account_admin_fail_account_admin_different_account
dedent|''
name|'def'
name|'test_is_account_admin_fail_account_admin_different_account'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
nl|'\n'
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|"'auth'"
op|':'
string|"'plaintext:key'"
op|','
nl|'\n'
string|"'groups'"
op|':'
op|'['
op|'{'
string|"'name'"
op|':'
string|"'act2:adm'"
op|'}'
op|','
op|'{'
string|"'name'"
op|':'
string|"'act2'"
op|'}'
op|','
nl|'\n'
op|'{'
string|"'name'"
op|':'
string|"'.admin'"
op|'}'
op|']'
op|'}'
op|')'
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assert_'
op|'('
name|'not'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'is_account_admin'
op|'('
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'act2:adm'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'key'"
op|'}'
op|')'
op|','
string|"'act'"
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_is_account_admin_fail_regular_user
dedent|''
name|'def'
name|'test_is_account_admin_fail_regular_user'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
nl|'\n'
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|"'auth'"
op|':'
string|"'plaintext:key'"
op|','
nl|'\n'
string|"'groups'"
op|':'
op|'['
op|'{'
string|"'name'"
op|':'
string|"'act:usr'"
op|'}'
op|','
op|'{'
string|"'name'"
op|':'
string|"'act'"
op|'}'
op|']'
op|'}'
op|')'
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assert_'
op|'('
name|'not'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'is_account_admin'
op|'('
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'act:usr'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'key'"
op|'}'
op|')'
op|','
string|"'act'"
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_is_account_admin_fail_bad_key
dedent|''
name|'def'
name|'test_is_account_admin_fail_bad_key'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'app'
op|'='
name|'FakeApp'
op|'('
name|'iter'
op|'('
op|'['
nl|'\n'
op|'('
string|"'200 Ok'"
op|','
op|'{'
op|'}'
op|','
nl|'\n'
name|'json'
op|'.'
name|'dumps'
op|'('
op|'{'
string|"'auth'"
op|':'
string|"'plaintext:key'"
op|','
nl|'\n'
string|"'groups'"
op|':'
op|'['
op|'{'
string|"'name'"
op|':'
string|"'act:rdm'"
op|'}'
op|','
op|'{'
string|"'name'"
op|':'
string|"'act'"
op|'}'
op|','
nl|'\n'
op|'{'
string|"'name'"
op|':'
string|"'.admin'"
op|'}'
op|','
nl|'\n'
op|'{'
string|"'name'"
op|':'
string|"'.reseller_admin'"
op|'}'
op|']'
op|'}'
op|')'
op|')'
op|']'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assert_'
op|'('
name|'not'
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'is_account_admin'
op|'('
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/'"
op|','
nl|'\n'
name|'headers'
op|'='
op|'{'
string|"'X-Auth-Admin-User'"
op|':'
string|"'act:rdm'"
op|','
nl|'\n'
string|"'X-Auth-Admin-Key'"
op|':'
string|"'bad'"
op|'}'
op|')'
op|','
string|"'act'"
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_reseller_admin_but_account_is_internal_use_only
dedent|''
name|'def'
name|'test_reseller_admin_but_account_is_internal_use_only'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/v1/AUTH_.auth'"
op|','
nl|'\n'
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'GET'"
op|'}'
op|')'
newline|'\n'
name|'req'
op|'.'
name|'remote_user'
op|'='
string|"'act:usr,act,.reseller_admin'"
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'authorize'
op|'('
name|'req'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'403'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_reseller_admin_but_account_is_exactly_reseller_prefix
dedent|''
name|'def'
name|'test_reseller_admin_but_account_is_exactly_reseller_prefix'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'req'
op|'='
name|'Request'
op|'.'
name|'blank'
op|'('
string|"'/v1/AUTH_'"
op|','
name|'environ'
op|'='
op|'{'
string|"'REQUEST_METHOD'"
op|':'
string|"'GET'"
op|'}'
op|')'
newline|'\n'
name|'req'
op|'.'
name|'remote_user'
op|'='
string|"'act:usr,act,.reseller_admin'"
newline|'\n'
name|'resp'
op|'='
name|'self'
op|'.'
name|'test_auth'
op|'.'
name|'authorize'
op|'('
name|'req'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'resp'
op|'.'
name|'status_int'
op|','
number|'403'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
dedent|''
dedent|''
name|'if'
name|'__name__'
op|'=='
string|"'__main__'"
op|':'
newline|'\n'
indent|'    '
name|'unittest'
op|'.'
name|'main'
op|'('
op|')'
newline|'\n'
dedent|''
endmarker|''
end_unit
